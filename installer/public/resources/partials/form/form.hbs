{{#if hasFieldset}}
    {{#view "magellan" elements=model.viewSettings.elements}}
        {{#each formElement in model.viewSettings.elements itemController="FormElement"}}
            {{#if isFieldset}}
                {{#view view.buttonView model=formElement}}{{formElement.label}}{{/view}}
            {{/if}}
        {{/each}}
    {{/view}}
{{/if}}

<div class="row s-full-height collapse">
    <div class="columns small-12 maggelan-content">
        {{#each formElements in model.viewSettings.elements itemController="FormElement"}}
            {{#if isFieldset}}
                <fieldset id="fieldset-{{unbound formElements.name}}">
                    <legend {{action 'expand'}}><i {{bind-attr class=":icon isExpanded:icon-bottom:icon-right"}}></i>{{formElements.label}}</legend>
                    {{#if isExpanded}}
                        {{#each meta in formElements.elements}}
                            {{view "field" objectBinding="object" metaBinding="meta"}}
                        {{/each}}
                    {{/if}}
                </fieldset>
            {{else}}
                {{view "field" objectBinding="object" metaBinding="this"}}
            {{/if}}
        {{/each}}
    </div>
</div>

{{#if hasToolbar}}
    {{render "formToolbar" toolbar}}
{{/if}}