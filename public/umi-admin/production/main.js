define("application/config",[],function(){return function(a){a.config={iScroll:{scrollX:!0,probeType:3,mouseWheel:!0,scrollbars:!0,bounce:!1,click:!0,freeScroll:!1,keyBindings:!0,interactiveScrollbars:!0,fadeScrollbars:!0,disableMouse:!0},elFinder:{url:"/admin/api/files/manager/action/connector",lang:"ru",closeOnGetFileCallback:!0,uiOptions:{toolbar:[["back","forward"],["reload"],["getfile"],["mkdir","mkfile","upload"],["download"],["copy","cut","paste"],["rm"],["duplicate","rename","edit"],["view"],["help"]]}}},a.config.CkEditor=function(){var a={};a.toolbarGroups=[{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection"]},{name:"links"},{name:"insert"},{name:"forms"},{name:"tools"},{name:"document",groups:["mode","document","doctools"]},{name:"others"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"styles"},{name:"colors"}],a.removeButtons="Underline,Subscript,Superscript",a.format_tags="p;h1;h2;h3;pre",a.removeDialogTabs="image:advanced;link:advanced";var b=Ember.get(window,"UmiSettings.locale")||"";return a.language=b.split("-")[0],a.height="450px",a.baseFloatZIndex=200,a.image_previewText=" ",a}}}),define("application/utils",["Modernizr"],function(a){return function(b){b.Utils={},b.Utils.htmlEncode=function(a){return a+="",a.replace(/[&<>"']/g,function(a){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[a]+";"})},b.Utils.replacePlaceholder=function(a,b){var c;return c=b.replace(/{\w+}/g,function(b){return b&&(b=b.slice(1,-1)),Ember.get(a,b)||b})},b.Utils.objectsMerge=function(a,b){Ember.assert('Некорректный тип аргументов. Метод objectsMerge ожидает аргументы с типом "object"',"object"===Ember.typeOf(a)&&"object"===Ember.typeOf(b));for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},b.Utils.getStringValue=function(a){var c,d,e;switch(Ember.typeOf(a)){case"string":e=a;break;case"array":e=a.join(",");break;case"object":d=[];for(c in a)a.hasOwnProperty(c)&&d.push(b.Utils.getStringValue(a[c]));e=d}return e},b.Utils.LS={store:localStorage,init:function(){a.localstorage?localStorage.getItem("UMI")||localStorage.setItem("UMI",JSON.stringify({})):this.store={UMI:JSON.stringify({})}},get:function(a){var b=JSON.parse(this.store.UMI);return Ember.get(b,a)},set:function(b,c){var d=JSON.parse(this.store.UMI),e=b.split("."),f=0,g=function h(a,b,c){a.hasOwnProperty(b)||(a[b]={}),f<e.length-1?(f++,h(a[b],e[f],c)):a[b]=c};g(d,e[0],c),a.localstorage?this.store.setItem("UMI",JSON.stringify(d)):this.store.UMI=JSON.stringify(d)}},Ember.Handlebars.registerHelper("filterClassName",function(a,b){return a=Ember.Handlebars.helpers.unbound.apply(this,[a,b]),a=a.replace(/\./g,"__")}),b.Utils.LS.init(),window.mobileDetection={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}},mobileDetection.any()&&console.log("mobile"),a.addTest("csscalc",function(){var b="width:",c="calc(10px);",d=document.createElement("div");return d.style.cssText=b+a._prefixes.join(c+b),!!d.style.length}),a.addTest("cssfilters",function(){var b=document.createElement("div");return b.style.cssText=a._prefixes.join("filter:blur(2px); "),!!b.style.length&&(void 0===document.documentMode||document.documentMode>9)})}}),define("application/i18n",[],function(){return function(a){Ember.Handlebars.registerHelper("i18n",function(b,c){"string"!==Ember.typeOf(c)&&(c=void 0);var d=a.i18n.getTranslate(b,c);return d?d:b}),a.i18n=Ember.Object.extend({dictionary:{},setDictionary:function(a,b){var c,d=this.get("dictionary");b&&b&&(c="object"===Ember.typeOf(d[b])?d[b]:{},Ember.set(d,b,c));for(var e in a)a.hasOwnProperty(e)&&(b?Ember.set(Ember.get(d,b),e,a[e]):Ember.set(d,e,a[e]))},getTranslate:function(a,b){var c="dictionary."+(b?b+".":"")+a,d=this.get(c);return d?d:a}}).create({}),a.i18nInterface=Ember.Mixin.create({dictionaryNamespace:null,localDictionary:null,setDictionary:function(){a.i18n.setDictionary(this.get("localDictionary"),this.get("dictionaryNamespace"))},init:function(){this._super(),this.setDictionary()}})}}),define("application/templates.compile",["Ember"],function(a){a.TEMPLATES["UMI/application"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h,i,j="",k=this.escapeExpression,l=d.helperMissing;return f.buffer.push('<div class="s-full-height-before umi-header"> '),f.buffer.push(k(d.view.call(c,"topBar",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["STRING"],data:f}))),f.buffer.push(" "),f.buffer.push(k((h=d.render||c&&c.render,i={hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["STRING"],data:f},h?h.call(c,"dock",i):l.call(c,"render","dock",i)))),f.buffer.push(" </div> "),g=d._triageMustache.call(c,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(g||0===g)&&f.buffer.push(g),f.buffer.push(" "),f.buffer.push(k((h=d.outlet||c&&c.outlet,i={hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["STRING"],data:f},h?h.call(c,"popup",i):l.call(c,"outlet","popup",i)))),j}),a.TEMPLATES["UMI/component"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"sideBarControl",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" <div "),b.buffer.push(l(d["bind-attr"].call(a,{hash:{"class":":umi-divider-right sideBarControl::wide"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push('> <div class="umi-component columns small-12 s-padding-clear s-full-height"> '),c=d._triageMustache.call(a,"outlet",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> </div> "),e}function h(a,b){var c,e,f="";return b.buffer.push(' <div class="umi-divider-left"> <div class="umi-divider-left-content"> '),b.buffer.push(l((c=d.outlet||a&&a.outlet,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b},c?c.call(a,"sideBar",e):k.call(a,"outlet","sideBar",e)))),b.buffer.push(' </div> <div class="umi-divider"></div> </div> <div class="umi-left-bottom-panel s-unselectable"> <a href="javascript:void(0)" class="button white square umi-divider-left-toggle"> <i class="icon icon-left"></i> </a> </div> '),f}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var i,j="",k=d.helperMissing,l=this.escapeExpression,m=this;return f.buffer.push('<div class="s-full-height"> '),i=d.view.call(c,"divider",{hash:{modelBinding:"model"},hashTypes:{modelBinding:"STRING"},hashContexts:{modelBinding:c},inverse:m.noop,fn:m.program(1,g,f),contexts:[c],types:["STRING"],data:f}),(i||0===i)&&f.buffer.push(i),f.buffer.push(" </div>"),j}),a.TEMPLATES["UMI/editForm"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h,i=d.helperMissing,j=this.escapeExpression;f.buffer.push(j((g=d.render||c&&c.render,h={hash:{},hashTypes:{},hashContexts:{},contexts:[c,c],types:["STRING","ID"],data:f},g?g.call(c,"formControl","model",h):i.call(c,"render","formControl","model",h))))}),a.TEMPLATES["UMI/empty"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h="";return f.buffer.push('<div class="s-full-height panel"> <h3 class="text-center">'),g=d._triageMustache.call(c,"model.control.params.content",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(g||0===g)&&f.buffer.push(g),f.buffer.push("</h3> </div> "),h}),a.TEMPLATES["UMI/files"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d.view.call(c,"fileManager",{hash:{content:"model"},hashTypes:{content:"ID"},hashContexts:{content:c},contexts:[c],types:["STRING"],data:f})))}),a.TEMPLATES["UMI/filter"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h,i=d.helperMissing,j=this.escapeExpression;f.buffer.push(j((g=d.render||c&&c.render,h={hash:{},hashTypes:{},hashContexts:{},contexts:[c,c],types:["STRING","ID"],data:f},g?g.call(c,"tableControl","model",h):i.call(c,"render","tableControl","model",h))))}),a.TEMPLATES["UMI/getBacklinks"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d.view.call(c,"backlinksTable",{hash:{contentBinding:"model"},hashTypes:{contentBinding:"STRING"},hashContexts:{contentBinding:c},contexts:[c],types:["STRING"],data:f})))}),a.TEMPLATES["UMI/host"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d.view.call(c,"yaHostTable",{hash:{contentBinding:"model"},hashTypes:{contentBinding:"STRING"},hashContexts:{contentBinding:c},contexts:[c],types:["STRING"],data:f})))}),a.TEMPLATES["UMI/indexed"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d.view.call(c,"yaIndexesTable",{hash:{contentBinding:"model"},hashTypes:{contentBinding:"STRING"},hashContexts:{contentBinding:c},contexts:[c],types:["STRING"],data:f})))}),a.TEMPLATES["UMI/simpleForm"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h,i=d.helperMissing,j=this.escapeExpression;f.buffer.push(j((g=d.render||c&&c.render,h={hash:{},hashTypes:{},hashContexts:{},contexts:[c,c],types:["STRING","ID"],data:f},g?g.call(c,"formBase","model",h):i.call(c,"render","formBase","model",h))))}),a.TEMPLATES["UMI/simpleTable"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d.view.call(c,"tableCounters",{hash:{contentBinding:"model"},hashTypes:{contentBinding:"STRING"},hashContexts:{contentBinding:c},contexts:[c],types:["STRING"],data:f})))}),a.TEMPLATES["UMI/siteAnalyze"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d.view.call(c,"siteAnalyzeTable",{hash:{contentBinding:"model"},hashTypes:{contentBinding:"STRING"},hashContexts:{contentBinding:c},contexts:[c],types:["STRING"],data:f})))}),a.TEMPLATES["UMI/tops"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d.view.call(c,"yaTopsTable",{hash:{contentBinding:"model"},hashTypes:{contentBinding:"STRING"},hashContexts:{contentBinding:c},contexts:[c],types:["STRING"],data:f})))}),a.TEMPLATES["UMI/update"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d.view.call(c,"updateLayout",{hash:{data:"model"},hashTypes:{data:"ID"},hashContexts:{data:c},contexts:[c],types:["STRING"],data:f})))}),a.TEMPLATES["UMI/errors"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(" <p>"),c=d._triageMustache.call(a,"model.content",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</p> "),e}function h(a,b){var c,e="";return b.buffer.push(' <div class="text-left"> <code>'),c=d._triageMustache.call(a,"stack",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</code> </div> "),e}function i(a,b){var c,e="";return b.buffer.push(' <div class="alert-box error"> <ul> '),c=d.each.call(a,"lists",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(6,j,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </ul> </div> "),e}function j(a,b){var c,e="";return b.buffer.push(" <li>"),c=d._triageMustache.call(a,"error",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</li> "),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var k,l="",m=this;return f.buffer.push('<div class="umi-component s-full-height"> <div class="row"> <div class="small-10 columns small-centered text-center"> <p></p> <div> <h2>  <!--.-->  '),k=d._triageMustache.call(c,"title",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(k||0===k)&&f.buffer.push(k),f.buffer.push(" </h2> "),k=d["if"].call(c,"model.content",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(1,g,f),contexts:[c],types:["ID"],data:f}),(k||0===k)&&f.buffer.push(k),f.buffer.push(" "),k=d["if"].call(c,"stack",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(3,h,f),contexts:[c],types:["ID"],data:f}),(k||0===k)&&f.buffer.push(k),f.buffer.push(" "),k=d["if"].call(c,"lists",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(5,i,f),contexts:[c],types:["ID"],data:f}),(k||0===k)&&f.buffer.push(k),f.buffer.push(" </div> </div> </div> </div>"),l}),a.TEMPLATES["UMI/menu"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h,i=d.helperMissing,j=this.escapeExpression;f.buffer.push(j((g=d.render||c&&c.render,h={hash:{},hashTypes:{},hashContexts:{},contexts:[c,c],types:["STRING","ID"],data:f},g?g.call(c,"sideMenu","model",h):i.call(c,"render","sideMenu","model",h))))}),a.TEMPLATES["UMI/tree"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h,i=d.helperMissing,j=this.escapeExpression;f.buffer.push(j((g=d.render||c&&c.render,h={hash:{},hashTypes:{},hashContexts:{},contexts:[c,c],types:["STRING","ID"],data:f},g?g.call(c,"treeControl","model",h):i.call(c,"render","treeControl","model",h))))}),a.TEMPLATES["UMI/partials/chartControl"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{},f.buffer.push('<div class="umi-canvas-wrapper"> <canvas id="umi-metrika-canvas"></canvas> </div>')}),a.TEMPLATES["UMI/partials/dialog-layout"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(' <div class="umi-overlay"></div> <div '),b.buffer.push(j(d["bind-attr"].call(a,{hash:{"class":":umi-dialog model.type"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("> "),c=d["if"].call(a,"model.close",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),c=d._triageMustache.call(a,"yield",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> "),e}function h(a,b){var c="";return b.buffer.push(' <a href="" '),b.buffer.push(j(d.action.call(a,"close","model",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push(' class="close"><i class="icon white icon-close"></i></a> '),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var i,j=this.escapeExpression,k=this;i=d["if"].call(c,"model",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,g,f),contexts:[c],types:["ID"],data:f}),f.buffer.push(i||0===i?i:"")}),a.TEMPLATES["UMI/partials/dialog-template"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(' <div class="umi-dialog-header">'),c=d._triageMustache.call(a,"model.title",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</div> "),e}function h(a,b){var c="";return b.buffer.push(' <div class="umi-dialog-content"> '),b.buffer.push(n(d._triageMustache.call(a,"model.content",{hash:{unescaped:"true"},hashTypes:{unescaped:"STRING"},hashContexts:{unescaped:a},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" </div> "),c}function i(a,b){var c,e="";return b.buffer.push(' <div class="umi-dialog-buttons"> '),c=d["if"].call(a,"model.confirm",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(6,j,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),c=d["if"].call(a,"model.reject",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(8,k,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> "),e}function j(a,b){var c,e="";return b.buffer.push(' <button class="button primary left" '),b.buffer.push(n(d.action.call(a,"confirm",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">"),c=d._triageMustache.call(a,"model.confirm",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</button> "),e}function k(a,b){var c,e="";return b.buffer.push(' <button class="button secondary right" '),b.buffer.push(n(d.action.call(a,"close",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">"),c=d._triageMustache.call(a,"model.reject",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</button> "),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var l,m="",n=this.escapeExpression,o=this;return l=d["if"].call(c,"model.title",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(1,g,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),f.buffer.push(' <div class="umi-dialog-section"> '),l=d["if"].call(c,"model.content",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(3,h,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),f.buffer.push(" "),l=d["if"].call(c,"view.hasButtons",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(5,i,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),f.buffer.push(" </div>"),m}),a.TEMPLATES["UMI/partials/dock"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"dockModuleButton",{hash:{module:"module"},hashTypes:{module:"ID"},hashContexts:{module:a},inverse:r.noop,fn:r.program(2,h,b),contexts:[a],types:["STRING"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function h(a,b){var c,e,f,g="";return b.buffer.push(" "),e=d["link-to"]||a&&a["link-to"],f={hash:{tagName:"span","class":"dock-module"},hashTypes:{tagName:"STRING","class":"STRING"},hashContexts:{tagName:a,"class":a},inverse:r.noop,fn:r.program(3,i,b),contexts:[a,a],types:["STRING","ID"],data:b},c=e?e.call(a,"module","module.name",f):s.call(a,"link-to","module","module.name",f),(c||0===c)&&b.buffer.push(c),b.buffer.push(' <ul class="f-dropdown center"> '),c=d.each.call(a,"component","in","module.components",{hash:{},hashTypes:{},hashContexts:{},inverse:r.noop,fn:r.program(5,j,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </ul> "),g}function i(a,b){var c,e="";return b.buffer.push(' <div class="umi-dock-module-icon umi-dock-module-'),b.buffer.push(q(d.unbound.call(a,"view.module.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push('"></div> <span>'),c=d._triageMustache.call(a,"module.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</span> "),e}function j(a,b){var c,e,f,g="";return b.buffer.push(' <li class="'),b.buffer.push(q(d.unbound.call(a,"component.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push('"> '),e=d["link-to"]||a&&a["link-to"],f={hash:{},hashTypes:{},hashContexts:{},inverse:r.noop,fn:r.program(6,k,b),contexts:[a,a,a],types:["STRING","ID","ID"],data:b},c=e?e.call(a,"component","module.name","component.name",f):s.call(a,"link-to","component","module.name","component.name",f),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </li> "),g}function k(a,b){var c,e="";return b.buffer.push(" "),c=d._triageMustache.call(a,"component.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function l(a,b){var c,e="";return b.buffer.push(" "),c=d["with"].call(a,"activeModule","as","module",{hash:{},hashTypes:{},hashContexts:{},inverse:r.noop,fn:r.program(9,m,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function m(a,b){var c,e="";return b.buffer.push(" "),c=d.each.call(a,"component","in","module.components",{hash:{},hashTypes:{},hashContexts:{},inverse:r.noop,fn:r.program(10,n,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function n(a,b){var c,e,f,g="";return b.buffer.push(" "),e=d["link-to"]||a&&a["link-to"],f={hash:{"class":"component.name"},hashTypes:{"class":"ID"},hashContexts:{"class":a},inverse:r.noop,fn:r.program(6,k,b),contexts:[a,a,a],types:["STRING","ID","ID"],data:b},c=e?e.call(a,"component","module.name","component.name",f):s.call(a,"link-to","component","module.name","component.name",f),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),g}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var o,p="",q=this.escapeExpression,r=this,s=d.helperMissing;return f.buffer.push('<div class="dock-wrapper"> <div class="dock-wrapper-bg"> <ul class="dock navigation"> '),o=d.each.call(c,"module","in","modules",{hash:{},hashTypes:{},hashContexts:{},inverse:r.noop,fn:r.program(1,g,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),(o||0===o)&&f.buffer.push(o),f.buffer.push(' </ul> </div> </div> <div class="dock-components"> <nav class="components-nav"> '),o=d["if"].call(c,"activeModule",{hash:{},hashTypes:{},hashContexts:{},inverse:r.noop,fn:r.program(8,l,f),contexts:[c],types:["ID"],data:f}),(o||0===o)&&f.buffer.push(o),f.buffer.push(" </nav> </div>"),p}),a.TEMPLATES["UMI/partials/checkboxGroup/CollectionElement"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(" "),b.buffer.push(i(d.view.call(a,"view.checkboxElementView",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i=this.escapeExpression,j=this;h=d.each.call(c,"meta.choices",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(1,g,f),contexts:[c],types:["ID"],data:f}),f.buffer.push(h||0===h?h:"")}),a.TEMPLATES["UMI/partials/checkboxGroup"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(" "),b.buffer.push(i(d.view.call(a,"checkboxElement",{hash:{meta:"element"},hashTypes:{meta:"ID"},hashContexts:{meta:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i=this.escapeExpression,j=this;h=d.each.call(c,"element","in","meta.choices",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(1,g,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),f.buffer.push(h||0===h?h:"")}),a.TEMPLATES["UMI/partials/dateElement"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g="",h=this.escapeExpression;return f.buffer.push('<div class="small-11 columns"> '),f.buffer.push(h(d.view.call(c,"textElement",{hash:{object:"view.object",meta:"view.meta"},hashTypes:{object:"ID",meta:"ID"},hashContexts:{object:c,meta:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push(' </div> <div class="small-1 columns"> <span class="postfix" '),f.buffer.push(h(d.action.call(c,"clearValue",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push('> <i class="icon icon-delete"></i> </span> </div>'),g}),a.TEMPLATES["UMI/partials/dateTimeElement"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h,i="",j=d.helperMissing,k=this.escapeExpression;return f.buffer.push('<div class="small-11 columns"> '),f.buffer.push(k((g=d.input||c&&c.input,h={hash:{type:"text","class":"umi-date",value:"view.value"},hashTypes:{type:"STRING","class":"STRING",value:"ID"},hashContexts:{type:c,"class":c,value:c},contexts:[],types:[],data:f},g?g.call(c,h):j.call(c,"input",h)))),f.buffer.push(' </div> <div class="small-1 columns"> <span class="postfix" '),f.buffer.push(k(d.action.call(c,"clearValue",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push('> <i class="icon icon-delete"></i> </span> </div>'),i}),a.TEMPLATES["UMI/partials/fileElement"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g="",h=this.escapeExpression;return f.buffer.push('<div class="small-10 columns"> '),f.buffer.push(h(d.view.call(c,"textElement",{hash:{object:"view.object",meta:"view.meta"},hashTypes:{object:"ID",meta:"ID"},hashContexts:{object:c,meta:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push(' </div> <div class="small-2 columns"> <span class="postfix"> <i class="icon icon-delete" '),f.buffer.push(h(d.action.call(c,"clearValue",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push('></i> <i class="icon icon-open-folder" '),f.buffer.push(h(d.action.call(c,"showPopup","view.popupParams",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c,c],types:["STRING","ID"],data:f}))),f.buffer.push("></i> </span> </div>"),g}),a.TEMPLATES["UMI/partials/imageElement"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g="",h=this.escapeExpression;return f.buffer.push('<div class="small-10 columns"> '),f.buffer.push(h(d.view.call(c,"textElement",{hash:{object:"view.object",meta:"view.meta"},hashTypes:{object:"ID",meta:"ID"},hashContexts:{object:c,meta:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push(' </div> <div class="small-2 columns"> <span class="postfix"> <i class="icon icon-delete" '),f.buffer.push(h(d.action.call(c,"clearValue",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push('></i> <i class="icon icon-image" '),f.buffer.push(h(d.action.call(c,"showPopup","view.popupParams",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c,c],types:["STRING","ID"],data:f}))),f.buffer.push("></i> </span> </div>"),g}),a.TEMPLATES["UMI/partials/multi-select-lazy-choices"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(' <ul class="umi-multi-select-list"> '),c=d.each.call(a,"view.notSelectedObjects",{hash:{},hashTypes:{},hashContexts:{},inverse:p.program(4,i,b),fn:p.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </ul> "),e}function h(a,b){var c,e="";return b.buffer.push(" <li "),b.buffer.push(n(d.action.call(a,"select","id",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push(" "),b.buffer.push(n(d["bind-attr"].call(a,{hash:{"class":"hover"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("> "),c=d._triageMustache.call(a,"displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </li> "),e}function i(a,b){var c,e,f="";return b.buffer.push(' <li class="placeholder"> '),b.buffer.push(n((c=d.i18n||a&&a.i18n,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b},c?c.call(a,"Nothing found",e):o.call(a,"i18n","Nothing found",e)))),b.buffer.push(" </li> "),f}function j(a,b){var c,e="";return b.buffer.push(' <div class="selected-list"> '),c=d.each.call(a,"view.selectedObjects",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(7,k,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> "),e}function k(a,b){var c,e="";return b.buffer.push(' <div class="item" '),b.buffer.push(n(d.action.call(a,"unSelect","id",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push(">"),c=d._triageMustache.call(a,"displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' <i class="close">&times;</i></div> '),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var l,m="",n=this.escapeExpression,o=d.helperMissing,p=this;return f.buffer.push('<div class="small-12 columns"> '),f.buffer.push(n(d.view.call(c,"view.inputView",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}))),f.buffer.push(' <span class="postfix radius" '),f.buffer.push(n(d.action.call(c,"toggleList",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push('> <i class="triangle"></i> </span> '),l=d["if"].call(c,"view.isOpen",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,g,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),f.buffer.push(" </div> "),l=d["if"].call(c,"view.selectedObjects.length",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(6,j,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),m}),a.TEMPLATES["UMI/partials/multi-select"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(' <ul class="umi-multi-select-list"> '),c=d.each.call(a,"view.notSelectedObjects",{hash:{},hashTypes:{},hashContexts:{},inverse:p.program(4,i,b),fn:p.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </ul> "),e}function h(a,b){var c,e="";return b.buffer.push(" <li "),b.buffer.push(n(d.action.call(a,"select","value",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push(" "),b.buffer.push(n(d["bind-attr"].call(a,{hash:{"class":"hover"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("> "),c=d._triageMustache.call(a,"label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </li> "),e}function i(a,b){var c,e,f="";return b.buffer.push(' <li class="placeholder"> '),b.buffer.push(n((c=d.i18n||a&&a.i18n,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b},c?c.call(a,"Nothing found",e):o.call(a,"i18n","Nothing found",e)))),b.buffer.push(" </li> "),f}function j(a,b){var c,e="";return b.buffer.push(' <div class="selected-list"> '),c=d.each.call(a,"view.selectedObjects",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(7,k,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> "),e
}function k(a,b){var c,e="";return b.buffer.push(' <div class="item" '),b.buffer.push(n(d.action.call(a,"unSelect","value",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push(">"),c=d._triageMustache.call(a,"label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' <i class="close">&times;</i></div> '),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var l,m="",n=this.escapeExpression,o=d.helperMissing,p=this;return f.buffer.push('<div class="small-12 columns"> '),f.buffer.push(n(d.view.call(c,"view.inputView",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}))),f.buffer.push(' <span class="postfix radius" '),f.buffer.push(n(d.action.call(c,"toggleList",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push('> <i class="triangle"></i> </span> '),l=d["if"].call(c,"view.isOpen",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,g,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),f.buffer.push(" </div> "),l=d["if"].call(c,"view.selectedObjects.length",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(6,j,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),m}),a.TEMPLATES["UMI/partials/objectRelationElement"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(' <li> <span class="button flat white square" '),b.buffer.push(j(d.action.call(a,"clearValue",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push('> <i class="icon icon-delete"></i> </span> </li> '),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i="",j=this.escapeExpression,k=this;return f.buffer.push("<div "),f.buffer.push(j(d["bind-attr"].call(c,{hash:{"class":":small-2 :columns :umi-columns-fixed view.value:small-2-right:small-1-right"},hashTypes:{"class":"STRING"},hashContexts:{"class":c},contexts:[],types:[],data:f}))),f.buffer.push('> <span class="postfix"> <span class="button-group"> <li> <span class="button flat white square" '),f.buffer.push(j(d.action.call(c,"showPopup","view.popupParams",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c,c],types:["STRING","ID"],data:f}))),f.buffer.push('> <i class="icon icon-open-folder"></i> </span> </li> '),h=d["if"].call(c,"view.value",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,g,f),contexts:[c],types:["ID"],data:f}),(h||0===h)&&f.buffer.push(h),f.buffer.push(' </span> </span> </div> <div class="small-10 columns"> '),f.buffer.push(j(d.view.call(c,"view.inputView",{hash:{object:"view.object",meta:"view.meta"},hashTypes:{object:"ID",meta:"ID"},hashContexts:{object:c,meta:c},contexts:[c],types:["ID"],data:f}))),f.buffer.push(" </div>"),i}),a.TEMPLATES["UMI/partials/objectRelationLayout"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e,f,g="";return b.buffer.push(" "),c=d["if"].call(a,"sideBarControl",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" <div "),b.buffer.push(j(d["bind-attr"].call(a,{hash:{"class":":umi-divider-right sideBarControl::wide"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push('> <div class="columns small-12 s-padding-clear s-full-height"> '),b.buffer.push(j((e=d.render||a&&a.render,f={hash:{},hashTypes:{},hashContexts:{},contexts:[a,a],types:["STRING","ID"],data:b},e?e.call(a,"tableControlShared","tableControlSettings",f):l.call(a,"render","tableControlShared","tableControlSettings",f)))),b.buffer.push(" </div> </div> "),g}function h(a,b){var c="";return b.buffer.push(' <div class="umi-divider-left"> <div class="umi-divider-left-content"> '),b.buffer.push(j(d.view.call(a,"view.parentView.sideMenu",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(' </div> <div class="umi-divider"></div> </div> <div class="umi-left-bottom-panel s-unselectable"> <a href="javascript:void(0)" class="button white square umi-divider-left-toggle"> <i class="icon icon-left"></i> </a> </div> '),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var i,j=this.escapeExpression,k=this,l=d.helperMissing;i=d.view.call(c,"divider",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,g,f),contexts:[c],types:["STRING"],data:f}),f.buffer.push(i||0===i?i:"")}),a.TEMPLATES["UMI/partials/objectRelationLayout/sideMenu"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"view.itemView",{hash:{item:"item"},hashTypes:{item:"ID"},hashContexts:{item:a},inverse:j.noop,fn:j.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function h(a,b){var c,e="";return b.buffer.push(' <a href="javascript:void(0)">'),c=d._triageMustache.call(a,"item.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</a> "),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var i,j=this;i=d.each.call(c,"item","in","collections",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(1,g,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),f.buffer.push(i||0===i?i:"")}),a.TEMPLATES["UMI/partials/permissions"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(' <dl class="accordion"> <dd class="accordion-navigation"> <a class="accordion-navigation-button" href="javascript:void(0)"><i class="icon icon-right"></i> '),c=d._triageMustache.call(a,"component.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push('</a> <div class="content"> '),b.buffer.push(j(d.view.call(a,"permissionsPartial",{hash:{component:"component"},hashTypes:{component:"ID"},hashContexts:{component:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" </div> </dd> </dl> "),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i="",j=this.escapeExpression,k=this;return f.buffer.push('<div class="umi-permissions"> '),h=d.each.call(c,"component","in","view.meta.resources",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,g,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),(h||0===h)&&f.buffer.push(h),f.buffer.push(" </div>"),i}),a.TEMPLATES["UMI/partials/permissions/partial"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(' <li class="umi-permissions-role-list-item"> <div class="umi-permissions-role"> '),c=d["if"].call(a,"role.component",{hash:{},hashTypes:{},hashContexts:{},inverse:l.noop,fn:l.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' <span class="umi-permissions-role-label" '),b.buffer.push(k(d["bind-attr"].call(a,{hash:{"data-permissions-component-path":"view.component.path"},hashTypes:{"data-permissions-component-path":"STRING"},hashContexts:{"data-permissions-component-path":a},contexts:[],types:[],data:b}))),b.buffer.push("> "),b.buffer.push(k(d.view.call(a,"checkboxElement",{hash:{meta:"role",name:"role.value",attributeValue:"role.value",value:"",className:"umi-permissions-role-checkbox"},hashTypes:{meta:"ID",name:"ID",attributeValue:"ID",value:"STRING",className:"STRING"},hashContexts:{meta:a,name:a,attributeValue:a,value:a,className:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" </span> </div> "),c=d["if"].call(a,"role.component",{hash:{},hashTypes:{},hashContexts:{},inverse:l.noop,fn:l.program(4,i,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </li> "),e}function h(a,b){b.buffer.push(' <span class="button tiny square white left s-margin-clear umi-permissions-role-button-expand"> <i class="icon icon-right"></i> </span> ')}function i(a,b){var c="";return b.buffer.push(' <div class="umi-permissions-component"> '),b.buffer.push(k(d.view.call(a,"permissionsPartial",{hash:{component:"role.component"},hashTypes:{component:"ID"},hashContexts:{component:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" </div> "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var j,k=this.escapeExpression,l=this;j=d.each.call(c,"role","in","view.component.roles",{hash:{},hashTypes:{},hashContexts:{},inverse:l.noop,fn:l.program(1,g,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),f.buffer.push(j||0===j?j:"")}),a.TEMPLATES["UMI/partials/radioElement"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(" "),b.buffer.push(i(d.view.call(a,"view.radioElementView",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i=this.escapeExpression,j=this;h=d.each.call(c,"view.meta.choices",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(1,g,f),contexts:[c],types:["ID"],data:f}),f.buffer.push(h||0===h?h:"")}),a.TEMPLATES["UMI/partials/singleCollectionObjectRelationElement"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(' <li> <span class="button flat white square" '),b.buffer.push(j(d.action.call(a,"clearValue",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push('> <i class="icon icon-delete"></i> </span> </li> '),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i="",j=this.escapeExpression,k=this;return f.buffer.push("<div "),f.buffer.push(j(d["bind-attr"].call(c,{hash:{"class":":small-2 :columns :umi-columns-fixed view.value:small-2-right:small-1-right"},hashTypes:{"class":"STRING"},hashContexts:{"class":c},contexts:[],types:[],data:f}))),f.buffer.push('> <span class="postfix"> <span class="button-group"> <li> <span class="button flat white square" '),f.buffer.push(j(d.action.call(c,"showPopup","view.popupParams",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c,c],types:["STRING","ID"],data:f}))),f.buffer.push('> <i class="icon icon-open-folder"></i> </span> </li> '),h=d["if"].call(c,"view.value",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,g,f),contexts:[c],types:["ID"],data:f}),(h||0===h)&&f.buffer.push(h),f.buffer.push(' </span> </span> </div> <div class="small-10 columns"> '),f.buffer.push(j(d.view.call(c,"textElement",{hash:{object:"view.object",meta:"view.meta"},hashTypes:{object:"ID",meta:"ID"},hashContexts:{object:c,meta:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push(" </div> "),i}),a.TEMPLATES["UMI/partials/textareaElement"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g="",h=this.escapeExpression;return f.buffer.push(h(d.view.call(c,"view.textareaView",{hash:{meta:"meta",object:"object"},hashTypes:{meta:"ID",object:"ID"},hashContexts:{meta:c,object:c},contexts:[c],types:["ID"],data:f}))),f.buffer.push(' <div class="umi-element-textarea-resizer"></div>'),g}),a.TEMPLATES["UMI/partials/timeElement"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g="",h=this.escapeExpression;return f.buffer.push('<div class="small-11 columns"> '),f.buffer.push(h(d.view.call(c,"view.inputView",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}))),f.buffer.push(' </div> <div class="small-1 columns"> <span class="postfix"> <i class="icon icon-delete"></i> </span> </div> <style> .umi-time-picker{ position: absolute; float: left; width: 200px; height: 200px; background: #FFFFFF; } </style>'),g}),a.TEMPLATES["UMI/partials/form"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(' <div class="s-full-height-before"> '),b.buffer.push(v(d.view.call(a,"toolbar",{hash:{toolbar:"control.toolbar"},hashTypes:{toolbar:"ID"},hashContexts:{toolbar:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" </div> "),c}function h(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"view.hasFieldset",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(4,i,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' <div class="row s-full-height collapse"> <div class="columns small-12 magellan-content"> '),c=d.each.call(a,"formElement","in","formElements",{hash:{itemViewClass:"view.elementView"},hashTypes:{itemViewClass:"STRING"},hashContexts:{itemViewClass:a},inverse:w.noop,fn:w.program(10,n,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> </div> "),e}function i(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"magellan",{hash:{elements:"formElements"},hashTypes:{elements:"ID"},hashContexts:{elements:a},inverse:w.noop,fn:w.program(5,j,b),contexts:[a],types:["STRING"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function j(a,b){var c,e="";return b.buffer.push(" "),c=d.each.call(a,"formElement","in","view.elements",{hash:{itemViewClass:"view.elementView"},hashTypes:{itemViewClass:"STRING"},hashContexts:{itemViewClass:a},inverse:w.noop,fn:w.program(6,k,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function k(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"view.isFieldset",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(7,l,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function l(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"view.parentView.buttonView",{hash:{model:"formElement"},hashTypes:{model:"ID"},hashContexts:{model:a},inverse:w.noop,fn:w.program(8,m,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function m(a,b){var c,e="";return b.buffer.push(" "),c=d._triageMustache.call(a,"formElement.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function n(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"view.isFieldset",{hash:{},hashTypes:{},hashContexts:{},inverse:w.program(15,r,b),fn:w.program(11,o,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function o(a,b){var c,e="";return b.buffer.push(' <fieldset id="fieldset-'),b.buffer.push(v(d.unbound.call(a,"formElement.id",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push('"> <legend '),b.buffer.push(v(d.action.call(a,"expand",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(' class="s-unselectable"> <i '),b.buffer.push(v(d["bind-attr"].call(a,{hash:{"class":":icon view.isExpanded:icon-bottom:icon-right"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> "),c=d._triageMustache.call(a,"formElement.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </legend> "),c=d["if"].call(a,"view.isExpanded",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(12,p,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </fieldset> "),e}function p(a,b){var c,e="";return b.buffer.push(" "),c=d.each.call(a,"element","in","formElement.elements",{hash:{itemViewClass:"view.parentView.elementView"},hashTypes:{itemViewClass:"STRING"},hashContexts:{itemViewClass:a},inverse:w.noop,fn:w.program(13,q,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function q(a,b){var c="";return b.buffer.push(" "),b.buffer.push(v(d.view.call(a,"fieldBase",{hash:{metaBinding:"element",objectBinding:"element"},hashTypes:{metaBinding:"STRING",objectBinding:"STRING"},hashContexts:{metaBinding:a,objectBinding:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),c}function r(a,b){var c="";return b.buffer.push(" <br /> "),b.buffer.push(v(d.view.call(a,"fieldBase",{hash:{metaBinding:"formElement",objectBinding:"formElement"},hashTypes:{metaBinding:"STRING",objectBinding:"STRING"},hashContexts:{metaBinding:a,objectBinding:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),c}function s(a,b){var c="";return b.buffer.push(" "),b.buffer.push(v(d.view.call(a,"view.submitToolbarView",{hash:{elements:"model.control.submitToolbar"},hashTypes:{elements:"ID"},hashContexts:{elements:a},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var t,u="",v=this.escapeExpression,w=this;return t=d["if"].call(c,"control.toolbar",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(1,g,f),contexts:[c],types:["ID"],data:f}),(t||0===t)&&f.buffer.push(t),f.buffer.push(' <div class="s-full-height"> '),t=d["with"].call(c,"model.control.meta.elements","as","formElements",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(3,h,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),(t||0===t)&&f.buffer.push(t),f.buffer.push(" </div> "),t=d["if"].call(c,"model.control.submitToolbar",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(17,s,f),contexts:[c],types:["ID"],data:f}),(t||0===t)&&f.buffer.push(t),u}),a.TEMPLATES["UMI/partials/formControl"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(' <div class="s-full-height-before"> '),b.buffer.push(v(d.view.call(a,"toolbar",{hash:{toolbar:"control.toolbar"},hashTypes:{toolbar:"ID"},hashContexts:{toolbar:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" </div> "),c}function h(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"view.hasFieldset",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(4,i,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' <div class="row s-full-height collapse"> <div class="columns small-12 magellan-content"> '),c=d.each.call(a,"formElement","in","formElements",{hash:{itemViewClass:"view.elementView"},hashTypes:{itemViewClass:"STRING"},hashContexts:{itemViewClass:a},inverse:w.noop,fn:w.program(10,n,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> </div> "),e}function i(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"magellan",{hash:{elements:"formElements"},hashTypes:{elements:"ID"},hashContexts:{elements:a},inverse:w.noop,fn:w.program(5,j,b),contexts:[a],types:["STRING"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function j(a,b){var c,e="";return b.buffer.push(" "),c=d.each.call(a,"formElement","in","view.elements",{hash:{itemViewClass:"view.elementView"},hashTypes:{itemViewClass:"STRING"},hashContexts:{itemViewClass:a},inverse:w.noop,fn:w.program(6,k,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function k(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"view.isFieldset",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(7,l,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function l(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"view.parentView.buttonView",{hash:{model:"formElement"},hashTypes:{model:"ID"},hashContexts:{model:a},inverse:w.noop,fn:w.program(8,m,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function m(a,b){var c,e="";return b.buffer.push(" "),c=d._triageMustache.call(a,"formElement.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function n(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"view.isFieldset",{hash:{},hashTypes:{},hashContexts:{},inverse:w.program(15,r,b),fn:w.program(11,o,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function o(a,b){var c,e="";return b.buffer.push(' <fieldset id="fieldset-'),b.buffer.push(v(d.unbound.call(a,"formElement.id",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push('"> <legend '),b.buffer.push(v(d.action.call(a,"expand",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(' class="s-unselectable"> <i '),b.buffer.push(v(d["bind-attr"].call(a,{hash:{"class":":icon view.isExpanded:icon-bottom:icon-right"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> "),c=d._triageMustache.call(a,"formElement.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </legend> "),c=d["if"].call(a,"view.isExpanded",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(12,p,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </fieldset> "),e}function p(a,b){var c,e="";return b.buffer.push(" "),c=d.each.call(a,"element","in","formElement.elements",{hash:{itemViewClass:"view.parentView.elementView"},hashTypes:{itemViewClass:"STRING"},hashContexts:{itemViewClass:a},inverse:w.noop,fn:w.program(13,q,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function q(a,b){var c="";return b.buffer.push(" "),b.buffer.push(v(d.view.call(a,"fieldFormControl",{hash:{metaBinding:"element",objectBinding:"controller.object"},hashTypes:{metaBinding:"STRING",objectBinding:"STRING"},hashContexts:{metaBinding:a,objectBinding:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),c}function r(a,b){var c="";return b.buffer.push(" "),b.buffer.push(v(d.view.call(a,"fieldFormControl",{hash:{metaBinding:"formElement",objectBinding:"controller.object"},hashTypes:{metaBinding:"STRING",objectBinding:"STRING"},hashContexts:{metaBinding:a,objectBinding:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),c}function s(a,b){var c="";return b.buffer.push(" "),b.buffer.push(v(d.view.call(a,"submitToolbar",{hash:{elements:"model.control.submitToolbar"},hashTypes:{elements:"ID"},hashContexts:{elements:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var t,u="",v=this.escapeExpression,w=this;return t=d["if"].call(c,"control.toolbar",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(1,g,f),contexts:[c],types:["ID"],data:f}),(t||0===t)&&f.buffer.push(t),f.buffer.push(' <div class="s-full-height"> '),t=d["with"].call(c,"model.control.meta.elements","as","formElements",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(3,h,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),(t||0===t)&&f.buffer.push(t),f.buffer.push(" </div> "),t=d["if"].call(c,"model.control.submitToolbar",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(17,s,f),contexts:[c],types:["ID"],data:f}),(t||0===t)&&f.buffer.push(t),u}),a.TEMPLATES["UMI/partials/form/submitToolbar"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(" "),b.buffer.push(i(d.view.call(a,"view.elementView",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i=this.escapeExpression,j=this;h=d.each.call(c,"view.elements",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(1,g,f),contexts:[c],types:["ID"],data:f}),f.buffer.push(h||0===h?h:"")}),a.TEMPLATES["UMI/partials/alert-box/close-all"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d._triageMustache.call(c,"view.content.content",{hash:{unescaped:"true"},hashTypes:{unescaped:"STRING"},hashContexts:{unescaped:c},contexts:[c],types:["ID"],data:f})))}),a.TEMPLATES["UMI/partials/alert-box"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(' <h5 class="subheader">'),c=d._triageMustache.call(a,"view.content.title",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</h5> "),e}function h(a,b){var c="";return b.buffer.push(" <span "),b.buffer.push(k(d.action.call(a,"close","view.content",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push(' class="close">&times;</span> '),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var i,j="",k=this.escapeExpression,l=this;return i=d["if"].call(c,"view.content.title",{hash:{},hashTypes:{},hashContexts:{},inverse:l.noop,fn:l.program(1,g,f),contexts:[c],types:["ID"],data:f}),(i||0===i)&&f.buffer.push(i),f.buffer.push(" "),f.buffer.push(k(d._triageMustache.call(c,"view.content.content",{hash:{unescaped:"true"},hashTypes:{unescaped:"STRING"},hashContexts:{unescaped:c},contexts:[c],types:["ID"],data:f}))),f.buffer.push(" "),i=d["if"].call(c,"view.content.close",{hash:{},hashTypes:{},hashContexts:{},inverse:l.noop,fn:l.program(3,h,f),contexts:[c],types:["ID"],data:f}),(i||0===i)&&f.buffer.push(i),j}),a.TEMPLATES["UMI/partials/popup/fileManager"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g=this.escapeExpression;f.buffer.push(g(d.view.call(c,"fileManager",{hash:{templateParams:"templateParams"},hashTypes:{templateParams:"ID"},hashContexts:{templateParams:c},contexts:[c],types:["STRING"],data:f})))}),a.TEMPLATES["UMI/partials/popup"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h="",i=this.escapeExpression;return f.buffer.push('<div class="umi-popup-header"> <span class="umi-popup-title">'),g=d._triageMustache.call(c,"view.title",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(g||0===g)&&f.buffer.push(g),f.buffer.push('</span> <a href="#" class="umi-popup-close-button" '),f.buffer.push(i(d.action.call(c,"closePopup",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push('> <i class="icon white icon-close"></i> </a> </div> <div class="umi-popup-content"> '),g=d._triageMustache.call(c,"yield",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(g||0===g)&&f.buffer.push(g),f.buffer.push(' </div> <div class="umi-popup-resizer"></div>'),h}),a.TEMPLATES["UMI/partials/popup/objectRelation"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h,i=d.helperMissing,j=this.escapeExpression;f.buffer.push(j((g=d.render||c&&c.render,h={hash:{},hashTypes:{},hashContexts:{},contexts:[c,c],types:["STRING","ID"],data:f},g?g.call(c,"objectRelationLayout","templateParams",h):i.call(c,"render","objectRelationLayout","templateParams",h))))}),a.TEMPLATES["UMI/partials/popup/singleCollectionObjectRelation"]=a.Handlebars.template(function(b,c,d,e,f){this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var g,h,i=d.helperMissing,j=this.escapeExpression;f.buffer.push(j((g=d.render||c&&c.render,h={hash:{},hashTypes:{},hashContexts:{},contexts:[c,c],types:["STRING","ID"],data:f},g?g.call(c,"singleCollectionObjectRelationLayout","templateParams",h):i.call(c,"render","singleCollectionObjectRelationLayout","templateParams",h))))}),a.TEMPLATES["UMI/partials/sideMenu"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e,f,g="";return b.buffer.push(" "),e=d["link-to"]||a&&a["link-to"],f={hash:{tagName:"li"},hashTypes:{tagName:"STRING"},hashContexts:{tagName:a},inverse:k.noop,fn:k.program(2,h,b),contexts:[a,a],types:["STRING","ID"],data:b},c=e?e.call(a,"context","object.id",f):l.call(a,"link-to","context","object.id",f),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),g}function h(a,b){var c,e="";return b.buffer.push('<a href="javascript:void(0)">'),c=d._triageMustache.call(a,"object.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</a>"),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var i,j="",k=this,l=d.helperMissing;return f.buffer.push('<ul class="side-nav"> '),i=d.each.call(c,"object","in","objects",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,g,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),(i||0===i)&&f.buffer.push(i),f.buffer.push(" </ul> "),j}),a.TEMPLATES["UMI/partials/table"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(' <p></p> <h3 class="text-center">'),c=d._triageMustache.call(a,"view.error",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</h3> "),e}function h(a,b){var c,e="";return b.buffer.push(" "),b.buffer.push(q(d.view.call(a,"view.paginationView",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(' <div class="umi-table-header-wrap"> <table class="umi-table-header"> <tbody> <tr class="umi-table-tr"> '),c=d.each.call(a,"view.headers",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(4,i,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' <td class="umi-table-empty-column"></td> </tr> </tbody> </table> </div> <div class="umi-table-header-shadow"></div> <div class="s-scroll-wrap"> <table class="umi-table-content"> <tbody> <tr class="umi-table-content-sizer"> '),c=d.each.call(a,"view.headers",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(6,j,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </tr> "),c=d.each.call(a,"row","in","view.visibleRows",{hash:{},hashTypes:{},hashContexts:{},inverse:o.program(11,m,b),fn:o.program(8,k,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </tbody> </table> </div> "),e}function i(a,b){var c,e="";return b.buffer.push(' <td class="umi-table-td" style="width: 200px;"> <div class="umi-table-td-relative-wrap"> <div class="umi-table-cell">'),c=d._triageMustache.call(a,"",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push('</div> <div class="umi-table-header-column-resizer"></div> </div> </td> '),e}function j(a,b){b.buffer.push(' <td class="umi-table-td" style="width: 200px;"></td> ')}function k(a,b){var c,e="";return b.buffer.push(' <tr class="umi-table-content-tr"> '),c=d.each.call(a,"property","in","row",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(9,l,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' <td class="umi-table-empty-column"></td> </tr> '),e}function l(a,b){var c,e="";return b.buffer.push(' <td class="umi-table-td"> <div class="umi-table-cell">'),c=d._triageMustache.call(a,"property",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</div> </td> "),e}function m(a,b){var c,e,f="";return b.buffer.push(' <tr class="umi-table-content-tr"> <td> '),b.buffer.push(q((c=d.i18n||a&&a.i18n,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a,a],types:["STRING","STRING"],data:b},c?c.call(a,"No data","table",e):p.call(a,"i18n","No data","table",e)))),b.buffer.push(" </td> </tr> "),f
}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var n,o=this,p=d.helperMissing,q=this.escapeExpression;n=d["if"].call(c,"view.error",{hash:{},hashTypes:{},hashContexts:{},inverse:o.program(3,h,f),fn:o.program(1,g,f),contexts:[c],types:["ID"],data:f}),f.buffer.push(n||0===n?n:"")}),a.TEMPLATES["UMI/partials/table/toolbar"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){b.buffer.push(' <i class="icon black icon-left-thin"></i> ')}function h(a,b){b.buffer.push(' <i class="icon black icon-right-thin"></i> ')}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var i,j,k,l="",m=this,n=d.helperMissing,o=this.escapeExpression;return f.buffer.push('<div class="right umi-table-control-pagination"> <div class="right pagination-controls"> <span class="pagination-counter"> '),i=d._triageMustache.call(c,"view.counter",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(i||0===i)&&f.buffer.push(i),f.buffer.push(" </span> "),i=d.view.call(c,"view.prevButtonView",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(1,g,f),contexts:[c],types:["ID"],data:f}),(i||0===i)&&f.buffer.push(i),f.buffer.push(" "),i=d.view.call(c,"view.nextButtonView",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(3,h,f),contexts:[c],types:["ID"],data:f}),(i||0===i)&&f.buffer.push(i),f.buffer.push(' </div> <div class="right pagination-limit"> <span class="pagination-label">'),f.buffer.push(o((j=d.i18n||c&&c.i18n,k={hash:{},hashTypes:{},hashContexts:{},contexts:[c,c],types:["STRING","STRING"],data:f},j?j.call(c,"Rows on page","table",k):n.call(c,"i18n","Rows on page","table",k)))),f.buffer.push(":</span> "),f.buffer.push(o(d.view.call(c,"view.limitView",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}))),f.buffer.push(" </div> </div> "),l}),a.TEMPLATES["UMI/partials/tableControl"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"view.parentView.paginationView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function h(a,b){var c,e,f,g="";return b.buffer.push(' <div class="right pagination-controls"> <span class="pagination-counter"> '),c=d._triageMustache.call(a,"view.counter",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </span> "),c=d.view.call(a,"view.prevButtonView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(3,i,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),c=d.view.call(a,"view.nextButtonView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(5,j,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' </div> <div class="right pagination-limit"> <span class="pagination-label">'),b.buffer.push(A((e=d.i18n||a&&a.i18n,f={hash:{},hashTypes:{},hashContexts:{},contexts:[a,a],types:["STRING","STRING"],data:b},e?e.call(a,"Rows on page","tableControl",f):z.call(a,"i18n","Rows on page","tableControl",f)))),b.buffer.push(":</span> "),b.buffer.push(A(d.view.call(a,"view.limitView",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" </div> "),g}function i(a,b){b.buffer.push(' <i class="icon black icon-left-thin"></i> ')}function j(a,b){b.buffer.push(' <i class="icon black icon-right-thin"></i> ')}function k(a,b){var c,e,f,g="";return b.buffer.push(' <td class="umi-table-control-header-column column-id-'),b.buffer.push(A((e=d.filterClassName||a&&a.filterClassName,f={hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b},e?e.call(a,"column.attributes.name",f):z.call(a,"filterClassName","column.attributes.name",f)))),b.buffer.push('" style="width: 200px"> <div class="umi-table-control-cell-firefox-fix"> <div class="umi-table-control-header-cell"> '),c=d._triageMustache.call(a,"column.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' </div> <div class="umi-table-control-column-resizer"></div> </div> </td> '),g}function l(a,b){var c,e,f,g="";return b.buffer.push(' <td class="umi-table-control-header-column"> <div class="umi-table-control-header-cell filter column-id-'),b.buffer.push(A((e=d.filterClassName||a&&a.filterClassName,f={hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b},e?e.call(a,"column.attributes.name",f):z.call(a,"filterClassName","column.attributes.name",f)))),b.buffer.push('"> '),b.buffer.push(A(d.view.call(a,"view.filterRowView",{hash:{column:"column"},hashTypes:{column:"ID"},hashContexts:{column:a},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" "),c=d.view.call(a,"view.sortHandlerView",{hash:{propertyName:"column.attributes.name"},hashTypes:{propertyName:"ID"},hashContexts:{propertyName:a},inverse:y.noop,fn:y.program(10,m,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> </td> "),g}function m(a,b){var c="";return b.buffer.push(" <i "),b.buffer.push(A(d["bind-attr"].call(a,{hash:{"class":":icon :black view.sortAscending:icon-bottom-thin:icon-top-thin"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> "),c}function n(a,b){var c,e,f="";return b.buffer.push(' <td class="umi-table-control-content-cell column-id-'),b.buffer.push(A((c=d.filterClassName||a&&a.filterClassName,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b},c?c.call(a,"column.attributes.name",e):z.call(a,"filterClassName","column.attributes.name",e)))),b.buffer.push('" style="width: 200px"></td> '),f}function o(a,b){var c,e="";return b.buffer.push(" "),c=d.each.call(a,"object","in","objects",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(15,p,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function p(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"view.rowView",{hash:{object:"object"},hashTypes:{object:"ID"},hashContexts:{object:a},inverse:y.noop,fn:y.program(16,q,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function q(a,b){var c,e="";return b.buffer.push(" "),c=d.each.call(a,"column","in","fieldsList",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(17,r,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' <td class="umi-table-control-empty-column"></td> '),e}function r(a,b){var c="";return b.buffer.push(' <td class="umi-table-control-content-cell"> '),b.buffer.push(A(d.view.call(a,"tableCellContent",{hash:{objectBinding:"object",column:"column"},hashTypes:{objectBinding:"STRING",column:"ID"},hashContexts:{objectBinding:a,column:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" </td> "),c}function s(a,b){var c,e="";return b.buffer.push(" <div "),b.buffer.push(A(d["bind-attr"].call(a,{hash:{"class":":umi-table-control-column-fixed-cell object.active::umi-inactive isSelected:selected"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push(' data-objectId="'),b.buffer.push(A(d.unbound.call(a,"object.id",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push('"> '),c=d["if"].call(a,"controller.parentController.contextToolbar",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(20,t,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> "),e}function t(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"tableControlContextToolbar",{hash:{elements:"controller.parentController.contextToolbar"},hashTypes:{elements:"ID"},hashContexts:{elements:a},inverse:y.noop,fn:y.program(21,u,b),contexts:[a],types:["STRING"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function u(a,b){var c,e="";return b.buffer.push(" "),c=d.each.call(a,"view.elements",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(22,v,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function v(a,b){var c="";return b.buffer.push(" "),b.buffer.push(A(d.view.call(a,"view.elementView",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var w,x="",y=this,z=d.helperMissing,A=this.escapeExpression;return w=d.view.call(c,"toolbar",{hash:{toolbar:"toolbar"},hashTypes:{toolbar:"ID"},hashContexts:{toolbar:c},inverse:y.noop,fn:y.program(1,g,f),contexts:[c],types:["STRING"],data:f}),(w||0===w)&&f.buffer.push(w),f.buffer.push(' <div class="umi-table-control-header s-unselectable"> <div class="umi-table-control-header-center"> <table class="umi-table-control-header"> <tbody> <tr class="umi-table-control-row"> '),w=d.each.call(c,"column","in","fieldsList",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(7,k,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),(w||0===w)&&f.buffer.push(w),f.buffer.push(' <td class="umi-table-control-empty-column"></td> </tr> <tr class="umi-table-control-row filters"> '),w=d.each.call(c,"column","in","fieldsList",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(9,l,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),(w||0===w)&&f.buffer.push(w),f.buffer.push(' <td class="umi-table-control-empty-column"></td> </tr> </tbody> </table> </div> <div class="umi-table-control-header-fixed-right"> <div class="umi-table-control-header-title"> <div class="umi-table-control-header-fixed-right-first"> </div> <div class="umi-table-control-header-fixed-right-second"> </div> </div> <div class="umi-table-control-header-filter"> </div> </div> </div> <div class="umi-table-control-content-wrapper"> <div class="s-scroll-wrap"> <table class="umi-table-control-content"> <tbody> <tr class="umi-table-control-content-row-size"> '),w=d.each.call(c,"column","in","fieldsList",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(12,n,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),(w||0===w)&&f.buffer.push(w),f.buffer.push(' <td class="umi-table-control-empty-column"></td> </tr> '),w=d["if"].call(c,"objects.content.isFulfilled",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(14,o,f),contexts:[c],types:["ID"],data:f}),(w||0===w)&&f.buffer.push(w),f.buffer.push(' </tbody> </table> </div> <!-- Колонка справа от контента --> <div class="umi-table-control-content-fixed-right"> '),w=d.each.call(c,"object","in","objects",{hash:{itemController:"tableControlContextToolbarItem"},hashTypes:{itemController:"STRING"},hashContexts:{itemController:c},inverse:y.noop,fn:y.program(19,s,f),contexts:[c,c,c],types:["ID","ID","ID"],data:f}),(w||0===w)&&f.buffer.push(w),f.buffer.push(" </div> </div>"),x}),a.TEMPLATES["UMI/partials/button"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(" <i "),b.buffer.push(k(d["bind-attr"].call(a,{hash:{"class":":icon view.iconClass"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> "),c}function h(a,b){var c,e="";return b.buffer.push(' <b class="umi-button-label">'),c=d._triageMustache.call(a,"view.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</b> "),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var i,j="",k=this.escapeExpression,l=this;return i=d["if"].call(c,"view.meta.attributes.hasIcon",{hash:{},hashTypes:{},hashContexts:{},inverse:l.noop,fn:l.program(1,g,f),contexts:[c],types:["ID"],data:f}),(i||0===i)&&f.buffer.push(i),f.buffer.push(" "),i=d["if"].call(c,"view.label",{hash:{},hashTypes:{},hashContexts:{},inverse:l.noop,fn:l.program(3,h,f),contexts:[c],types:["ID"],data:f}),(i||0===i)&&f.buffer.push(i),j}),a.TEMPLATES["UMI/partials/dropdownButton/backupList"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(' <b class="umi-button-label"> '),b.buffer.push(p(d.unbound.call(a,"view.meta.attributes.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" </b> "),c}function h(a,b){var c,e="";return b.buffer.push(" <div "),b.buffer.push(p(d["bind-attr"].call(a,{hash:{"class":":row :collapse isActive::s-pointer"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push(" "),b.buffer.push(p(d.action.call(a,"applyBackup","",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push('> <div class="columns small-7 place-button"> '),c=d["if"].call(a,"isActive",{hash:{},hashTypes:{},hashContexts:{},inverse:r.program(6,j,b),fn:r.program(4,i,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),c=d._triageMustache.call(a,"created.date",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(' </div> <div class="columns small-5"> '),c=d["if"].call(a,"user",{hash:{},hashTypes:{},hashContexts:{},inverse:r.program(10,l,b),fn:r.program(8,k,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> </div> "),e}function i(a,b){b.buffer.push(' <button class="button flat tiny square"> <i class="icon icon-accept"></i> </button> ')}function j(a,b){b.buffer.push(' <button class="button flat tiny square"> <i class="icon icon-renew"></i> </button> ')}function k(a,b){var c,e="";return b.buffer.push(" "),c=d._triageMustache.call(a,"user",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function l(a,b){var c,e,f="";return b.buffer.push(" "),b.buffer.push(p((c=d.i18n||a&&a.i18n,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a,a],types:["STRING","STRING"],data:b},c?c.call(a,"User name","toolbar:dropdownButton",e):q.call(a,"i18n","User name","toolbar:dropdownButton",e)))),b.buffer.push(" "),f}function m(a,b){var c,e="";return b.buffer.push(' <div class="row collapse"> <div class="columns small-12"> '),c=d._triageMustache.call(a,"view.noBackupsLabel",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </div> </div> "),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var n,o="",p=this.escapeExpression,q=d.helperMissing,r=this;return f.buffer.push('<a href="javascript:void(0)" class="button white dropdown" '),f.buffer.push(p(d.action.call(c,"open",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push('> <i class="icon icon-backupList"></i> '),n=d["if"].call(c,"view.meta.attributes.label",{hash:{},hashTypes:{},hashContexts:{},inverse:r.noop,fn:r.program(1,g,f),contexts:[c],types:["ID"],data:f}),(n||0===n)&&f.buffer.push(n),f.buffer.push(' </a> <div class="f-dropdown umi-dropdown dropdown-rows right"> <div class="row collapse"> <div class="columns small-12"> <strong>'),n=d._triageMustache.call(c,"view.button.displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(n||0===n)&&f.buffer.push(n),f.buffer.push('</strong> </div> </div> <div class="s-scroll-wrap"> <div> '),n=d.each.call(c,"view.backupList",{hash:{},hashTypes:{},hashContexts:{},inverse:r.program(12,m,f),fn:r.program(3,h,f),contexts:[c],types:["ID"],data:f}),(n||0===n)&&f.buffer.push(n),f.buffer.push(" </div> </div> </div>"),o}),a.TEMPLATES["UMI/partials/dropdownButton"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(' <i class="'),b.buffer.push(l(d.unbound.call(a,"view.meta.attributes.icon.class",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push('"></i> '),c}function h(a,b){var c="";return b.buffer.push(' <b class="umi-button-label"> '),b.buffer.push(l(d.unbound.call(a,"view.meta.attributes.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" </b> "),c}function i(a,b){var c,e="";return b.buffer.push(" <span "),b.buffer.push(l(d.action.call(a,"sendActionForBehaviour","behaviour",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push("> "),c=d._triageMustache.call(a,"attributes.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </span> "),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var j,k="",l=this.escapeExpression,m=this;return j=d["if"].call(c,"view.meta.attributes.icon",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(1,g,f),contexts:[c],types:["ID"],data:f}),(j||0===j)&&f.buffer.push(j),f.buffer.push(" "),j=d["if"].call(c,"view.meta.attributes.label",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(3,h,f),contexts:[c],types:["ID"],data:f}),(j||0===j)&&f.buffer.push(j),f.buffer.push(' <ul class="f-dropdown"> '),j=d.each.call(c,"view.meta.choices",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(5,i,f),contexts:[c],types:["ID"],data:f}),(j||0===j)&&f.buffer.push(j),f.buffer.push(" </ul> "),k}),a.TEMPLATES["UMI/partials/splitButton"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(" <i "),b.buffer.push(n(d["bind-attr"].call(a,{hash:{"class":":icon view.defaultBehaviourIcon"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> "),c}function h(a,b){var c,e="";return b.buffer.push(' <b class="umi-button-label">'),c=d._triageMustache.call(a,"view.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</b> "),e}function i(a,b){var c,e="";return b.buffer.push(' <ul class="f-dropdown composite"> '),c=d.each.call(a,"view.meta.behaviour.choices",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(6,j,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </ul> "),e}function j(a,b){var c,e="";return b.buffer.push(" "),c=d.view.call(a,"view.itemView",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(7,k,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function k(a,b){var c,e="";return b.buffer.push(" <a "),b.buffer.push(n(d.action.call(a,"sendActionForBehaviour","behaviour",{hash:{target:"view.parentView",on:"mouseUp"},hashTypes:{target:"STRING",on:"STRING"},hashContexts:{target:a,on:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push(' class="umi-dropdown-item-link"> <i '),b.buffer.push(n(d["bind-attr"].call(a,{hash:{"class":":icon view.icon"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> <div>"),c=d._triageMustache.call(a,"view.label",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</div> </a> <i "),b.buffer.push(n(d["bind-attr"].call(a,{hash:{"class":":icon :icon-accept :split-default-button view.isDefaultBehaviour::white"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push(" "),b.buffer.push(n(d.action.call(a,"toggleDefaultBehaviour","view._parentView.contentIndex",{hash:{target:"view.parentView",on:"mouseUp"},hashTypes:{target:"STRING",on:"STRING"},hashContexts:{target:a,on:a},contexts:[a,a],types:["STRING","ID"],data:b}))),b.buffer.push("></i> "),e}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var l,m="",n=this.escapeExpression,o=this;return l=d["if"].call(c,"view.meta.attributes.hasIcon",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(1,g,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),f.buffer.push(" "),l=d["if"].call(c,"view.label",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(3,h,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),f.buffer.push(' <span class="dropdown-toggler" '),f.buffer.push(n(d.action.call(c,"open",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push("></span> "),l=d["if"].call(c,"view.isOpen",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(5,i,f),contexts:[c],types:["ID"],data:f}),(l||0===l)&&f.buffer.push(l),f.buffer.push(" "),m}),a.TEMPLATES["UMI/partials/toolbar"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(" "),b.buffer.push(j(d.view.call(a,"view.elementView",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i="",j=this.escapeExpression,k=this;return f.buffer.push('<ul class="button-group left"> '),h=d.each.call(c,"view.toolbar",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,g,f),contexts:[c],types:["ID"],data:f}),(h||0===h)&&f.buffer.push(h),f.buffer.push(' </ul> <div class="right"> '),h=d._triageMustache.call(c,"yield",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(h||0===h)&&f.buffer.push(h),f.buffer.push(" </div>"),i}),a.TEMPLATES["UMI/partials/topBar"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e,f="";return b.buffer.push(' <span class="umi-top-bar-label umi-top-bar-loader"> '),b.buffer.push(k((c=d.i18n||a&&a.i18n,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b},c?c.call(a,"Loading",e):j.call(a,"i18n","Loading",e)))),b.buffer.push('... </span> <div class="umi-overlay"></div> '),f}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i="",j=d.helperMissing,k=this.escapeExpression,l=this;return f.buffer.push('<nav class="umi-top-bar"> <ul class="umi-top-bar-list left"> <li> '),f.buffer.push(k(d.view.call(c,"view.moduleDropdownView",{hash:{tagName:"span","class":"button tiny flat dropdown without-arrow umi-top-bar-button"},hashTypes:{tagName:"STRING","class":"STRING"},hashContexts:{tagName:c,"class":c},contexts:[c],types:["ID"],data:f}))),f.buffer.push(' </li> <li> <span class="umi-top-bar-label">'),h=d._triageMustache.call(c,"view.activeProject",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(h||0===h)&&f.buffer.push(h),f.buffer.push('</span> </li> <li> <a href="'),f.buffer.push(k(d.unbound.call(c,"view.siteUrl",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}))),f.buffer.push('" class="button tiny flat umi-top-bar-button"> <i class="icon white icon-viewOnSite"></i> </a> </li> </ul> '),h=d["if"].call(c,"routeIsTransition",{hash:{},hashTypes:{},hashContexts:{},inverse:l.noop,fn:l.program(1,g,f),contexts:[c],types:["ID"],data:f}),(h||0===h)&&f.buffer.push(h),f.buffer.push(' <ul class="umi-top-bar-list right"> <li> '),f.buffer.push(k(d.view.call(c,"view.dropdownView",{hash:{tagName:"span","class":"button tiny flat dropdown umi-top-bar-button"},hashTypes:{tagName:"STRING","class":"STRING"},hashContexts:{tagName:c,"class":c},contexts:[c],types:["ID"],data:f}))),f.buffer.push(" </li> "),f.buffer.push(k(d.view.call(c,"notificationList",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["STRING"],data:f}))),f.buffer.push(" </ul> </nav>"),i}),a.TEMPLATES["UMI/partials/treeControl"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){b.buffer.push(' <div class="umi-tree-loader"><i class="animate animate-loader-60"></i></div> ')}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i="",j=this.escapeExpression,k=this;return f.buffer.push('<div class="columns small-12"> <div class="row s-full-height umi-tree-wrapper"> <ul class="umi-tree-list umi-tree"> '),f.buffer.push(j(d.view.call(c,"treeControlItem",{hash:{item:"root",treeControlView:"view"},hashTypes:{item:"ID",treeControlView:"ID"},hashContexts:{item:c,treeControlView:c},contexts:[c],types:["STRING"],data:f}))),f.buffer.push(" </ul> "),h=d["if"].call(c,"isLoading",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,g,f),contexts:[c],types:["ID"],data:f}),(h||0===h)&&f.buffer.push(h),f.buffer.push(" </div> </div>"),i}),a.TEMPLATES["UMI/partials/treeControl/treeItem"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(" <span "),b.buffer.push(v(d.action.call(a,"expanded",{hash:{on:"mouseDown",target:"view"},hashTypes:{on:"STRING",target:"STRING"},hashContexts:{on:a,target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),b.buffer.push(v(d["bind-attr"].call(a,{hash:{"class":":umi-expand"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("> "),c=d["if"].call(a,"view.isExpanded",{hash:{},hashTypes:{},hashContexts:{},inverse:w.program(3,i,b),fn:w.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </span> "),e}function h(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"view.childrenList",{hash:{},hashTypes:{},hashContexts:{},inverse:w.program(5,j,b),fn:w.program(3,i,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function i(a,b){var c="";return b.buffer.push(" <i "),b.buffer.push(v(d["bind-attr"].call(a,{hash:{"class":":icon view.isExpanded:icon-bottom:icon-right"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> "),c}function j(a,b){b.buffer.push(' <i class="animate animate-loader-20"></i> ')}function k(a,b){var c,e,f,g="";return b.buffer.push(" "),e=d["link-to"]||a&&a["link-to"],f={hash:{"class":"tree-item-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},inverse:w.noop,fn:w.program(8,l,b),contexts:[a,a,a],types:["STRING","ID","STRING"],data:b},c=e?e.call(a,"action","view.item.id","editForm",f):x.call(a,"link-to","action","view.item.id","editForm",f),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),g}function l(a,b){var c,e="";return b.buffer.push(" "),c=d._triageMustache.call(a,"view.savedDisplayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function m(a,b){var c,e,f,g="";return b.buffer.push(" "),e=d["link-to"]||a&&a["link-to"],f={hash:{"class":"tree-item-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},inverse:w.noop,fn:w.program(8,l,b),contexts:[a,a],types:["STRING","ID"],data:b},c=e?e.call(a,"context","view.item.id",f):x.call(a,"link-to","context","view.item.id",f),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),g}function n(a,b){var c,e,f,g="";return b.buffer.push(" "),e=d.render||a&&a.render,f={hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(13,o,b),contexts:[a,a],types:["STRING","ID"],data:b},c=e?e.call(a,"treeControlContextToolbar","view.item",f):x.call(a,"render","treeControlContextToolbar","view.item",f),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),g}function o(a,b){var c,e="";return b.buffer.push(" "),c=d.each.call(a,"parentController.contextToolbar",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(14,p,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function p(a,b){var c="";return b.buffer.push(" "),b.buffer.push(v(d.view.call(a,"view.elementView",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push(" "),c}function q(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"view.isExpanded",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(17,r,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function r(a,b){var c,e="";return b.buffer.push(' <ul class="umi-tree-list" data-parent-id="'),b.buffer.push(v(d.unbound.call(a,"view.item.id",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}))),b.buffer.push('"> '),c=d.each.call(a,"item","in","view.childrenList",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(18,s,b),contexts:[a,a,a],types:["ID","ID","ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </ul> "),e}function s(a,b){var c="";return b.buffer.push(" "),b.buffer.push(v(d.view.call(a,"treeControlItem",{hash:{item:"item",treeControlView:"view.treeControlView"},hashTypes:{item:"ID",treeControlView:"ID"},hashContexts:{item:a,treeControlView:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var t,u="",v=this.escapeExpression,w=this,x=d.helperMissing;return f.buffer.push("<div "),f.buffer.push(v(d["bind-attr"].call(c,{hash:{"class":":umi-item view.item.type view.isActiveContext:active view.inActive"},hashTypes:{"class":"STRING"},hashContexts:{"class":c},contexts:[],types:[],data:f}))),f.buffer.push("> "),t=d["if"].call(c,"view.hasChildren",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(1,g,f),contexts:[c],types:["ID"],data:f}),(t||0===t)&&f.buffer.push(t),f.buffer.push(" <i "),f.buffer.push(v(d["bind-attr"].call(c,{hash:{"class":":icon :umi-tree-type-icon view.iconTypeClass view.allowMove:move"},hashTypes:{"class":"STRING"},hashContexts:{"class":c},contexts:[],types:[],data:f}))),f.buffer.push("></i> "),t=d["if"].call(c,"editLink",{hash:{},hashTypes:{},hashContexts:{},inverse:w.program(10,m,f),fn:w.program(7,k,f),contexts:[c],types:["ID"],data:f}),(t||0===t)&&f.buffer.push(t),f.buffer.push(" "),t=d["if"].call(c,"controller.contextToolbar",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(12,n,f),contexts:[c],types:["ID"],data:f}),(t||0===t)&&f.buffer.push(t),f.buffer.push(" </div> "),t=d["if"].call(c,"view.hasChildren",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(16,q,f),contexts:[c],types:["ID"],data:f}),(t||0===t)&&f.buffer.push(t),u}),a.TEMPLATES["UMI/partials/treeSimple/item"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e="";return b.buffer.push(" "),c=d["if"].call(a,"components",{hash:{},hashTypes:{},hashContexts:{},inverse:s.program(4,i,b),fn:s.program(2,h,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),c=d["if"].call(a,"resource",{hash:{},hashTypes:{},hashContexts:{},inverse:s.program(7,k,b),fn:s.program(6,j,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function h(a,b){var c="";return b.buffer.push(" <span "),b.buffer.push(r(d.action.call(a,"expanded",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),b.buffer.push(r(d["bind-attr"].call(a,{hash:{"class":":umi-expand"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("> <i "),b.buffer.push(r(d["bind-attr"].call(a,{hash:{"class":":icon view.isExpanded:icon-bottom:icon-right"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> </span> <i "),b.buffer.push(r(d["bind-attr"].call(a,{hash:{"class":":icon :umi-tree-type-icon :icon-document"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> "),c}function i(a,b){var c="";return b.buffer.push(" <i "),b.buffer.push(r(d["bind-attr"].call(a,{hash:{"class":":icon :umi-tree-type-icon :icon-document"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},contexts:[],types:[],data:b}))),b.buffer.push("></i> "),c}function j(a,b){var c,e,f,g="";return b.buffer.push(" "),e=d["link-to"]||a&&a["link-to"],f={hash:{"class":"tree-item-link"},hashTypes:{"class":"STRING"},hashContexts:{"class":a},inverse:s.noop,fn:s.program(7,k,b),contexts:[a,a],types:["STRING","ID"],data:b},c=e?e.call(a,"settings.component","view.nestedSlug",f):t.call(a,"link-to","settings.component","view.nestedSlug",f),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),g
}function k(a,b){var c,e="";return b.buffer.push(" "),c=d._triageMustache.call(a,"displayName",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" "),e}function l(a,b){var c,e="";return b.buffer.push(' <ul class="umi-tree-list"> '),c=d.each.call(a,"components",{hash:{},hashTypes:{},hashContexts:{},inverse:s.noop,fn:s.program(10,m,b),contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push(" </ul> "),e}function m(a,b){var c="";return b.buffer.push(" "),b.buffer.push(r(d.view.call(a,"treeSimpleItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var n,o,p,q="",r=this.escapeExpression,s=this,t=d.helperMissing;return o=d["link-to"]||c&&c["link-to"],p={hash:{tagName:"div","class":"umi-item",disabled:!0,bubbles:!1},hashTypes:{tagName:"STRING","class":"STRING",disabled:"BOOLEAN",bubbles:"BOOLEAN"},hashContexts:{tagName:c,"class":c,disabled:c,bubbles:c},inverse:s.noop,fn:s.program(1,g,f),contexts:[c,c],types:["STRING","ID"],data:f},n=o?o.call(c,"settings.component","view.nestedSlug",p):t.call(c,"link-to","settings.component","view.nestedSlug",p),(n||0===n)&&f.buffer.push(n),f.buffer.push(" "),n=d["if"].call(c,"view.isExpanded",{hash:{},hashTypes:{},hashContexts:{},inverse:s.noop,fn:s.program(9,l,f),contexts:[c],types:["ID"],data:f}),(n||0===n)&&f.buffer.push(n),f.buffer.push(" "),q}),a.TEMPLATES["UMI/partials/treeSimple/list"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c="";return b.buffer.push(" "),b.buffer.push(j(d.view.call(a,"treeSimpleItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(" "),c}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var h,i="",j=this.escapeExpression,k=this;return f.buffer.push('<div class="columns small-12"> <div class="row s-full-height umi-tree-wrapper"> <ul class="umi-tree-list umi-tree"> '),h=d.each.call(c,"view.collection",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,g,f),contexts:[c],types:["ID"],data:f}),(h||0===h)&&f.buffer.push(h),f.buffer.push(" </ul> </div> </div>"),i}),a.TEMPLATES["UMI/partials/updateLayout"]=a.Handlebars.template(function(b,c,d,e,f){function g(a,b){var c,e,f,g="";return b.buffer.push(" <h5>"),b.buffer.push(n((e=d.i18n||a&&a.i18n,f={hash:{},hashTypes:{},hashContexts:{},contexts:[a,a],types:["STRING","STRING"],data:b},e?e.call(a,"Latest version","updateLayout",f):m.call(a,"i18n","Latest version","updateLayout",f)))),b.buffer.push(" "),c=d._triageMustache.call(a,"view.data.control.params.latestVersion.version",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push('</h5> <br /> <span class="button large" '),b.buffer.push(n(d.action.call(a,"update",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">"),c=d._triageMustache.call(a,"view.buttonLabel",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(c||0===c)&&b.buffer.push(c),b.buffer.push("</span> "),g}function h(a,b){var c,e,f="";return b.buffer.push(' <br /> <span class="button large disabled">'),b.buffer.push(n((c=d.i18n||a&&a.i18n,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a,a],types:["STRING","STRING"],data:b},c?c.call(a,"Nothing update","updateLayout",e):m.call(a,"i18n","Nothing update","updateLayout",e)))),b.buffer.push("</span> "),f}this.compilerInfo=[4,">= 1.0.0"],d=this.merge(d,a.Handlebars.helpers),f=f||{};var i,j,k,l="",m=d.helperMissing,n=this.escapeExpression,o=this;return f.buffer.push('<div class="columns small-12"> <div class="umi-update-layout"> <span class="icon icon-butterfly umi-update-layout-logo"></span> <span class="umi-update-layout-content"> <h2>UMI.CMS Lite</h2> <h5>'),f.buffer.push(n((j=d.i18n||c&&c.i18n,k={hash:{},hashTypes:{},hashContexts:{},contexts:[c,c],types:["STRING","STRING"],data:f},j?j.call(c,"Current version","updateLayout",k):m.call(c,"i18n","Current version","updateLayout",k)))),f.buffer.push(" "),i=d._triageMustache.call(c,"view.data.control.params.currentVersion.version",{hash:{},hashTypes:{},hashContexts:{},contexts:[c],types:["ID"],data:f}),(i||0===i)&&f.buffer.push(i),f.buffer.push("</h5> "),i=d["if"].call(c,"view.data.control.params.latestVersion",{hash:{},hashTypes:{},hashContexts:{},inverse:o.program(3,h,f),fn:o.program(1,g,f),contexts:[c],types:["ID"],data:f}),(i||0===i)&&f.buffer.push(i),f.buffer.push(" </span> </div> </div>"),l})}),define("application/templates.extends",[],function(){return function(){Ember.TEMPLATES["UMI/module/errors"]=Ember.TEMPLATES["UMI/component/errors"]=Ember.TEMPLATES["UMI/errors"],Ember.TEMPLATES["UMI/createForm"]=Ember.TEMPLATES["UMI/editForm"]}}),define("application/models",[],function(){return function(UMI){var propertyFilters={stringTrim:function(a){return a&&(a=a.replace(/^\s+|\s+$/g,"")),a},htmlSafe:function(a){return Ember.String.htmlSafe(a)},stripTags:function(a){return a},slug:function(a){return a}};DS.Model.reopen({needReloadHasMany:Ember.K,validErrors:null,filterProperty:function(a){var b=this.get("store").metadataFor(this.constructor.typeKey)||"",c=Ember.get(b,"filters."+a);if(c){for(var d=this.get(a),e=0;e<c.length;e++)Ember.assert('Фильтр "'+c[e].type+'" не определен.',propertyFilters.hasOwnProperty(c[e].type)),d=propertyFilters[c[e].type](d);this.set(a,d)}},validatorsForProperty:function(a){Ember.assert("propertyName is required for method validatorsForProperty.",a);var b=this.get("store").metadataFor(this.constructor.typeKey)||"";return Ember.get(b,"validators."+a)},validateProperty:function(propertyName){var meta=this.get("store").metadataFor(this.constructor.typeKey)||"",validators=Ember.get(meta,"validators."+propertyName);if(validators)for(var value=this.get(propertyName),errors=[],activeErrors,i=0;i<validators.length;i++){switch(validators[i].type){case"required":value||errors.push(validators[i].message);break;case"regexp":var pattern=eval(validators[i].options.pattern);pattern.test(value)||errors.push(validators[i].message)}if(errors.length)errors=errors.join(" "),activeErrors=this.get("validErrors"),activeErrors?this.set("validErrors."+propertyName,errors):(activeErrors={},activeErrors[propertyName]=errors,this.set("validErrors",activeErrors)),this.get("isValid")&&this.send("becameInvalid");else if(!this.get("isValid")){activeErrors=this.get("validErrors"),activeErrors&&activeErrors.hasOwnProperty(propertyName)&&delete activeErrors[propertyName],i=0;for(var error in activeErrors)activeErrors.hasOwnProperty(error)&&++i;activeErrors=i?activeErrors:null,this.set("validErrors",activeErrors),this.send("becameValid")}}},validateObject:function(a){var b,c,d=this.get("store").metadataFor(this.constructor.typeKey)||"",e=Ember.get(d,"filters"),f=Ember.get(d,"validators");if("array"!==Ember.typeOf(a)&&(a=[]),c=a.length,"object"===Ember.typeOf(e))for(b in e)e.hasOwnProperty(b)&&this.filterProperty(b);if("object"===Ember.typeOf(f))for(b in f)if(f.hasOwnProperty(b)&&(c&&a.contains(b)||!c)&&(this.validateProperty(b),!this.get("isValid")))break},setInvalidProperties:function(a){var b,c,d,e,f=this;if("array"===Ember.typeOf(a))for(b=0;b<a.length;b++)c=a[b].errors,"array"===Ember.typeOf(c)&&(c=c.join(" ")),d=a[b].propertyName||"",d=d.replace(/#.*/g,""),e=f.get("validErrors"),e?f.set("validErrors."+d,c):(e={},e[d]=c,f.set("validErrors",e))},clearValidateForProperty:function(a){var b=this.get("validErrors");Ember.get(b,a)&&delete b[a];var c=0;for(var d in b)b.hasOwnProperty(d)&&++c;b=c?b:null,this.set("validErrors",b),c||this.get("isValid")||this.send("becameValid")},loadedRelationshipsByName:{},changedRelationshipsByName:{},changeRelationshipsValue:function(a,b){var c=this.get("loadedRelationshipsByName"),d=this.get("changedRelationshipsByName");Ember.set(d,a,b);var e=!1,f=this;for(var g in d)g in c?"Array"===Object.prototype.toString.call(c[g]).slice(8,-1)&&"Array"===Object.prototype.toString.call(d[g]).slice(8,-1)?c[g].length!==d[g].length?e=!0:(e=d[g].every(function(a){return c[g].contains(a)?!0:void 0}),e=!e):c[g]!==d[g]&&(e=!0):e=!0;if(e)f.send("becomeDirty");else{var h=f.changedAttributes();JSON.stringify(h)===JSON.stringify({})&&f.send("rolledBack")}},relationPropertyIsDirty:function(a){var b=this.get("loadedRelationshipsByName"),c=this.get("changedRelationshipsByName"),d=!1;return c.hasOwnProperty(a)&&(Ember.assert("Не добавлена загруженная связь. После загрузки связей hasMany и ManyToMany необходимо добавлять их результат к loadedRelationshipsByName",b.hasOwnProperty(a)),"Array"===Object.prototype.toString.call(b[a]).slice(8,-1)&&"Array"===Object.prototype.toString.call(c[a]).slice(8,-1)?b[a].length!==c[a].length?d=!0:(d=c[a].every(function(c){return b[a].contains(c)?!0:void 0}),d=!d):b[a]!==c[a]&&(d=!0)),d},updateRelationhipsMap:function(){var a=this.get("loadedRelationshipsByName"),b=this.get("changedRelationshipsByName");for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);this.set("changedRelationshipsByName",{})}});var extendedTypes={mpath:function(a){return DS.attr("raw",a)},date:function(a){return DS.attr("CustomDate",a)},dateTime:function(a){return DS.attr("CustomDateTime",a)},serialized:function(a){return DS.attr("serialized",a)},cmsPageRelation:function(a){return DS.attr("objectRelation",a)},objectRelation:function(a){return DS.attr("objectRelation",a)},belongsToRelation:function(a,b,c){return a.async=!0,b.targetCollection===c.name&&(a.inverse="children"),a.readOnly=!1,DS.belongsTo(b.targetCollection,a)},hasManyRelation:function(a,b){return a.async=!0,a.inverse=b.targetField,a.readOnly=!1,DS.hasMany(b.targetCollection,a)},manyToManyRelation:function(a,b){return a.async=!0,DS.hasMany(b.targetCollection,a)}},getBaseTypes=function(a){var b=a;switch(a){case"integer":b="number"}return b},getExtendedTypes=function(a){return Ember.get(extendedTypes,a)};UMI.modelsFactory=function(a){for(var b,c,d,e,f,g,h,i,j,k=0;k<a.length;k++){b=a[k],c=b.name,d={},g={},h={};for(var l=0;l<b.fields.length;l++)e=b.fields[l],i={},j=null,e.displayName&&(i.displayName=e.displayName),"undefined"!==Ember.typeOf(e["default"])&&(i.defaultValue=e["default"]),j=getExtendedTypes(e.type),f="function"===Ember.typeOf(j)?j(i,e,b):DS.attr(getBaseTypes(e.dataType),i),e.filters&&(g[e.name]=e.filters),e.validators&&(h[e.name]=e.validators),"identify"!==e.type&&(d[e.name]=f);d.meta=DS.attr("raw"),UMI[c.capitalize()]=DS.Model.extend(d),UMI.__container__.lookup("store:main").metaForType(c,{collectionType:b.type,filters:g,validators:h}),b.source&&(UMI[c.capitalize()+"Adapter"]=DS.UmiRESTAdapter.extend({namespace:b.source.replace(/^\//g,"")}))}}}}),define("text",{load:function(a){throw new Error("Dynamic load not allowed: "+a)}}),define("text!auth/templates/auth.hbs",[],function(){return'<div class="auth-layout">\r\n    <div class="bubbles"></div>\r\n    <div class="bubbles-front"></div>\r\n    <div class="row vertical-center">\r\n        <div class="small-centered columns auth-layout-content">\r\n            <p class="text-center">\r\n                <img src="{{assetsUrl}}/images/auth-logo.png"/>\r\n            </p>\r\n\r\n            <div>\r\n                {{{outlet}}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="auth-mask"></div>'}),define("text!auth/templates/index.hbs",[],function(){return'<div class="panel pretty radius shake-it">\r\n    <form name="auth" novalidate="novalidate" class="custom large umi-validator" method="post" action="{{form.attributes.action}}">\r\n        <div class="errors-list">\r\n            {{#if accessError}}\r\n                <div class="alert-box alert visible">\r\n                    <a href="#" class="close">×</a>\r\n                    {{accessError}}\r\n                </div>\r\n            {{/if}}\r\n        </div>\r\n        {{#each form.elements}}\r\n            <div class="row">\r\n                <div class="small-12 columns">\r\n                    {{#ifCond type \'select\'}}\r\n                        <select name="{{attributes.name}}" placeholder="{{label}}" class="select-language">\r\n                            {{#each choices}}\r\n                                <option value="{{attributes.value}}">{{label}}</option>\r\n                            {{/each}}\r\n                        </select>\r\n                    {{else}}\r\n                        <i class="icon icon-{{attributes.name}} input-icon"></i>\r\n                        <input name="{{attributes.name}}" placeholder="{{label}}" type="{{attributes.type}}" required="required" autocomplete="off" value="">\r\n                        {{#if validators}}\r\n                            <span class="error">\r\n                                {{#each validators}}\r\n                                    {{message}}\r\n                                {{/each}}\r\n                            </span>\r\n                        {{/if}}\r\n                    {{/ifCond}}\r\n                </div>\r\n            </div>\r\n        {{/each}}\r\n        <div class="row">\r\n            <div class="small-6 small-offset-6 columns">\r\n                <input name="submit" class="button radius expand s-margin-clear" type="submit" value="Войти" />\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>'}),define("text!auth/templates/errors.hbs",[],function(){return'<div class="alert-box alert">\r\n    <a href="#" class="close">×</a>\r\n    {{#if error}}\r\n    {{error}}\r\n    {{else}}\r\n    Форма заполнена некорректно.\r\n    {{/if}}\r\n</div>'}),define("auth/templates",["text!./templates/auth.hbs","text!./templates/index.hbs","text!./templates/errors.hbs","Handlebars"],function(a,b,c){return function(d){d.TEMPLATES.app=Handlebars.compile(a),d.TEMPLATES.index=Handlebars.compile(b),d.TEMPLATES.lostPassword=Handlebars.compile(b),d.TEMPLATES.forgetLink=Handlebars.compile('{{#link-to "lostPassword" class="button"}}Забыли пароль?{{/link-to}}'),d.TEMPLATES.indexLink=Handlebars.compile('{{#link-to "index" class="button"}}Войти в CMS{{/link-to}}'),d.TEMPLATES.errors=Handlebars.compile(c)}}),define("auth/main",["auth/templates","Handlebars","jquery"],function(a){return function(b){$.ajaxSetup({headers:{"X-Csrf-Token":null},error:function(){}});var c={accessError:function(){return b&&b.accessError&&401!==b.accessError.status?b.accessError.responseJSON&&b.accessError.responseJSON.result.error.message:void 0},TEMPLATES:{},forms:{},getForm:function(a){var b=$.Deferred();a=a||"form";var c=this;return $.get(window.UmiSettings.baseApiURL+"/action/"+a).then(function(d){c.forms[a]=d.result.form,b.resolve()}),b},validator:{shake:function(){function a(b,c,d){b.style.left=c.shift()+"px",c.length>0&&setTimeout(function(){a(b,c,d)},d)}var b=[10,20,10,0,-10,-20,-10,0];b=b.concat(b.concat(b));var c=document.getElementsByClassName("shake-it").item(0);c.style.position="relative",a(c,b,20)},check:function(a){var b,c,d,e=!0,f=function(a){a.onfocus=function(){$(this).closest(".columns").removeClass("error")}},g=function(a,b){return b?($(a).closest(".columns").removeClass("error"),void(a.onfocus=null)):($(a).closest(".columns").addClass("error"),f(a),!0)};for(b=0;b<a.elements.length;b++)if(c=a.elements[b],(c.hasAttribute("required")||c.value)&&c.hasAttribute("pattern")){if(d=new RegExp(c.getAttribute("pattern")),d.test(c.value)||(e=!1),g(c,e))break}else if(c.hasAttribute("required")&&(c.value||(e=!1),g(c,e)))break;return e}},transition:function(){window.applicationLoading=$.Deferred(),document.onmousemove=null;var a=document.querySelector(".auth-layout"),d=document.querySelector(".auth-mask");$(a).addClass("off is-transition");var e=function(){$(a).addClass("fade-out"),setTimeout(function(){a.parentNode.removeChild(a),d.parentNode.removeChild(d),c.destroy()},800)};b.appIsFreeze?(window.applicationLoading.resolve(),$(b.appLayout).removeClass("off fade-out"),e()):require(["application/main"],function(a){a(),window.applicationLoading.then(function(){e()})})},init:function(){var b=this,c=window.UmiSettings&&window.UmiSettings.assetsUrl;Handlebars.registerHelper("ifCond",function(a,b,c){return a===b?c.fn(this):c.inverse(this)}),a(b),this.getForm().then(function(){if(!document.querySelector(".auth-layout")){var a=document.createElement("div");a.innerHTML=b.TEMPLATES.app({assetsUrl:c,outlet:b.TEMPLATES.index({accessError:b.accessError,form:b.forms.form})}),a=document.body.appendChild(a),$(a.firstElementChild).unwrap()}$("body").removeClass("loading");var d=document.querySelector(".bubbles"),e=document.querySelector(".bubbles-front"),f=function(a){var b=document.body.offsetWidth,c=document.body.offsetHeight,f=.04,g=.04,h=(b/2-a.clientX)*f,i=(c/2-a.clientY)*g;d.style.marginLeft=h+"px",d.style.marginTop=i+"px",e.style.marginLeft=.2*h+"px",e.style.marginTop=.2*i+"px"},g=!0;document.onmousemove=function(a){g&&(d.className="bubbles visible",e.className="bubbles-front visible",g=!1),f(a)},history.state&&history.state.hasOwnProperty("language")&&$(".select-language").val(history.state.language),$(document).on("change.umi.auth",".select-language",function(){history.replaceState({language:this.value},"?language="+this.value),window.location.href=window.location.href}),$(document).on("click.umi.auth",".close",function(){return this.parentNode.parentNode.removeChild(this.parentNode),!1});var h=document.querySelector(".errors-list");$(document).on("submit.umi.auth","form",function(){if(!b.validator.check(this))return!1;var a=this.querySelector('input[type="submit"]');$(a).addClass("loading");var c=this.elements.submit;c.setAttribute("disabled","disabled");var d=$(this).serialize(),e=this.getAttribute("action"),f=$.post(e,d),g=function(d){$(a).removeClass("loading"),c.removeAttribute("disabled");var e={error:d.responseJSON.result.error.message};h.innerHTML=b.TEMPLATES.errors(e),$(h).children(".alert-box").addClass("visible")};return f.done(function(a){var c=function(a,b){for(var c in b)b.hasOwnProperty(c)&&("token"===c&&$.ajaxSetup({headers:{"X-Csrf-Token":b[c]}}),a[c]=b[c])};a.result&&c(window.UmiSettings,a.result),b.transition()}),f.fail(function(a){g(a)}),!1})})},destroy:function(){$(document).off("click.umi.auth"),$(document).off("submit.umi.auth"),$(document).off("change.umi.auth")}};c.init()}}),define("application/router",[],function(){return function(a){a.Router.reopen({location:"auto",rootURL:window.UmiSettings.baseURL}),a.Router.map(function(){this.resource("module",{path:"/:module"},function(){this.route("errors",{path:"/:status"}),this.resource("component",{path:"/:component"},function(){this.route("errors",{path:"/:status"}),this.resource("context",{path:"/:context"},function(){this.resource("action",{path:"/:action"})})})})}),a.ApplicationRoute=Ember.Route.extend({model:function(b,c){var d,e=this;try{if(!UmiSettings.baseApiURL)throw new Error("Для UmiSettings не задан baseApiURL");d=$.get(UmiSettings.baseApiURL).then(function(b){if(b&&b.result){var d=b.result;e.controllerFor("application").set("settings",d),d.collections&&a.modelsFactory(d.collections),d.modules&&e.controllerFor("application").set("modules",d.modules),d.i18n&&a.i18n.setDictionary(d.i18n)}else try{throw new Error("Запрашиваемый ресурс "+UmiSettings.baseApiURL+" некорректен.")}catch(f){c.abort(),c.send("dialogError",f)}},function(a){var b=new Error(a);a.stack=b.stack,c.send("dialogError",a)})}catch(f){c.abort(),c.send("dialogError",f)}finally{return d}},saveObject:function(a){var b=this,c=Ember.RSVP.defer();try{a.object.validateObject(Ember.get(a,"fields")),a.object.get("isValid")?a.object.save().then(function(){a.object.updateRelationhipsMap(),a.handler&&$(a.handler).removeClass("loading"),c.resolve(a.object)},function(d){try{d=d||{},a.handler&&$(a.handler).removeClass("loading");var e,f,g,h,i,j=b.get("store"),k=Ember.get(d,"responseJSON.result.error.invalidObjects");if("array"===Ember.typeOf(k))for(a.object.get("isValid")&&a.object.send("becameInvalid"),i=0;i<k.length;i++)g=k[i],h=Ember.get(g,"invalidProperties"),e=j.all(g.collection),f=e.findBy("guid",g.guid),f&&f.setInvalidProperties(h);c.reject()}catch(l){b.send("backgroundError",l)}}):(a.handler&&$(a.handler).removeClass("loading"),c.reject())}catch(d){b.send("backgroundError",d)}finally{return c.promise}},beforeAdd:function(a){var b=this;return b.saveObject(a).then(function(a){if("hierarchic"===a.store.metadataFor(a.constructor.typeKey).collectionType){var c=a.get("parent");return c&&"isFulfilled"in c?c.then(function(b){return b.reload().then(function(b){b.trigger("needReloadHasMany","add",a)}),a}):(b.controllerFor("component").trigger("needReloadRootElements","add",a),a)}return a})},actions:{willTransition:function(){a.notification.removeAll(),this.send("showLoader")},didTransition:function(){this.send("hideLoader")},error:function(){return this.send("hideLoader"),!0},showLoader:function(){this.controllerFor("application").set("routeIsTransition",!0)},hideLoader:function(){this.controllerFor("application").set("routeIsTransition",!1)},logout:function(){var a=document.querySelector(".umi-main-view"),b=document.createElement("div");b.className="auth-mask",b=document.body.appendChild(b),$(a).addClass("off is-transition"),$.post(UmiSettings.baseApiURL+"/action/logout").then(function(){require(["auth/main"],function(c){c({appIsFreeze:!0,appLayout:a}),$(a).addClass("fade-out"),Ember.run.later("",function(){$(a).removeClass("is-transition"),b.parentNode.removeChild(b)},800)})})},dialogError:function(b){var c=this.parseError(b);"silence"!==c&&(c.close=!0,c.title=b.status+". "+b.statusText,a.dialog.open(c).then())},backgroundError:function(b){var c=this.parseError(b);"silence"!==c&&(c.type="error",c.duration=!1,a.notification.create(c))},templateLogs:function(a,b){b=b||"module";var c=this.parseError(a);if("silence"!==c){var d=Ember.Object.create(c);this.intermediateTransitionTo(b+".errors",d)}},showPopup:function(a){Ember.warn('Param "popupType" is required for create popup.',Ember.get(a,"viewParams.popupType"));var b=this.controllerFor("popup");return"object"===Ember.typeOf(a)&&b.setProperties(a),this.render("popup",{into:"application",outlet:"popup",controller:b})},closePopup:function(){this.get("container").lookup("view:popup").send("closePopup")},removePopupLayout:function(){return this.disconnectOutlet({outlet:"popup",parentView:"application"})},save:function(a){this.saveObject(a)},saveAndGoBack:function(a){var b=this;b.saveObject(a).then(function(a){a&&b.send("backToFilter")})},add:function(a){var b=this;return b.beforeAdd(a).then(function(a){b.send("edit",a)})},addAndGoBack:function(a){var b=this;return b.beforeAdd(a).then(function(){b.send("backToFilter")})},addAndCreate:function(a){var b=this;return b.beforeAdd(a).then(function(a){var c={type:a.get("type")};return"hierarchic"===a.store.metadataFor(a.constructor.typeKey).collectionType?a.get("parent").then(function(a){b.send("create",a,c)}):void b.send("create",a,c)})},switchActivity:function(b){try{var c=JSON.stringify(b.toJSON({includeId:!0})),d=this.controllerFor("component").get("settings").actions[(b.get("active")?"de":"")+"activate"].source;d=a.Utils.replacePlaceholder(b,d),$.ajax({url:d,type:"POST",data:c,contentType:"application/json; charset=UTF-8"}).then(function(){b.reload()})}catch(e){this.send("backgroundError",e)}},create:function(a){var b=a.behaviour.type,c=a.object,d="root";if(c.constructor.typeKey){var e=this.store.metadataFor(c.constructor.typeKey)||{};e.hasOwnProperty("collectionType")&&"hierarchic"===e.collectionType&&(d=c.get("id"))}this.transitionTo("action",d,"createForm",{queryParams:{type:b}})},edit:function(a){this.transitionTo("action",a.get("id"),"editForm")},viewOnSite:function(a){var b;b=a?a._data.meta.pageUrl:window.UmiSettings.baseSiteURL,b=window.location.host+b;var c=window.open("//"+b.replace("//","/"),"_blank");c.focus()},untrash:function(b){var c,d,e,f,g,h=this,i=h.get("store");try{if(g=b.get("id"),d=JSON.stringify(b.toJSON({includeId:!0})),f=b.constructor.typeKey,e=h.controllerFor("component").get("settings").actions.untrash,!e)throw new Error("Action untrash not supported for component.");c=$.ajax({url:e.source+"?id="+g+"&collection="+f,type:"POST",data:d,contentType:"application/json; charset=UTF-8"}).then(function(){var c=[];c.push(b);var d=i.all(f);if("hierarchic"===i.metadataFor(f).collectionType){var e,g=b.get("mpath");if("array"===Ember.typeOf(g)&&g.length)for(var h=0;h<g.length;h++)e=d.findBy("id",g[h]+""),e&&c.push(e)}c.invoke("unloadRecord");var j={type:"success",content:'"'+b.get("displayName")+'" restore.'};a.notification.create(j)},function(){var c={type:"error",content:'"'+b.get("displayName")+'" not restored.'};a.notification.create(c)})}catch(j){h.send("backgroundError",j)}finally{return c}},trash:function(b){var c,d,e,f,g,h=this,i=h.get("store");try{if(g=b.get("id"),d=JSON.stringify(b.toJSON({includeId:!0})),e=this.modelFor("context")===b,f=this.controllerFor("component").get("settings").actions.trash,!f)throw new Error("Action trash not supported for component.");c=$.ajax({url:f.source+"?id="+g,type:"POST",data:d,contentType:"application/json; charset=UTF-8"}).then(function(){var c=b.constructor.typeKey,d=[];if(d.push(b),"hierarchic"===i.metadataFor(c).collectionType){var f=i.all(c);f.find(function(a){var b=a.get("mpath")||[];b.contains(parseFloat(g))&&b.length>1&&d.push(a)})}d.invoke("unloadRecord");var j={type:"success",content:'"'+b.get("displayName")+'" удалено в корзину.'};a.notification.create(j),e&&h.send("backToFilter")},function(){var c={type:"error",content:'"'+b.get("displayName")+'" не удалось поместить в корзину.'};a.notification.create(c)})}catch(j){this.send("backgroundError",j)}finally{return c}},"delete":function(b){var c=this,d=this.modelFor("context")===b,e={close:!1,title:'Удаление "'+b.get("displayName")+'".',content:"<div>Объект будет удален без возможности восстановления, все равно продолжить?</div>",confirm:"Удалить",reject:"Отмена"};return a.dialog.open(e).then(function(){var e=b.constructor.typeKey,f=b.get("store"),g=b.get("id");return b.destroyRecord().then(function(){var h=[];if("hierarchic"===f.metadataFor(e).collectionType){var i=f.all(e);i.find(function(a){var b=a.get("mpath")||[];b.contains(parseFloat(g))&&b.length>1&&h.push(a)})}h.invoke("unloadRecord");var j={type:"success",content:'"'+b.get("displayName")+'" успешно удалено.'};a.notification.create(j),d&&c.send("backToFilter")},function(){var c={type:"error",content:'"'+b.get("displayName")+'" не удалось удалить.'};a.notification.create(c)})},function(){})},backToFilter:function(){this.transitionTo("context","root")},importFromRss:function(b){try{var c={content:'<div class="text-center"><i class="animate animate-loader-40"></i> Подождите..</div>',close:!1,type:"check-process"};a.dialog.open(c).then(function(){},function(){});var d=JSON.stringify(b.toJSON({includeId:!0})),e=this.controllerFor("component").get("settings").actions.importFromRss.source;$.ajax({url:e,type:"POST",data:d,contentType:"application/json; charset=UTF-8"}).then(function(b){var c=a.dialog.get("model");c.setProperties({content:Ember.get(b,"result.importFromRss.message"),close:!0,reject:"Закрыть",type:null})})}catch(f){this.send("backgroundError",f)}},switchRobots:function(a,b,c){try{var d=JSON.stringify(a.toJSON({includeId:!0})),e=this.controllerFor("component").get("settings").actions[(b?"dis":"")+"allowRobots"].source;$.ajax({url:e+"?id="+a.get("id"),type:"POST",data:d,contentType:"application/json; charset=UTF-8"}).then(function(){c.resolve()})}catch(f){this.send("backgroundError",f)}}},parseError:function(a){var b={status:a.status,title:a.statusText,stack:a.stack};if(403===a.status||401===a.status)return this.send("logout"),"silence";var c;return a.hasOwnProperty("responseJSON")?a.responseJSON.hasOwnProperty("result")&&a.responseJSON.result.hasOwnProperty("error")&&(c=a.responseJSON.result.error.message):c=a.responseText||a.message,b.content=c,b}}),a.IndexRoute=Ember.Route.extend({redirect:function(a,b){var c;if(b.targetName===this.routeName)try{if(c=this.controllerFor("application").get("modules")[0],!c)throw new Error("Ни одного модуля системы не найдено")}catch(d){b.send("backgroundError",d)}finally{return this.transitionTo("module",Ember.get(c,"name"))}}}),a.ModuleRoute=Ember.Route.extend({model:function(a){var b,c,d;try{if(b=Ember.RSVP.defer(),c=this.controllerFor("application").get("modules"),d=c.findBy("name",a.module),!d)throw new Error('The module "'+a.module+'" was not found.');b.resolve(d)}catch(e){b.reject(e)}finally{return b.promise}},redirect:function(a,b){if(b.targetName===this.routeName+".index"){var c,d,e=this;try{if(c=Ember.RSVP.defer(),d=Ember.get(a,"components")[0],!d)throw new Error('For module "'+Ember.get(a,"name")+'" components not found.');c.resolve(e.transitionTo("component",Ember.get(d,"name")))}catch(f){c.reject(Ember.run.next(e,function(){this.send("templateLogs",f)}))}finally{return c.promise}}},serialize:function(a){return{module:Ember.get(a,"slug")}}}),a.ComponentRoute=Ember.Route.extend({model:function(a,b){var c,d,e,f=this,g=b.params.component.component;try{c=Ember.RSVP.defer(),d=Ember.get(this.modelFor("module"),"components");for(var h=0;h<d.length;h++)if(d[h].name===g){e=d[h];break}if(!e)throw new URIError('The component "'+g+'" was not found.');$.ajax({type:"GET",url:Ember.get(e,"resource"),global:!1,success:function(a){var d=f.controllerFor("component");if("object"===Ember.typeOf(a)&&Ember.get(a,"result.layout")){var g=a.result.layout,h=Ember.get(g,"dataSource")||"";d.set("settings",g),d.set("selectedContext",Ember.get(b,"params.context")?Ember.get(b,"params.context.context"):"root"),"lazy"===Ember.get(h,"type")?$.get(Ember.get(g,"actions."+Ember.get(h,"action")+".source")).then(function(a){var b=Ember.get(a,"result."+Ember.get(h,"action")+".objects");Ember.set(h,"objects",b),c.resolve(e)},function(a){c.reject(b.send("backgroundError",a))}):c.resolve(e)}else{var i=new Error('Ресурс "'+Ember.get(e,"resource")+'" некорректен.');b.send("backgroundError",i),c.reject()}},error:function(a){c.reject(Ember.run.next(this,function(){b.send("templateLogs",a)}))}})}catch(i){c.reject(Ember.run.next(this,function(){b.send("templateLogs",i)}))}finally{return c.promise}},redirect:function(a,b){if(b.targetName===this.routeName+".index"){var c;try{var d=this.controllerFor("component").get("settings.contents.emptyContext.redirect");c=d?Ember.get(d,"params.slug"):"root"}catch(e){b.send("backgroundError",e)}finally{return this.transitionTo("context",c)}}},serialize:function(a){return{component:Ember.get(a,"name")}},renderTemplate:function(a){if(this.render(),a.get("sideBarControl"))try{this.render(a.get("sideBarControl.name"),{into:"component",outlet:"sideBar"})}catch(b){this.send("templateLogs",b,"component")}}}),a.ContextRoute=Ember.Route.extend({model:function(a,b){var c,d,e,f;try{if(c=this.controllerFor("component"),d=c.get("dataSource"),c.set("selectedContext",a.context),"root"===a.context)e=Ember.Object.extend({}),f=new Ember.RSVP.Promise(function(a){a(e.create({id:"root",type:"base"}))});else switch(Ember.get(d,"type")){case"static":case"lazy":f=new Ember.RSVP.Promise(function(b,c){for(var e,f=Ember.get(d,"objects"),g=0;g<f.length;g++)if(f[g].id===a.context){e=f[g];break}e?b(e):c("Не найден объект с ID "+a.context)});break;case"collection":this.store.hasRecordForId(Ember.get(d,"name"),a.context)?(f=this.store.getById(Ember.get(d,"name"),a.context),f=f.reload()):f=this.store.find(Ember.get(d,"name"),a.context);break;default:throw new Error("Неизвестный тип dataSource компонента.")}}catch(g){Ember.run.next(this,function(){b.send("templateLogs",g)})}finally{return f}},redirect:function(a,b){if(b.targetName===this.routeName+".index"){var c,d;try{if(c=this.controllerFor("component").get("contentControls")[0],d=Ember.get(c,"id"),!d)throw new Error("Действия для данного контекста не доступны.")}catch(e){b.send("backgroundError",e)}finally{return this.transitionTo("action",d)
}}},serialize:function(a){return a?{context:Ember.get(a,"id")}:void 0}}),a.ActionRoute=Ember.Route.extend({queryParams:{type:{refreshModel:!0,replace:!0}},model:function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o=this;try{if(k=Ember.RSVP.defer(),d=b.action,e=this.modelFor("context"),f=this.controllerFor("component"),g=f.get("contentControls"),h=g.findBy("id",d),!h)throw new Error('Action "dynamic" is undefined for component.');if(i={object:e,control:h},m=Ember.get(h,"params.action")){if(l=Ember.get(f,"settings.actions."+m+".source"),!l)throw new Error("Действие "+Ember.get(h,"name")+" для данного контекста недоступно.");if(n=i.object,"createForm"===d){if(j={},"collection"===f.get("dataSource.type")){var p=this.store.metadataFor(f.get("dataSource.name"))||{};"hierarchic"===Ember.get(p,"collectionType")&&"root"!==i.object.get("id")&&(j.parent=e)}c.queryParams.type&&(j.type=c.queryParams.type),i.createObject=o.store.createRecord(f.get("dataSource.name"),j),n=i.createObject}l=a.Utils.replacePlaceholder(n,l),$.ajax({type:"GET",url:l,global:!1,success:function(b){var c,e;if("dynamic"===d){c=Ember.get(b,"result")||{};for(var f in c)c.hasOwnProperty(f)&&(e=f);c=c[e]||{},c.name=e,a.Utils.objectsMerge(i.control,c)}else"createForm"===d?(i.createObject.set("guid",Ember.get(b,"result."+m+".guid")),Ember.set(i.control,"meta",Ember.get(b,"result."+m+".form"))):Ember.set(i.control,"meta",Ember.get(b,"result."+m));k.resolve(i)},error:function(a){k.reject(c.send("templateLogs",a,"component"))}})}else k.resolve(i)}catch(q){k.reject(c.send("templateLogs",q,"component"))}finally{return k.promise}},serialize:function(a){return Ember.get(a,"control")?{action:Ember.get(a,"control.id")}:void 0},renderTemplate:function(a,b){try{var c=Ember.get(b,"control.name");this.render(c,{controller:a})}catch(d){this.send("templateLogs",d,"component")}},setupController:function(a,b){this._super(a,b),b.createObject&&(Ember.set(b,"object",b.createObject),Ember.set(b,"createObject",null)),a.set("model",b)},actions:{willTransition:function(b){b.params.action&&"createForm"!==b.params.action.action&&this.get("controller").set("typeName",null);var c=Ember.get(this.modelFor("action"),"object");if(Ember.get(c,"isNew")&&c.deleteRecord(),Ember.get(c,"isDirty")){b.abort();var d={close:!1,title:"Изменения не были сохранены.",content:"Переход на другую страницу вызовет потерю несохраненых изменений. Остаться на странице чтобы сохранить изменения?",confirm:"Остаться на странице",reject:"Продолжить без сохранения"};return a.dialog.open(d).then(function(){},function(){c.get("isValid")||(c.set("validErrors",null),c.send("becameValid")),c.rollback(),b.retry()})}return!0}}})}}),define("application/controllers",[],function(){return function(a){a.ApplicationController=Ember.ObjectController.extend({settings:null,modules:null,routeIsTransition:null}),a.ModuleController=Ember.ObjectController.extend({}),a.ComponentController=Ember.ObjectController.extend(Ember.Evented,{name:function(){return this.get("container").lookup("route:module").get("context.name")+Ember.String.capitalize(this.get("model.name"))}.property("model.name"),settings:null,dataSourceBinding:"settings.dataSource",selectedContext:null,needReloadRootElements:Ember.K,contentControls:function(){var a=this,b=[],c=this.get("settings");try{var d,e,f="root"===this.get("selectedContext")?"emptyContext":"selectedContext",g=c.contents[f];for(d in g)g.hasOwnProperty(d)&&(e=g[d],e.id=d,e.name=d,b.push(e))}catch(h){var i={statusText:h.name,message:h.message,stack:h.stack};Ember.run.next(function(){a.send("templateLogs",i,"component")})}return b}.property("settings","selectedContext"),sideBarControl:function(){var a,b=this;try{var c=this.get("settings");if(c&&c.hasOwnProperty("sideBar")){var d,e;for(d in c.sideBar)c.sideBar.hasOwnProperty(d)&&(e=c.sideBar[d],"object"!==Ember.typeOf(e)&&(e={}),a=e,a.name=d)}}catch(f){var g={statusText:f.name,message:f.message,stack:f.stack};Ember.run.next(function(){b.send("templateLogs",g,"component")})}return a}.property("settings")}),a.ContextController=Ember.ObjectController.extend({}),a.ActionController=Ember.ObjectController.extend({queryParams:["type"],type:null})}}),define("application/views",[],function(){return function(a){a.ApplicationView=Ember.View.extend({classNames:["umi-main-view","s-full-height"],didInsertElement:function(){$("body").removeClass("loading"),window.applicationLoading&&window.applicationLoading.resolve()}}),a.ComponentView=Ember.View.extend({classNames:["umi-content","s-full-height"],filtersView:Ember.View.extend({classNames:["umi-tree-control-filters"]})})}}),define("App",["DS","Modernizr","iscroll","ckEditor","jqueryUI","elFinder","timepicker","moment","application/config","application/utils","application/i18n","application/templates.compile","application/templates.extends","application/models","application/router","application/controllers","application/views"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=window.UMI=window.UMI||{};return Ember.Inflector.inflector=new Ember.Inflector,r=Ember.Application.create({rootElement:"#body",Resolver:Ember.DefaultResolver.extend({resolveTemplate:function(a){return a.fullNameWithoutType="UMI/"+a.fullNameWithoutType,this._super(a)}})}),r.deferReadiness(),j(r),i(r),k(r),a.UmiRESTAdapter=a.RESTAdapter.extend({buildURL:function(a,b){var c=[],d=Ember.get(this,"host"),e=this.urlPrefix();return b&&c.push(b),e&&c.unshift(e),c=c.join("/"),!d&&c&&(c="/"+c),c},namespace:window.UmiSettings.baseApiURL.replace(/^\//g,""),ajaxOptions:function(a,b,c){c=c||{},c.url=a,c.type=b,c.dataType="json",c.context=this,c.data&&"GET"!==b&&(c.contentType="application/json; charset=utf-8",c.data=JSON.stringify(c.data));var d=this.headers;return("PUT"===b||"DELETE"===b)&&(d=d||{},d["X-HTTP-METHOD-OVERRIDE"]=b,c.type="POST"),void 0!==d&&(c.beforeSend=function(a){Ember.ArrayPolyfills.forEach.call(Ember.keys(d),function(b){a.setRequestHeader(b,d[b])})}),c},ajaxError:function(a){var b=this._super(a);if(403===b.status||401===b.status)return void r.__container__.lookup("router:main").send("logout");if(422===b.status)return b;var c;b.hasOwnProperty("responseJSON")?b.responseJSON.hasOwnProperty("result")&&b.responseJSON.result.hasOwnProperty("error")&&(c=b.responseJSON.result.error.message):c=b.responseText;var d={close:!0,title:b.status+". "+b.statusText,content:c,duration:!1,type:"error"};r.notification.create(d)}}),r.ApplicationSerializer=a.RESTSerializer.extend({extractMeta:function(a,b,c){if(c&&c.result&&c.result.meta){var d=a.metadataFor(b)||{};for(var e in c.result.meta)d[e]=c.result.meta[e];a.metaForType(b,d),delete c.result.meta}},normalizePayload:function(a){return a=a.result,a.hasOwnProperty("collection")&&(a=a.collection),a},serializeHasMany:function(b,c,d){var e=d.key,f=a.RelationshipChange.determineRelationshipType(b.constructor,d);("manyToNone"===f||"manyToMany"===f||"manyToOne"===f)&&b.relationPropertyIsDirty(e)&&(c[e]=Ember.get(b,"changedRelationshipsByName."+e))}}),r.ApplicationAdapter=a.UmiRESTAdapter,a.ManyArray.reopen({reloadLinks:function(){var a=Ember.get,b=a(this,"store"),c=a(this,"owner"),d=a(this,"name"),e=Ember.RSVP.defer(),f=c.constructor.metaForProperty(d),g=c._data.links[f.key];b.findHasMany(c,g,f,e)}}),r.ApplicationStore=a.Store.extend({updateCollection:function(a,b){function c(a,b){var c=Ember.ArrayProxy.extend(Ember.PromiseProxyMixin);return c.create({promise:Ember.RSVP.Promise.cast(a,b)})}function d(a,b,c){return a.lookup("serializer:"+b)||a.lookup("serializer:application")||a.lookup("serializer:"+c)||a.lookup("serializer:-default")}function e(a,b){var c=a.serializer,e=a.defaultSerializer,f=a.container;return f&&void 0===c&&(c=d(f,b.typeKey,e)),(null===c||void 0===c)&&(c={extract:function(a,b,c){return c}}),c}function f(a,b){a=j.modelFor(a);var d=j.recordArrayManager.createAdapterPopulatedRecordArray(a,b),e=j.adapterFor(a);return Ember.assert("You tried to load a query but you have no adapter (for "+a+")",e),Ember.assert("You tried to load a query but your adapter does not implement `findQuery`",e.findQuery),c(g(e,j,a,b,d))}function g(a,b,c,d,f){var g=a.findQuery(b,c,d,f),h=e(a,c),i="DS: Handle Adapter#findQuery of "+c;return Ember.RSVP.Promise.cast(g,i).then(function(a){var e=Ember.get(d,"fields")||"",f=h.extract(b,c,a,null,"findQuery");Ember.assert("The response from a findQuery must be an Array, not "+Ember.inspect(f),"array"===Ember.typeOf(f)),e=e.split(","),e.push("id"),e.push("version"),e.push("meta");for(var g=0;g<f.length;g++)for(var i in f[g])f[g].hasOwnProperty(i)&&!e.contains(i)&&delete f[g][i];return f},null,"DS: Extract payload of findQuery "+c)}function h(a){return null==a?null:a+""}var i,j=this;Ember.assert("You need to pass a type to the store's find method",arguments.length>=1),Ember.assert("You may not pass `"+b+"` as id to the store's find method",1===arguments.length||!Ember.isNone(b)),i=1===arguments.length?j.findAll(a):"object"===Ember.typeOf(b)?f(a,b):j.findById(a,h(b));var k=Ember.RSVP.defer();return i.then(function(b){var c,d=[];Ember.run.later(function(){var e=function(a,b,c,d){b.push(a.update(c,d))};for(c=0;c<b.length;c++)e(j,d,a,b[c]);k.resolve(d)},0)}),c(k.promise)}}),a.StringTransform.reopen({deserialize:function(a){return Ember.isNone(a)?"":String(a)}}),r.CustomDateTransform=a.Transform.extend({deserialize:function(a){return a=Ember.isNone(a)?"":String(a),a&&(a=h(a).format("DD.MM.YYYY")),a},serialize:function(a){return a&&(a=h(a,"DD.MM.YYYY").format("YYYY-MM-DD")),a}}),r.CustomDateTimeTransform=a.Transform.extend({deserialize:function(a){return"object"===Ember.typeOf(a)&&a.date?(Ember.set(a,"date",h(a.date).format("DD.MM.YYYY h:mm:ss")),a=JSON.stringify(a)):a="",a},serialize:function(a){if(a)try{a=JSON.parse(a),a.date&&Ember.set(a,"date",h(a.date,"DD.MM.YYYY h:mm:ss").format("YYYY-MM-DD h:mm:ss"))}catch(b){b.message="Некорректное значение поля. Ожидается массив или null. "+b.message,this.get("container").lookup("route:application").send("backgroundError",b)}else a=null;return a}}),r.SerializedTransform=a.Transform.extend({deserialize:function(a){return a?("array"===Ember.typeOf(a)&&a.sort(),a=JSON.stringify(a)):a="",a},serialize:function(a){if(a)try{a=JSON.parse(a)}catch(b){b.message="Некорректное значение поля. Ожидается массив или null. "+b.message,this.get("container").lookup("route:application").send("backgroundError",b)}else a=[];return a}}),r.ObjectRelationTransform=r.SerializedTransform.extend({serialize:function(a){if(a)try{a=JSON.parse(a),a={collection:a.collection?a.collection:Ember.get(a,"meta.collectionName"),guid:a.guid}}catch(b){b.message="Некорректное значение поля. Ожидается массив или null. "+b.message,this.get("container").lookup("route:application").send("backgroundError",b)}else a=[];return a}}),r.RawTransform=a.Transform.extend({serialize:function(a){return a},deserialize:function(a){return a}}),$.ajaxSetup({headers:{"X-Csrf-Token":window.UmiSettings.token},error:function(a){var b=r.__container__.lookup("router:main").router.activeTransition;b?b.send("backgroundError",a):r.__container__.lookup("route:application").send("backgroundError",a)}}),m(),n(r),o(r),p(r),q(r),r}),define("toolbar/view",["App"],function(a){return function(){a.ToolbarElement=Ember.Mixin.create({tagName:"li",template:function(){var a=this,b=this.get("context.type");if(this.get(b+"View"))return Ember.Handlebars.compile("{{view view."+b+"View meta=this}}");try{throw new Error("View c типом "+b+" не зарегестрирован для toolbar")}catch(c){Ember.run.next(function(){a.get("controller").send("backgroundError",c)})}}.property(),buttonView:function(){var b=this.get("context.behaviour.name"),c=Ember.get(a.buttonBehaviour,b)||{},d={};for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);var f=a.ButtonView.extend(d);return f}.property(),dropdownButtonView:function(){var b=this.get("context.behaviour.name"),c=Ember.get(a.dropdownButtonBehaviour,b)||{},d={};for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);var f=a.DropdownButtonView.extend(d);return f}.property(),splitButtonView:function(){var b=a.SplitButtonView.extend(a.SplitButtonDefaultBehaviourForComponent),c=this.get("context.behaviour.name"),d=Ember.get(a.splitButtonBehaviour,c)||{},e={};for(var f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);return b=b.extend(e)}.property()}),a.ToolbarView=Ember.View.extend({layoutName:"partials/toolbar",classNames:["s-unselectable","umi-toolbar"],elementView:Ember.View.extend(a.ToolbarElement),didInsertElement:function(){var a=this.$(),b=a.find(".button-group"),c=b.width(),d=0,e=b.next();e.length&&(d=e.width(),c+=d+60);var f=function(a){var c=b.find(".button");a?b.removeClass("umi-hide-button-label"):b.addClass("umi-hide-button-label"),c.length&&c.each(function(b){var d="";a||(d=$(c[b]).find(".umi-button-label").text()),$(c[b]).attr("title",d)})};b.length&&c>=a.width()&&f(),$(window).on("resize.umi.toolbar",function(){c>=a.width()?f():f(!0)})},willDestroyElement:function(){$(window).off("resize.umi.toolbar")}})}}),define("partials/toolbar/buttons/globalBehaviour",["App"],function(a){return function(){function b(){}b.prototype={save:{label:function(){return this.get(this.get("controller.object.isDirty")?"defaultBehaviour.attributes.label":"meta.attributes.states.notModified.label")}.property("meta.attributes.label","controller.object.isDirty","defaultBehaviour"),classNameBindings:["controller.object.isDirty::disabled","controller.object.isValid::disabled"],beforeSave:function(){var a=this.get("controller.object");if(!a.get("isDirty")||!a.get("isValid"))return!1;var b=this.$();b.addClass("loading");var c={object:a,handler:b[0]};return c},actions:{save:function(){var a=this.beforeSave();a&&this.get("controller").send("save",a)},saveAndGoBack:function(){var a=this.beforeSave();a&&this.get("controller").send("saveAndGoBack",a)}}},create:{actions:{create:function(a){var b=a.behaviour,c=a.object||this.get("controller.object");this.get("controller").send("create",{behaviour:b,object:c})}}},switchActivity:{label:function(){return this.get(this.get("controller.object.active")?"meta.attributes.states.deactivate.label":"meta.attributes.states.activate.label")}.property("meta.attributes.label","controller.object.active"),classNameBindings:["controller.object.active::umi-disabled"],actions:{switchActivity:function(a){a=a||{};var b=a.object||this.get("controller.object");this.get("controller").send("switchActivity",b)}}},backToFilter:{actions:{backToFilter:function(){this.get("controller").send("backToFilter")}}},trash:{actions:{trash:function(a){a=a||{};var b=a.object||this.get("controller.object");this.get("controller").send("trash",b)}}},untrash:{actions:{untrash:function(a){a=a||{};var b=a.object||this.get("controller.object");this.get("controller").send("untrash",b)}}},"delete":{actions:{"delete":function(a){a=a||{};var b=a.object||this.get("controller.object");this.get("controller").send("delete",b)}}},viewOnSite:{actions:{viewOnSite:function(a){a=a||{};var b=a.object||this.get("controller.object");this.get("controller").send("viewOnSite",b)}}},edit:{actions:{edit:function(a){a=a||{};var b=a.object||this.get("controller.object");this.get("controller").send("edit",b)}}},add:{classNameBindings:["controller.object.isValid::disabled"],beforeAdd:function(a){a=a||{};var b=a.object||this.get("controller.object");if(!b.get("isValid"))return!1;var c=this.$();return c.addClass("loading"),a={object:b,handler:c[0]}},actions:{add:function(a){a=a||{};var b=this.beforeAdd(a.object);b&&this.get("controller").send("add",b)},addAndGoBack:function(){var a=this.beforeAdd();a&&this.get("controller").send("addAndGoBack",a)},addAndCreate:function(){var a=this.beforeAdd();a&&this.get("controller").send("addAndCreate",a)}}},importFromRss:{actions:{importFromRss:function(){var a=this.get("controller.object");this.get("controller").send("importFromRss",a)}}},switchRobots:{isAllowedRobots:null,label:function(){return this.get(this.get("isAllowedRobots")?"meta.attributes.states.disallow.label":"meta.attributes.states.allow.label")}.property("meta.attributes.label","isAllowedRobots"),iconClass:function(){return this.get("isAllowedRobots")?"icon-allowRobots":"icon-disallowRobots"}.property("isAllowedRobots"),actions:{switchRobots:function(){var a=this,b=Ember.RSVP.defer(),c=b.promise,d=this.get("isAllowedRobots"),e=this.get("controller.object");this.get("controller").send("switchRobots",e,d,b),c.then(function(){a.set("isAllowedRobots",!d)})}},checkIsAllowedRobots:function(){if(!this.get("isDestroying")&&!this.get("isDestroyed")){var a,b,c=this,d=this.get("controller.object"),e=this.get("container").lookup("controller:component");return e?(b=JSON.stringify(d.toJSON({includeId:!0})),a=e.get("settings.actions.isAllowedRobots.source"),$.get(a+"?id="+d.get("id")).then(function(a){a=a||{},c.set("isAllowedRobots",Ember.get(a,"result.isAllowedRobots"))})):void 0}},checkIsAllowedRobotsChange:function(){Ember.run.once(this,"checkIsAllowedRobots")}.observes("controller.object").on("didInsertElement"),willDestroyElement:function(){this.removeObserver("controller.object")},willClearRender:function(){this.removeObserver("controller.object")}}},a.globalBehaviour=new b}}),define("partials/toolbar/buttons/button/main",["App"],function(a){return function(){function b(){}a.ButtonView=Ember.View.extend({tagName:"a",templateName:"partials/button",classNameBindings:"meta.attributes.class",attributeBindings:["title"],title:Ember.computed.alias("meta.attributes.title"),label:function(){return this.get("meta.attributes.label")}.property("meta.attributes.label"),iconClass:function(){return"icon-"+this.get("meta.behaviour.name")}.property("meta.behaviour.name"),click:function(){var a=this.get("meta").behaviour,b={behaviour:a};this.send(a.name,b)}}),b.prototype=Object.create(a.globalBehaviour),a.buttonBehaviour=new b}}),define("partials/toolbar/buttons/dropdownButton/main",["App","moment"],function(a,b){return function(){function c(){}a.DropdownButtonView=Ember.View.extend({templateName:"partials/dropdownButton",tagName:"a",classNameBindings:"meta.attributes.class",attributeBindings:["title"],title:Ember.computed.alias("meta.attributes.title"),didInsertElement:function(){var a=this.$();a.on("click.umi.dropdown",function(a){if(!$(a.target).closest(".f-dropdown").length){a.stopPropagation();var b=$(this);b.toggleClass("open"),setTimeout(function(){b.hasClass("open")&&$("body").on("click.umi.dropdown.close",function(a){a.stopPropagation();var c=$(a.target).closest(".dropdown");c.length&&c[0].getAttribute("id")===b[0].getAttribute("id")||($("body").off("click.umi.dropdown.close"),b.removeClass("open"))})},0)}})},willDestroyElement:function(){var a=this.$();a.off("click.umi.dropdown")},actions:{sendActionForBehaviour:function(a){this.send(a.name,{behaviour:a})}}}),c.prototype=Object.create(a.globalBehaviour),c.prototype.backupList={classNames:["coupled"],classNameBindings:["isOpen:open"],isOpen:!1,iScroll:null,tagName:"div",templateName:"partials/dropdownButton/backupList",noBackupsLabel:null,getBackupList:function(){var c,d=this,e=d.get("controller.object"),f=d.get("controller.settings"),g=a.Utils.replacePlaceholder(e,f.actions.getBackupList.source),h=e.get("updated");try{h=JSON.parse(h)}catch(i){}var j={objectId:e.get("id"),id:"current",current:!0,isActive:!0},k=DS.PromiseArray.create({promise:$.get(g).then(function(c){var f,g,h=[],i=Ember.get(c,"result.getBackupList.collection.serviceBackup"),k=Ember.get(c,"result.getBackupList.collection.user");if(a.i18n.setDictionary(Ember.get(c,"result.getBackupList.i18n"),"form.backupList"),d.set("noBackupsLabel",a.i18n.getTranslate("No backups","form.backupList")),!i||!i.length)return[];var l=function(a){a.then(function(a){Ember.set(j,"user",Ember.get(a,"displayName"))})};if(g=e.get("editor"),"instance"===Ember.typeOf(g)?l(g):(g=e.get("owner"),"instance"===Ember.typeOf(g)&&l(g)),Ember.set(j,"created",{date:a.i18n.getTranslate("Current version","form.backupList")}),h.push(j),"array"===Ember.typeOf(i)){for(var m=0;m<i.length;m++)f=k.findBy("id",i[m].owner),i[m].user=f.displayName,Ember.set(i[m],"created.date",b(Ember.get(i[m],"created.date")).format("DD.MM.YYYY h:mm:ss"));h=h.concat(i)}return h})});return c=Ember.ArrayProxy.create({content:k})},backupList:null,actions:{open:function(){var a=this,b=this.$();this.toggleProperty("isOpen"),this.get("isOpen")&&setTimeout(function(){$("body").on("click.umi.controlDropUp",function(c){var d=$(c.target).closest(".umi-dropup");d.length&&d[0].parentNode.getAttribute("id")===b[0].getAttribute("id")||($("body").off("click.umi.controlDropUp"),a.set("isOpen",!1))}),a.get("iScroll")&&a.get("iScroll").refresh()},0)},applyBackup:function(c){if(!c.isActive){var d,e=this,f=this.get("controller.object"),g=e.get("backupList"),h=g.findBy("id",c.id),i=function(){g.setEach("isActive",!1),Ember.set(h,"isActive",!0)};c.current?(f.rollback(),i()):(d=a.Utils.replacePlaceholder(h,Ember.get(e.get("controller.settings"),"actions.getBackup.source")),$.get(d).then(function(a){f.rollback(),delete a.result.getBackup.version,delete a.result.getBackup.id,e.get("controller.store").modelFor(f.constructor.typeKey).eachTransformedAttribute(function(c,d){"CustomDateTime"===d&&a.result.getBackup.hasOwnProperty(c)&&"object"===Ember.typeOf(a.result.getBackup[c])&&(Ember.set(a.result.getBackup[c],"date",b(a.result.getBackup[c].date).format("DD.MM.YYYY h:mm:ss")),a.result.getBackup[c]=JSON.stringify(a.result.getBackup[c]))}),f.setProperties(a.result.getBackup),i()}))}}},didInsertElement:function(){var b,c=this.$(),d=c.find(".s-scroll-wrap");d.length&&(b=new IScroll(d[0],a.config.iScroll)),this.set("iScroll",b);var e=this;e.set("backupList",e.getBackupList()),e.get("controller.object").off("didUpdate"),e.get("controller.object").on("didUpdate",function(){e.set("backupList",e.getBackupList())}),e.get("controller").addObserver("object",function(){"editForm"===e.get("controller.control.name")&&e.set("backupList",e.getBackupList())})},willDestroyElement:function(){this.get("controller").removeObserver("object"),this.get("controller.object").off("didUpdate")}},a.dropdownButtonBehaviour=new c}}),define("partials/toolbar/buttons/splitButton/main",["App"],function(a){return function(){function b(){}a.SplitButtonDefaultBehaviour=Ember.Mixin.create({pathInLocalStorage:function(){var a=this.get("meta")||{behaviour:{}};return"layout.defaultBehaviour."+a.type+"."+a.behaviour.name}.property(),defaultBehaviourIndex:null,defaultBehaviour:function(){var a=this.get("defaultBehaviourIndex"),b=this.get("meta.behaviour.choices")||[];return b[a]?b[a]:(a>0&&this.set("defaultBehaviourIndex",0),b[0])}.property("defaultBehaviourIndex"),defaultBehaviourIcon:function(){return this.get("defaultBehaviour")?"icon-"+this.get("defaultBehaviour.behaviour.name"):void 0}.property("defaultBehaviour"),actions:{toggleDefaultBehaviour:function(b){this.get("defaultBehaviourIndex")!==b&&(this.set("defaultBehaviourIndex",b),a.Utils.LS.set(this.get("pathInLocalStorage"),b))}},init:function(){this._super(),this.set("defaultBehaviourIndex",a.Utils.LS.get(this.get("pathInLocalStorage"))||0)}}),a.SplitButtonDefaultBehaviourForComponent=Ember.Mixin.create({pathInLocalStorage:function(){var a=this.get("controller.componentName"),b=this.get("meta")||{behaviour:{}};return"layout.defaultBehaviour."+b.type+"."+b.behaviour.name+"."+a}.property("controller.componentName")});var c=Ember.Object.create({defaultBehaviourIndex:0});a.SplitButtonSharedSettingsBehaviour=Ember.Mixin.create({containerSettings:c,defaultBehaviourIndex:Ember.computed.alias("containerSettings.defaultBehaviourIndex")}),a.SplitButtonView=Ember.View.extend(a.SplitButtonDefaultBehaviour,{templateName:"partials/splitButton",tagName:"span",isOpen:!1,classNameBindings:["meta.attributes.class","isOpen:open"],attributeBindings:["title"],label:function(){return this.get("defaultBehaviour.attributes.label")}.property("defaultBehaviour.attributes.label"),title:Ember.computed.alias("meta.attributes.title"),click:function(a){var b=this.$();(a.target.getAttribute("id")===b[0].getAttribute("id")||($(a.target).hasClass("icon")||$(a.target).hasClass("umi-button-label"))&&a.target.parentElement.getAttribute("id")===b[0].getAttribute("id"))&&this.send("sendActionForBehaviour",this.get("defaultBehaviour").behaviour)},actions:{open:function(){var a=this,b=a.$();setTimeout(function(){a.toggleProperty("isOpen"),a.get("isOpen")&&$("html").on("click.splitButton",function(c){if(b.children(".dropdown-toggler")[0]!==c.target){var d=$(c.target).closest(".f-dropdown");d.length&&d[0].parentNode.getAttribute("id")===b[0].getAttribute("id")||($("html").off("click.splitButton"),a.set("isOpen",!1))}})},0)},sendActionForBehaviour:function(a){this.send(a.name,{behaviour:a})}},itemView:Ember.View.extend({tagName:"li",classNames:["has-default-button"],label:function(){return this.get("context.attributes.label")}.property("context.attributes.label"),icon:function(){return"icon-"+this.get("context.behaviour.name")}.property("context.behaviour.name"),isDefaultBehaviour:function(){var a=this.get("parentView.defaultBehaviourIndex");return a===this.get("_parentView.contentIndex")}.property("parentView.defaultBehaviourIndex")})}),b.prototype=Object.create(a.globalBehaviour),b.prototype.dropUp={classNames:["split-dropup"]},b.prototype.contextMenu={itemView:function(){var a=Ember.View.extend({tagName:"li",classNames:["has-default-button"],label:function(){return this.get("context.attributes.label")}.property("context.attributes.label"),isDefaultBehaviour:function(){var a=this.get("parentView.defaultBehaviourIndex");return a===this.get("_parentView.contentIndex")}.property("parentView.defaultBehaviourIndex"),icon:function(){return"icon-"+this.get("context.behaviour.name")}.property("context.behaviour.name"),init:function(){this._super();var a=this.get("context");"switchActivity"===Ember.get(a,"behaviour.name")&&this.reopen({label:function(){return this.get(this.get("controller.object.active")?"context.attributes.states.deactivate.label":"context.attributes.states.activate.label")}.property("context.attributes.label","controller.object.active")})}});return a}.property()},a.splitButtonBehaviour=new b}}),define("toolbar/buttons/main",["partials/toolbar/buttons/globalBehaviour","partials/toolbar/buttons/button/main","partials/toolbar/buttons/dropdownButton/main","partials/toolbar/buttons/splitButton/main"],function(a,b,c,d){return function(){a(),b(),c(),d()}}),define("toolbar/main",["App","./view","./buttons/main"],function(a,b,c){c(),b()}),define("toolbar",["toolbar/main"],function(a){return a}),define("topBar/main",["App","toolbar"],function(a){a.TopBarView=Ember.View.extend({templateName:"partials/topBar",activeProject:function(){return window.location.host}.property(),siteUrl:function(){return Ember.get(window,"UmiSettings.baseSiteURL")}.property(),dropdownView:a.DropdownButtonView.extend({template:function(){var a=Ember.get(window,"UmiSettings.user.displayName");return Ember.Handlebars.compile(a+'<ul class="f-dropdown right"><li><a href="javascript:void(0)" {{action "logout"}}><i class="icon icon-exit"></i> {{i18n "Logout"}}</a></li></ul>')}.property()}),moduleDropdownView:a.DropdownButtonView.extend({template:function(){return Ember.Handlebars.compile('<i class="icon icon-butterfly"></i><ul class="f-dropdown dropdown-double-columns">{{#each view.modules}}<li>{{#link-to "module" name class="umi-top-bar-dropdown-modules-item"}}<i class="umi-top-bar-module-icon umi-dock-module-{{unbound name}}"></i> <span>{{displayName}}</span>{{/link-to}}</li>{{/each}}</ul>')}.property(),modules:function(){return this.get("controller.modules")}.property(),click:function(a){var b=this.$();$(a.target).closest(".umi-top-bar-dropdown-modules-item").length&&b.removeClass("open")}})})}),define("topBar",["topBar/main"],function(a){return a}),define("divider/view",["App"],function(a){return function(){a.DividerView=Ember.View.extend({classNames:["off-canvas-wrap","umi-divider-wrapper","s-full-height"],didInsertElement:function(){this.fakeDidInsertElement()},willDestroyElement:function(){this.removeObserver("model")},modelChange:function(){this.fakeDidInsertElement()}.observes("model"),fakeDidInsertElement:function(){var a=this.$(),b=a.find(".umi-divider"),c=a.find(".umi-divider-left"),d=a.find(".umi-divider-right"),e=a.find(".magellan-content").find(".umi-columns.large-4");a.off("mousedown.umi.divider.toggle"),b.off("mousedown.umi.divider.proccess"),c.length?(a.on("mousedown.umi.divider.toggle",".umi-divider-left-toggle",function(){c.toggleClass("hide"),$(this).children(".icon").toggleClass("icon-left").toggleClass("icon-right")}),b.on("mousedown.umi.divider.proccess",function(b){0===b.button&&(c.removeClass("divider-virgin"),$("html").addClass("s-unselectable"),$("html").on("mousemove.umi.divider.proccess",function(b){var f=b.pageX-a.offset().left;f=150>f?150:f,f=f>500?500:f,f>a.width()-720?e.removeClass("large-4").addClass("large-12"):e.removeClass("large-12").addClass("large-4"),d.css({marginLeft:f+1}),c.css({width:f}),$("html").on("mouseup.umi.divider.proccess",function(){$("html").off("mousemove.umi.divider.proccess"),$("html").removeClass("s-unselectable")})}))})):d.css({marginLeft:""})}})}}),define("divider/main",["App","./view"],function(a,b){b()}),define("divider",["divider/main"],function(a){return a}),define("dock/controllers",["App"],function(a){return function(){a.DockController=Ember.ObjectController.extend({needs:["application","module"],modulesBinding:"controllers.application.modules",activeModuleBinding:"controllers.module.model"})}}),define("dock/view",["App"],function(a){return function(){var b,c=!1,d={},e={old:0,cur:0,def:0,coeff:1};a.DockView=Ember.View.extend({templateName:"partials/dock",classNames:["umi-dock","s-unselectable"],didInsertElement:function(){var a=this,b=a.$().find(".dock")[0];b.style.left=(b.parentNode.offsetWidth-b.offsetWidth)/2+"px",$(b).addClass("active"),b.style.marginLeft||(b.style.marginLeft=0);var c,f=function(a,b){d.proccess=!0;var f=$(b.target).closest(".dropdown-menu").size(),g=a.offsetLeft,h=a.offsetWidth,i=a.parentNode.offsetWidth;e.cur=b.clientX,e.old&&(e.def=e.old-e.cur),Math.abs(g)+h>i&&!f&&(e.def>0?(e.coeff=Math.abs(g)/b.clientX,c=Math.round(parseInt(a.style.marginLeft,10)+e.def*e.coeff),e.coeff>0&&c+parseInt(a.style.left,10)<-20&&(a.style.marginLeft=c+"px")):e.def<0&&(e.coeff=Math.abs((h-i+g)/(i-b.clientX)),c=Math.round(parseInt(a.style.marginLeft,10)+e.def*e.coeff),e.coeff>0&&i<h-20+(c+parseInt(a.style.left,10))&&(a.style.marginLeft=c+"px"))),e.old=b.clientX};$(b).mousemove(function(a){d.oldtime||(d.oldtime=new Date),d.curtime=new Date,(d.curtime-d.oldtime>700||d.proccess)&&f(this,a)}),$(window).on("resize.umi.dock",function(){setTimeout(function(){b.style.left=(b.parentNode.offsetWidth-b.offsetWidth)/2+"px"},0)}),$(b).find(".f-dropdown").on("click.umi.dock.component","a",function(){a.set("closeDropdown",!0),$(b).find(".dropdown").removeClass("open"),a.leaveDock(),setTimeout(function(){a.set("closeDropdown",!1)},300)})},mouseLeave:function(a){var b=this,c=b.$().find(".dock")[0];return e.old=!1,a.relatedTarget?void this.leaveDock():void $(document.body).bind("mouseover",function(a){$(c).hasClass("full")&&!$(a.target).closest(".dock").size()&&b.leaveDock(),$(this).unbind("mouseover")})},leaveDock:function(){var a=this,b=a.$().find(".dock")[0];c=!1,d.oldtime=!1,d.proccess=!1,$(b).find(".umi-dock-module-icon").stop().animate({margin:"9px 11px 9px",height:30,width:30},{duration:130,easing:"linear"}),$(b).animate({marginLeft:"0px"},{duration:130,easing:"linear",complete:function(){$(b).removeClass("full")}})},willDestroyElement:function(){$(window).off("resize.umi.dock")}});var f;a.DockModuleButtonView=Ember.View.extend({tagName:"li",classNames:["umi-dock-button","dropdown"],classNameBindings:["open"],open:!1,mouseEnter:function(){var a=this,e=this.$().closest(".dock"),f=this.$(),g=function(){if(a.set("open",!0),!c){c=!0,d.proccess=!1;var b=f.position().left+f[0].offsetWidth/2+(parseInt(e[0].style.marginLeft,10)||0);$(f[0].parentNode).find(".umi-dock-module-icon").stop().animate({height:48,width:48,margin:"8px 36px 28px"},{duration:280,step:function(a,c){this.parentNode.parentNode===f[0]&&(e[0].style.marginLeft=b-(c.elem.parentNode.parentNode.offsetLeft+c.elem.parentNode.offsetWidth/2)+"px")
},complete:function(){e.addClass("full"),d.proccess=!0}})}};!b||clearTimeout(b),b=setTimeout(function(){g()},120)},mouseLeave:function(){b&&clearTimeout(b),f&&clearInterval(f),this.set("open",!1)}})}}),define("dock/main",["./controllers","./view","App"],function(a,b){a(),b()}),define("dock",["dock/main"],function(a){return a}),define("tableControl/controllers",["App"],function(a){return function(){a.TableControlMixin=Ember.Mixin.create(a.i18nInterface,{collectionName:null,dictionaryNamespace:"tableControl",hasContextMenu:!1,localDictionary:function(){var a=this.get("control")||{};return a.i18n}.property(),objects:null,fieldsList:null,objectChange:function(){Ember.run.once(this,"updateObjectDeleted")}.observes("objects.@each.isDeleted"),updateObjectDeleted:function(){var a=this.get("objects");a.forEach(function(b){b&&b.get("isDeleted")&&a.removeObject(b)})},getObjects:function(){var a=this;a.send("showLoader");var b=this.get("query")||{},c=a.get("collectionName"),d=a.store.updateCollection(c,b),e=a.get("orderByProperty"),f=e&&e.property?e.property:"id",g=e&&"direction"in e?e.direction:!0;d.then(function(){a.send("hideLoader")});var h=Ember.ArrayProxy.createWithMixins(Ember.SortableMixin,{content:d,sortProperties:[f],sortAscending:g});this.set("objects",h)},limit:25,offset:0,total:0,orderByProperty:null,order:function(){var a=this.get("orderByProperty");if(a){var b={};return b[a.property]=a.direction?"ASC":"DESC",b}}.property("orderByProperty"),nativeFieldsList:null,nativeFields:function(){var a=this.get("nativeFieldsList");return"array"===Ember.typeOf(a)&&a.length?a=a.join(","):void 0}.property("nativeFieldsList"),relatedFieldsList:null,relatedFields:function(){var a=this.get("relatedFieldsList");return"object"===Ember.typeOf(a)&&"{}"!==JSON.stringify(a)?a:void 0}.property("relatedFieldsList"),collectionFilterParams:null,filterParams:null,filters:function(){var a,b={},c=this.get("filterParams")||{},d=this.get("collectionFilterParams")||{};for(a in d)d.hasOwnProperty(a)&&("string"!==Ember.typeOf(d[a])||d[a].length?b[a]=d[a]:delete b[a]);for(a in c)c.hasOwnProperty(a)&&("string"!==Ember.typeOf(c[a])||c[a].length?b[a]=c[a]:delete b[a]);return b}.property("filterParams.@each","collectionFilterParams.@each"),setFilters:function(a,b){this.propertyWillChange("filterParams"),this.set("filterParams",null);var c={};c[a]=b,this.set("filterParams",c),this.propertyDidChange("filterParams")},query:function(){var a={},b=this.get("nativeFields"),c=this.get("relatedFields"),d=this.get("limit"),e=this.get("filters"),f=this.get("offset"),g=this.get("order");return b&&(a.fields=b),c&&(a["with"]=c),d&&(a.limit=d),e&&(a.filters=e),f&&(a.offset=f*d),g&&(a.orderBy=g),a}.property("limit","filters","offset","order","nativeFields","relatedFields"),updateContent:function(){var a,b=this.get("store"),c=this.get("collectionName"),d=b.metadataFor(c),e=b.modelFor(c),f=this.get("control.meta.form.elements")||[],g=this.get("control.meta.defaultFields")||[];for(a=0;a<f.length;a++)g.contains(f[a].dataSource)||(f.splice(a,1),--a);var h=[],i={},j=this.get("control.params.filter")||{};e.eachAttribute(function(a){var b=f.findBy("dataSource",a);b?h.push(b.dataSource):"active"===a?h.push("active"):"trashed"!==a||Ember.get(j,"trashed")||(j.trashed="equals(0)")}),e.eachRelationship(function(a,b){var c,d;if("belongsTo"===b.kind)for(c=0;c<f.length;c++)d=f[c].dataSource,d===a?i[a]=i[a]||[]:0===d.indexOf(a+".",0)&&(i[a]=i[a]||[],i[a].push(d.slice(a.length+1)));else if("hasMany"===b.kind||"manyToMany"===b.kind)for(c=0;c<f.length;c++)d=f[c].dataSource,(d===a||0===d.indexOf(a+".",0))&&(f.splice(c,1),--c);i[a]&&(i[a]=i[a].join(","))}),this.set("withoutChangeQuery",!0),this.setProperties({nativeFieldsList:h,relatedFieldsList:i,offset:0,orderByProperty:null,total:0,collectionFilterParams:j}),this.set("withoutChangeQuery",!1),this.getObjects(),Ember.run.next(this,function(){var a=this;this.get("objects.content").then(function(){a.set("total",d.total),a.set("fieldsList",f)})})},contextChange:null,queryChanged:function(){this.get("withoutChangeQuery")||Ember.run.once(this,"getObjects")}.observes("query"),contextToolbar:function(){var a=this.get("control")||{};return a.contextToolbar}.property("model"),toolbar:function(){var a=this.get("control")||{};return a.toolbar||[]}.property("model"),actions:{orderByProperty:function(a,b){this.set("orderByProperty",{property:a,direction:b})}}}),a.TableControlController=Ember.ObjectController.extend(a.TableControlMixin,{needs:["component"],componentNameBinding:"controllers.component.name",hasContextMenu:!0,collectionName:function(){var a=this.get("controllers.component.dataSource.name");return a||(a=this.get("controllers.component.selectedContext")),a}.property("controllers.component.dataSource.name","controllers.component.selectedContext"),itemController:"tableControlContextToolbarItem",updateObjectDeleted:function(){var a=this.get("objects");a.forEach(function(b){b&&b.get("isDeleted")&&a.get("content.content.content").removeObject(b)})},contextChange:function(){this.updateContent()}.observes("content.object.id").on("init"),objectChange:function(){Ember.run.once(this,"updateObjectDeleted")}.observes("objects.@each.isDeleted")}),a.TableControlContextToolbarItemController=Ember.ObjectController.extend({objectBinding:"content",componentNameBinding:"parentController.componentName",isSelected:function(){var a=this.get("object.guid");return a===this.get("parentController.control.meta.activeObjectGuid")}.property("parentController.control.meta.activeObjectGuid")}),a.TableControlSharedController=Ember.ObjectController.extend(a.TableControlMixin,{collectionName:function(){return this.get("control.collectionName")}.property("control.collectionName"),contextChange:function(){this.updateContent()}.observes("collectionName").on("init"),actions:{executeBehaviour:function(a,b){var c=this.get("control.behaviour."+a);"function"===Ember.typeOf(c)?c(this,b):Ember.warn("Behaviour for row click did not set.")}}})}}),define("tableControl/view",["App","toolbar"],function(a){return function(){a.TableControlViewMixin=Ember.Mixin.create({templateName:"partials/tableControl",classNames:["umi-table-control"],iScroll:null,scrollUpdate:function(){var a=this,b=this.$(),c=this.get("controller.objects.content"),d=this.get("iScroll"),e=function(){Ember.run.scheduleOnce("afterRender",a,function(){var a=b.find(".umi-table-control-content-fixed-right")[0],c=b.find(".umi-table-control-header-center")[0];a.style.marginTop=0,c.style.marginLeft=0,setTimeout(function(){d.refresh(),d.scrollTo(0,0)},0)})};c&&d&&c.then(function(){e()})}.observes("controller.objects").on("didInsertElement"),didInsertElement:function(){var b=this.$(),c=this,d=this.get("controller.objects.content"),e=b.find(".umi-table-control-content-fixed-right")[0],f=b.find(".umi-table-control-header-center")[0],g=b.find(".umi-table-control-content-row-size")[0];if(d){var h=b.find(".s-scroll-wrap");d.then(function(d){d.length&&Ember.run.scheduleOnce("afterRender",c,function(){var d=new IScroll(h[0],a.config.iScroll);c.set("iScroll",d),d.on("scroll",function(){e.style.marginTop=this.y+"px",f.style.marginLeft=this.x+"px"}),$(window).on("resize.umi.tableControl",function(){setTimeout(function(){e.style.marginTop=d.y+"px",f.style.marginLeft=d.x+"px"},100)}),b.on("mousedown.umi.tableControl",".umi-table-control-column-resizer",function(){$("html").addClass("s-unselectable");var a=this;$(a).addClass("on-resize");var b=a.parentNode.parentNode,c=b.className;c=c.substr(c.indexOf("column-id-"));var e,h=$(b).offset().left,i=g.querySelector("."+c);$("body").on("mousemove.umi.tableControl",function(a){a.stopPropagation(),e=a.pageX-h,e>=60&&b.offsetWidth>59&&(b.style.width=i.style.width=e+"px")}),$("body").on("mouseup.umi.tableControl",function(){$("html").removeClass("s-unselectable"),$(a).removeClass("on-resize"),$("body").off("mousemove"),$("body").off("mouseup.umi.tableControl"),d.refresh(),f.style.marginLeft=d.x+"px"})});var i=function(a){for(var b=$(a).hasClass("umi-table-control-content-row"),c=a.parentNode.querySelectorAll(b?".umi-table-control-content-row":".umi-table-control-column-fixed-cell"),d=0;d<c.length&&c[d]!==a;d++);var f=e.querySelectorAll(".umi-table-control-column-fixed-cell");return b||(a=h[0].querySelectorAll(".umi-table-control-content-row")[d]),[a,f[d]]};b.on("mouseenter.umi.tableControl",".umi-table-control-content-row, .umi-table-control-column-fixed-cell",function(){var a=i(this);$(a).addClass("hover")}),b.on("mouseleave.umi.tableControl",".umi-table-control-content-row, .umi-table-control-column-fixed-cell",function(){var a=i(this);$(a).removeClass("hover")})})})}},willDestroyElement:function(){$(window).off(".umi.tableControl"),this.get("controller").removeObserver("query")},paginationView:Ember.View.extend({classNames:["right","umi-table-control-pagination"],counter:function(){var a="из",b=this.get("controller.limit"),c=this.get("controller.offset")+1,d=this.get("controller.total"),e=c*b,f=e-b+1;return e=d>e?e:d,f+"-"+e+" "+a+" "+d}.property("controller.limit","controller.offset","controller.total"),prevButtonView:Ember.View.extend({classNames:["button","secondary","tiny"],classNameBindings:["isActive::disabled"],isActive:function(){return this.get("controller.offset")}.property("controller.offset"),click:function(){this.get("isActive")&&this.get("controller").decrementProperty("offset")}}),nextButtonView:Ember.View.extend({classNames:["button","secondary","tiny"],classNameBindings:["isActive::disabled"],isActive:function(){var a=this.get("controller.limit"),b=this.get("controller.offset")+1,c=this.get("controller.total");return c>a*b}.property("controller.limit","controller.offset","controller.total"),click:function(){this.get("isActive")&&this.get("controller").incrementProperty("offset")}}),limitView:Ember.View.extend({tagName:"input",classNames:["s-margin-clear"],attributeBindings:["value","type"],value:function(){return this.get("controller.limit")}.property("controller.limit"),type:"text",keyDown:function(a){13===a.keyCode&&this.get("controller").setProperties({offset:0,limit:this.$()[0].value})}})}),sortHandlerView:Ember.View.extend({classNames:["button","flat","tiny","square","sort-handler"],classNameBindings:["isActive:active"],sortAscending:!0,isActive:function(){var a=this.get("controller.orderByProperty");return a?this.get("propertyName")===a.property:void 0}.property("controller.orderByProperty"),click:function(){var a=this.get("propertyName");$(".umi-table-control-header-cell .icon-top-thin:not(.active)").removeClass("icon-top-thin").addClass("icon-bottom-thin"),this.get("isActive")&&this.toggleProperty("sortAscending");var b=this.get("sortAscending");this.get("controller").send("orderByProperty",a,b)}}),hasRowEvent:!1,rowEvent:function(){},rowView:Ember.View.extend({tagName:"tr",classNames:["umi-table-control-content-row"],classNameBindings:["object.type","isActive::umi-inactive","parentView.hasRowEvent:s-pointer","isSelected:selected"],isActive:function(){var a=this.get("object"),b=!1;return a.eachAttribute(function(a){"active"===a&&(b=!0)}),b?a.get("active"):!0}.property("object.active"),isSelected:function(){var a=this.get("object.guid");return a===this.get("controller.control.meta.activeObjectGuid")}.property("controller.control.activeObjectGuid"),attributeBindings:["objectId"],objectIdBinding:"object.id",click:function(){this.get("parentView.hasRowEvent")&&!this.get("isSelected")&&this.get("parentView").rowEvent(this.get("object"))}}),filterRowView:Ember.View.extend({filterType:null,template:function(){var a=this.get("column"),b="";switch(Ember.get(a,"attributes.type")){case"text":this.set("filterType","text"),b='<input type="text" class="table-control-filter-input"/>'}return Ember.Handlebars.compile(b)}.property("column"),didInsertElement:function(){var a=this,b=this.$(),c=b.children("input"),d=this.get("filterType");switch(c.on("focus",function(){$(this).closest(".umi-table-control-row").find(".table-control-filter-input").val("")}),d){case"text":c.on("keypress.umi.tableControl.filters",function(b){13===b.keyCode&&a.setFilter("like(%"+this.value+"%)")})}},setFilter:function(a){this.get("controller").setFilters(this.get("column.dataSource"),a)}})}),a.TableCellContentView=Ember.View.extend({classNames:["umi-table-control-content-cell-div"],classNameBindings:["columnId"],promise:null,template:function(){function b(b){return b="null"===Ember.typeOf(b)?"":a.Utils.htmlEncode(b)}var c,d,e,f,g="",h=this;try{switch(d=this.get("object"),c=this.get("column"),c.type){case"checkbox":g='<span {{bind-attr class="view.object.'+c.dataSource+':umi-checkbox-state-checked:umi-checkbox-state-unchecked"}}></span>&nbsp;';break;case"checkboxGroup":case"multiSelect":e=d.get(c.dataSource),"array"===Ember.typeOf(e)&&(g=e.join(", "));break;case"datetime":if(e=d.get(c.dataSource))try{e=JSON.parse(e),g=Ember.get(e,"date")}catch(i){this.get("controller").send("backgroundError",i)}break;default:f=c.dataSource.split("."),this.checkRelation(f[0])?f.length>1?(e=d.get(f[0]),"instance"===Ember.typeOf(e)&&(e.then(function(a){e=a.get(f[1]),e=b(e),h.set("promiseProperty",e)}),g="{{view.promiseProperty}}")):g="{{view.object."+c.dataSource+".displayName}}":(e=d.get(c.dataSource),e=b(e),g=e)}}catch(i){this.get("controller").send("backgroundError",i)}finally{return Ember.Handlebars.compile(g)}}.property("column"),checkRelation:function(a){var b=this.get("object"),c=!1;return b.eachRelationship(function(b){a===b&&(c=!0)}),c}}),a.TableControlView=Ember.View.extend(a.TableControlViewMixin,{componentNameBinding:"controller.controllers.component.name",hasRowEvent:function(){var a=this.get("controller.control.params.objectsEditable");return a=a===!1?!1:!0}.property("controller.control.params.objectsEditable"),rowEvent:function(a){a.get("meta.editLink")&&this.get("controller").transitionToRoute(a.get("meta.editLink").replace(Ember.get(window,"UmiSettings.baseURL"),""))},willDestroyElement:function(){this.get("controller").removeObserver("objects.@each.isDeleted"),this.get("controller").removeObserver("content.object.id")}}),a.TableControlSharedView=Ember.View.extend(a.TableControlViewMixin,{componentNameBinding:null,hasRowEvent:!0,rowEvent:function(a){this.get("controller").send("executeBehaviour","rowEvent",a)},willDestroyElement:function(){this.get("controller").removeObserver("control.collectionName")}}),a.TableControlContextToolbarView=Ember.View.extend({tagName:"ul",classNames:["button-group","table-context-toolbar"],elementView:Ember.View.extend(a.ToolbarElement,{splitButtonView:function(){var b,c,d,e=a.SplitButtonView.extend(a.SplitButtonDefaultBehaviourForComponent,a.SplitButtonSharedSettingsBehaviour),f=this.get("context.behaviour.name"),g={};if(f){b=Ember.get(a.splitButtonBehaviour,f)||{};for(var h in b)b.hasOwnProperty(h)&&(g[h]=b[h])}var i=this.get("context.behaviour.choices");if("contextMenu"===f&&"array"===Ember.typeOf(i))for(c=0;c<i.length;c++){d="";var j=Ember.get(a.splitButtonBehaviour,i[c].behaviour.name);j&&(d=j.actions[i[c].behaviour.name],d&&("object"!==Ember.typeOf(g.actions)&&(g.actions={}),g.actions[i[c].behaviour.name]=d))}return g.classNames=["white square"],g.label=null,e=e.extend(g)}.property()})})}}),define("tableControl/main",["./controllers","./view","App"],function(a,b){a(),b()}),define("tableControl",["tableControl/main"],function(a){return a}),define("fileManager/main",["App"],function(a){a.FileManagerView=Ember.View.extend({tagName:"div",classNames:["umi-file-manager s-full-height"],layout:Ember.Handlebars.compile('<div id="elfinder"></div>'),fileSelect:function(a){return a},init:function(){this._super();var a=this.get("templateParams");"object"===Ember.typeOf(a)&&this.setProperties(a)},didInsertElement:function(){var a=this;$("#elfinder").elfinder({url:window.UmiSettings.baseApiURL+"/files/manager/action/connector",lang:"ru",getFileCallback:function(b){a.fileSelect(b)},uiOptions:{toolbar:[["back","forward"],["reload"],["getfile"],["mkdir","mkfile","upload"],["download"],["copy","cut","paste"],["rm"],["duplicate","rename","edit"],["view"],["help"]]}}).elfinder("instance"),$(".elfinder-navbar").on("mousedown.umi.fileManager",".elfinder-navbar-div",function(){$(".elfinder-navbar").children().removeClass("ui-state-active"),$(this).addClass("ui-state-active")})},willDestroyElement:function(){$(window).off(".umi.fileManager")}})}),define("fileManager",["fileManager/main"],function(a){return a}),define("treeSimple/main",["App"],function(a){a.TreeSimpleView=Ember.View.extend({classNames:["row","s-full-height"],templateName:"partials/treeSimple/list"}),a.TreeSimpleItemView=Ember.View.extend({tagName:"li",templateName:"partials/treeSimple/item",isExpanded:!0,checkExpanded:function(){var a=this.get("controller.target.router.state.params");a&&"settings.component"in a&&a["settings.component"].component===this.get("context.name")&&this.set("isExpanded",!0)},nestedSlug:function(){var a="";return".TreeSimpleItemView"===this.get("parentView").constructor.toString()&&(a=this.get("parentView").get("context.name")+"."),a+=this.get("context.name")}.property(),actions:{expanded:function(){this.toggleProperty("isExpanded")}}})}),define("treeSimple",["treeSimple/main"],function(a){return a}),define("tree/controllers",["App"],function(a){return function(){a.TreeControlController=Ember.ObjectController.extend({needs:["component","context"],collectionNameBinding:"controllers.component.dataSource.name",isTrashableCollection:null,properties:function(){var a=["displayName","order","active","childCount","type","locked"],b=this.get("collectionName"),c=this.get("store").modelFor(b),d=Ember.get(c,"fields");d=d.keys.list;for(var e=0;e<a.length;e++)d.contains(a[e])||(a.splice(e,1),--e);return this.set("isTrashableCollection",d.contains("trashed")),a}.property("model"),contextToolbar:function(){return Ember.get(this.get("controllers.component"),"sideBarControl.contextToolbar")}.property("controllers.component.sideBarControl.contextToolbar"),root:function(){var a=this.get("collectionName"),b=this.get("controllers.component.sideBarControl");if(b){var c=Ember.Object.extend({displayName:Ember.get(b,"params.rootNodeName")||"",root:!0,id:"root",active:!0,type:"base",typeKey:a,childCount:1}),d=c.create({});return d}}.property("model"),activeContext:function(){return this.get("controllers.context.model")}.property("controllers.context.model"),isLoading:!1,actions:{updateSortOrder:function(a,b,c,d){var e,f,g,h,i,j=this,k=this.get("collectionName"),l=d||[],m={},n=j.get("store"),o=n.all(k),p=j.get("properties");return j.send("showLoader"),g=o.findBy("id",a),m.object={id:g.get("id"),version:g.get("version")},i=g.get("parent.id")||"root",b&&"root"!==b&&(h=o.findBy("id",b),m.branch={id:h.get("id"),version:h.get("version")}),c&&(f=o.findBy("id",c),m.sibling={id:f.get("id"),version:f.get("version")}),e=j.get("controllers.component.settings.actions.move.source"),$.ajax({type:"POST",url:e,data:JSON.stringify(m),dataType:"json",contentType:"application/json",global:!1,success:function(){l.push(a);var c={};b!==i&&(b&&"root"!==b&&(l.push(b),c.currentParent=b),i&&"root"!==i&&(l.push(i),c.oldParent=i));var d,e={};return e.fields=p.join(","),e["filters[id]"]="equals("+l.join(",")+")",d=n.updateCollection(k,e),d.then(function(d){var e;if("root"!==b&&(g=d.findBy("id",a),n.find(k,b).then(function(a){g.set("parent",a)})),b!==i){for(var f in c)c.hasOwnProperty(f)&&(e=o.findBy("id",c[f]),e.trigger("needReloadHasMany","currentParent"===f?"add":"remove",g));b===i||"root"!==b&&"root"!==i||j.get("controllers.component").trigger("needReloadRootElements","root"===b?"add":"remove",g)}j.send("hideLoader")})},error:function(a){j.send("backgroundError",a),j.send("hideLoader")}})},showLoader:function(){this.set("isLoading",!0)},hideLoader:function(){this.set("isLoading",!1)}}}),a.TreeControlContextToolbarController=Ember.ObjectController.extend({needs:["component"],componentNameBinding:"controllers.component.name"})}}),define("tree/views",["App","toolbar"],function(a){return function(){a.TreeControlView=Ember.View.extend({templateName:"partials/treeControl",classNames:["row","s-full-height","s-unselectable"],iScroll:null,activeContextChange:function(){Ember.run.once(this,"expandBranch")}.observes("controller.activeContext").on("didInsertElement"),expandBranch:function(){var a=this.$(),b=this.get("controller.activeContext"),c=function(b){if(a.length){var c=a.find("[data-id="+b+"]");return c.length?!0:!1}};if(b){var d=[],e=[],f=[];d.push("root"),"root"!==b.get("id")&&b.get("mpath")&&(e=b.get("mpath").without(parseFloat(b.get("id")))||[]),e=d.concat(e);for(var g=0,h=e.length;h>g;g++)c(e[g])?this.send("expandItem",e[g]):f.push(e[g]);this.set("needsExpandedItems",f)}},needsExpandedItems:"",actions:{expandItem:function(a){if(this.$()){var b=this.$().find("[data-id="+a+"]");b.length&&(b=Ember.View.views[b[0].id],b&&!b.get("isExpanded")&&b.set("isExpanded",!0))}}},didInsertElement:function(){function b(a,b){b=b.toUpperCase();for(var c=a.nextElementSibling;c&&c.tagName!==b;)c=c.nextElementSibling;return c}var c=this.$().find(".umi-tree-wrapper")[0],d=new IScroll(c,a.config.iScroll);this.set("iScroll",d);var e,f=this,g=function(a){var b=Ember.View.views[a.id];b.get("hasChildren")&&b.set("isExpanded",!0)},h=function(a,b,c){b.style.top=a.pageY+c+"px",b.style.left=a.pageX+c+"px"},i=function(a,c){var d,e=c.parentNode.parentNode,i=document.createElement("li"),j=document.createElement("span"),k=2;$("html").addClass("s-unselectable"),f.$().addClass("drag-inside"),i.className="umi-tree-placeholder",i.setAttribute("data-id",c.parentNode.parentNode.getAttribute("data-id")),$(e).addClass("hide"),i=e.parentNode.insertBefore(i,e),j.className="umi-tree-ghost",j.innerHTML='<i class="'+c.className+'"></i>'+$(c.parentNode).children("a").text(),j=document.body.appendChild(j),h(a,j,k),$(document).on("mousemove","body, .umi-tree-ghost",function(a){d&&clearTimeout(d),h(a,j,k);var c,e,f,l,m=document.elementFromPoint(a.clientX,a.clientY);if($(m).closest(".umi-tree").length&&(e=$(m).closest("li")[0],e&&e!==i&&"root"!==e.getAttribute("data-id")))if(f=e.offsetHeight,l=e.getBoundingClientRect().top,a.clientY>l+parseInt(.7*f,10))i=i.parentNode.removeChild(i),c=b(e,"li"),i=c?e.parentNode.insertBefore(i,c):e.parentNode.appendChild(i);else if(a.clientY<l+parseInt(.3*f,10))i=i.parentNode.removeChild(i),i=e.parentNode.insertBefore(i,e);else{var n=document.createElement("ul");n.className="umi-tree-list",n.setAttribute("data-parent-id",e.getAttribute("data-id")),i=i.parentNode.removeChild(i),i=n.appendChild(i),n=e.appendChild(n),d=setTimeout(function(){g(e)},500)}}),$(document).on("mouseup",function(a){var b=document.elementFromPoint(a.clientX,a.clientY),c=null,d=$(b).closest(".umi-tree-list")[0];if($(document).off("mousemove","body, .umi-tree-ghost"),$(document).off("mouseup"),j.parentNode.removeChild(j),d&&!$(d).hasClass("umi-tree")){!function k(a){var b=a.previousElementSibling;b&&($(b).hasClass("hide")||"LI"!==b.tagName)?k(b):c=b?b.getAttribute("data-id"):null}(i);var g=[];!function l(a){var b=a.nextElementSibling;b&&($(b).hasClass("hide")||"LI"!==b.tagName?l(b):g.push(b.getAttribute("data-id")))}(i);var h=d.getAttribute("data-parent-id");f.get("controller").send("updateSortOrder",i.getAttribute("data-id"),h,c,g),f.send("expandItem",h)}i.parentNode&&i.parentNode.removeChild(i),$(e).removeClass("hide"),$("html").removeClass("s-unselectable")})};this.$().on("mousedown",".icon.move",function(a){if(1===a.originalEvent.which){var b=this;e=setTimeout(function(){i(a,b)},200)}}),this.$().on("mouseup",".icon.move",function(){e&&clearTimeout(e)})},willDestroyElement:function(){this.get("controller").removeObserver("activeContext")}}),a.TreeControlItemView=Ember.View.extend({item:null,treeControlView:null,templateName:"partials/treeControl/treeItem",tagName:"li",classNames:["umi-tree-list-li"],classNameBindings:["item.isDragged:hide","item.isDeleted:hide"],attributeBindings:["dataId:data-id"],dataId:function(){return this.get("item.id")}.property("item.id"),iconTypeClass:function(){var a,b=this.get("item");if("root"===b.get("id"))a="icon-open-folder";else switch(b.get("type")){case"system":a="icon-settings";break;default:a="icon-document"}return a}.property("item.type"),editLink:function(){var a=this.get("item.meta.editLink");return a}.property("item"),allowMove:function(){var a=this.get("item");return"root"===a.get("id")||a.get("locked")?void 0:!0}.property("item.id"),savedDisplayName:function(){return this.get("root"===this.get("item.id")?"item.displayName":"item._data.displayName")}.property("item.currentState.loaded.saved"),isActiveContext:function(){return this.get("controller.activeContext.id")===this.get("item.id")}.property("controller.activeContext.id"),childrenList:function(){return this.getChildren()}.property("item"),hasChildren:Ember.computed.bool("item.childCount"),getChildren:function(){var a,b,c=this.get("item"),d=c.get("typeKey")||c.constructor.typeKey,e=this,f=e.get("controller.properties").join(",");b="root"===c.get("id")?"null()":c.get("id");var g={"filters[parent]":b,fields:f};e.get("controller.isTrashableCollection")&&(g["filters[trashed]"]="equals(0)"),a=this.get("controller.store").updateCollection(d,g),"root"!==c.get("id")&&a.then(function(a){for(var b=0;b<a.length;b++)a[b].set("parent",c)});var h=Ember.ArrayProxy.createWithMixins(Ember.SortableMixin,{content:a,sortProperties:["order"],sortAscending:!0});return h},scrollUpdate:function(){var a=this;setTimeout(function(){var b=a.get("treeControlView.iScroll");b&&setTimeout(function(){b.refresh()},100)},0)},scrollNeedUpdate:function(){this.scrollUpdate()}.observes("childrenList.length"),inActive:function(){return this.get("item.active")===!1?!0:!1}.property("item.active"),isExpanded:!1,expandActiveContext:function(){if(!this.get("isExpanded")){var a=this.get("item.id"),b=this.get("treeControlView"),c=b.get("needsExpandedItems");"root"===a?this.set("isExpanded",!0):c&&c.contains(parseFloat(a))&&(b.set("needsExpandedItems",c.without(parseFloat(a))),this.set("isExpanded",!0))}},actions:{expanded:function(){this.toggleProperty("isExpanded");this.scrollUpdate()}},didInsertElement:function(){Ember.run.once(this,"expandActiveContext")},init:function(){this._super();var a=this,b=this.get("item");"root"===b.get("id")?a.get("controller.controllers.component").on("needReloadRootElements",function(b,c){"add"===b?a.get("childrenList").pushObject(c):"remove"===b&&a.get("childrenList").removeObject(c)}):this.get("item").on("needReloadHasMany",function(b,c){"add"===b?a.get("childrenList").pushObject(c):a.get("childrenList").removeObject(c)})},willDestroyElement:function(){this.removeObserver("childrenList.length")}}),a.TreeControlContextToolbarView=Ember.View.extend({tagName:"ul",classNames:["button-group","umi-tree-context-toolbar","right"],elementView:Ember.View.extend(a.ToolbarElement,{splitButtonView:function(){var b,c,d,e=a.SplitButtonView.extend(a.SplitButtonDefaultBehaviourForComponent,a.SplitButtonSharedSettingsBehaviour),f=this.get("context.behaviour.name"),g={};if(f){b=Ember.get(a.splitButtonBehaviour,f)||{};for(var h in b)b.hasOwnProperty(h)&&(g[h]=b[h])}var i=this.get("context.behaviour.choices");if("contextMenu"===f&&"array"===Ember.typeOf(i))for(c=0;c<i.length;c++){var j=Ember.get(a.splitButtonBehaviour,i[c].behaviour.name);j&&(d=j.actions[i[c].behaviour.name],d&&("object"!==Ember.typeOf(g.actions)&&(g.actions={}),g.actions[i[c].behaviour.name]=d))}return g.actions.sendActionForBehaviour=function(a){var b=this.get("controller.model");this.send(a.name,{behaviour:a,object:b})},g.classNames=["tiny white square"],g.label=null,e=e.extend(g)}.property()})})}}),define("tree/main",["App","./controllers","./views"],function(a,b,c){b(),c()}),define("tree",["tree/main"],function(a){return a}),define("partials/forms/elements/mixins",["App"],function(a){return function(){a.InputValidate=Ember.Mixin.create({validator:null,validateElement:null,focusOut:function(){if("collection"===this.get("validator")){var a=this.get("object");a.filterProperty(this.get("meta.dataSource")),a.validateProperty(this.get("meta.dataSource"))}},focusIn:function(){if("collection"===this.get("validator")){var a=this.get("object");a.clearValidateForProperty(this.get("meta.dataSource"))}},validateErrorsTemplate:function(){var a=this.get("meta.dataSource"),b="{{#if view.object.validErrors."+a+'}}<small class="error">{{view.object.validErrors.'+a+"}}</small>{{/if}}";return b}}),a.SerializedValue=Ember.Mixin.create({path:null,value:null,inputIsObservable:!1,objectIsObservable:!1,computeValue:function(a,b,c){return Ember.set(a,b,c),a},setValueForObject:function(){var a,b,c,d,e=this,f="";try{"instance"===Ember.typeOf(e.get("object"))&&(a=e.get("value"),b=e.get("path"),a=Ember.isNone(a)?"":a,c=e.get("object."+e.get("meta.dataSource"))||"",a?(c&&(c=JSON.parse(c)),d=Ember.get(c,b),d=Ember.isNone(d)?"":d,d!==a&&(a&&(f=e.computeValue(c,b,a),f=JSON.stringify(f)),e.get("object").set(e.get("meta.dataSource"),f))):c!==a&&e.get("object").set(e.get("meta.dataSource"),f))}catch(g){e.get("controller").send("backgroundError",g)}},setInputValue:function(){var a=this,b=a.get("path"),c=a.get("object."+a.get("meta.dataSource")),d=a.get("value");d=Ember.isNone(d)?"":d;var e;try{c?(c=JSON.parse(c),e=Ember.get(c,b),e=Ember.isNone(e)?"":e,Ember.set(c,b,e),e!==d&&a.set("value",e)):c!==d&&a.set("value","")}catch(f){a.get("controller").send("backgroundError",f)}},init:function(){this._super();var a,b=this,c=this.get("path");try{"instance"===Ember.typeOf(b.get("object"))?(a=b.get("object."+b.get("meta.dataSource"))||"{}",a=JSON.parse(a),b.set("value",Ember.get(a,c)||""),b.get("inputIsObservable")&&b.addObserver("value",function(){Ember.run.once(this,"setValueForObject")}),b.get("objectIsObservable")&&b.addObserver("object."+b.get("meta.dataSource"),function(){Ember.run.once(b,"setInputValue")})):b.set("value",b.get("meta.value"))}catch(d){b.get("controller").send("backgroundError",d)}},willDestroyElement:function(){var a=this;"instance"===Ember.typeOf(a.get("object"))&&(a.removeObserver("object."+a.get("meta.dataSource")),a.removeObserver("value"))}})}}),define("partials/forms/elements/wysiwyg/main",["App"],function(a){return function(){CKEDITOR.on("dialogDefinition",function(b){for(var c=b.editor,d=b.data.definition,e=d.contents.length,f=(b.data.name,{viewParams:{popupType:"fileManager",title:a.i18n.getTranslate("Select file")},templateParams:{fileSelect:function(a){var b=this;window.CKEDITOR.tools.callFunction(c._.filebrowserFn,Ember.get(a,"url")),b.get("controller").send("closePopup")}}}),g=0;e>g;g++){var h=d.contents[g].get("browse");null!==h&&(h.label=a.i18n.getTranslate("File manager"),0===g&&(h.style="display: inline-block; margin-top: 15px; margin-left: auto; margin-right: auto;"),h.hidden=!1,h.onClick=function(){c._.filebrowserSe=this;var b=$(".cke_dialog");b.addClass("umi-blur");var d=$(".cke_dialog_background_cover");d.addClass("hide");var e=function(){b.removeClass("umi-blur"),d.removeClass("hide")};f.viewParams.beforeClose=e,a.__container__.lookup("route:application").send("showPopup",f)})}}),a.HtmlEditorView=Ember.View.extend({classNames:["ckeditor-row"],ckeditor:null,template:function(){var a="{{textarea value=view.meta.attributes.value placeholder=view.meta.placeholder name=view.meta.attributes.name}}";return Ember.Handlebars.compile(a)}.property(),didInsertElement:function(){var b=a.config.CkEditor(),c=this,d=this.$().children("textarea");d.css({height:b.height});var e=CKEDITOR.replace(d[0].id,b);c.set("ckeditor",e)},willDestroyElement:function(){this.get("ckeditor").destroy()}}),a.HtmlEditorCollectionView=Ember.View.extend(a.InputValidate,{classNames:["ckeditor-row"],ckeditor:null,textareaId:function(){return"textarea-"+this.get("elementId")}.property(),template:function(){var a='<textarea id="{{unbound view.textareaId}}" placeholder="{{unbound view.meta.placeholder}}" name="{{unbound view.meta.attributes.name}}">{{unbound view.object.'+this.get("meta.dataSource")+"}}</textarea>",b=this.validateErrorsTemplate();
return Ember.Handlebars.compile(a+b)}.property(),setTextareaValue:function(a){if(!this.get("isDestroying")&&!this.get("isDestroyed")&&this.$()&&this.$().children("textarea").length){var b=this.get("object."+this.get("meta.dataSource"));a&&a.getData()!==b&&a.setData(b)}},updateContent:function(a,b){var c=this;a.editor.checkDirty()&&c.get("object").set(c.get("meta.dataSource"),b.getData())},didInsertElement:function(){Ember.run.next(this,function(){var b=this,c=a.config.CkEditor(),d=this.$().children("textarea");d.css({height:c.height});var e=CKEDITOR.replace(d[0].id,c);b.set("ckeditor",e),e.on("blur",function(a){Ember.run.once(b,"updateContent",a,e)}),e.on("key",function(a){Ember.run.once(b,"updateContent",a,e)}),b.addObserver("object."+b.get("meta.dataSource"),function(){Ember.run.next(b,"setTextareaValue",e)})})},willDestroyElement:function(){var a=this;a.removeObserver("object."+a.get("meta.dataSource")),a.get("ckeditor").destroy()}})}}),define("partials/forms/elements/select/main",["App"],function(a){return function(){a.SelectView=Ember.Select.extend(a.InputValidate,{attributeBindings:["meta.dataSource:name"],optionLabelPath:function(){return"content.label"}.property(),optionValuePath:function(){return"content.value"}.property(),prompt:function(){var b,c=this.get("meta.choices");if(c&&"array"===Ember.typeOf(c)&&(b=c.findBy("value","")),b)return b.label;var d="Nothing is selected",e=a.i18n.getTranslate(d,"form");return e?e:d}.property("meta.placeholder"),content:null,init:function(){this._super(),this.set("selection",this.get("object.choices").findBy("value",this.get("object.value"))),this.set("content",this.get("object.choices"))},didInsertElement:function(){var a=this.$().find("option")[0],b=this.get("meta.validators")||[];b=b.findBy("type","required"),!a.value&&b&&(a.disabled=!0)}}),a.SelectCollectionView=Ember.Select.extend(a.InputValidate,{attributeBindings:["meta.dataSource:name"],isLazy:!1,optionLabelPath:function(){return this.get("isLazy")?"content.displayName":"content.label"}.property(),optionValuePath:function(){return this.get("isLazy")?"content.id":"content.value"}.property(),prompt:function(){var b,c=this.get("meta.choices");if(c&&"array"===Ember.typeOf(c)&&(b=c.findBy("value","")),b)return b.label;var d="Nothing is selected",e=a.i18n.getTranslate(d,"form");return e?e:d}.property("meta.placeholder"),content:null,changeValue:function(){var a,b=this.get("object"),c=this.get("meta.dataSource"),d=this.get("selection");this.get("isLazy")?(a=d?d:void 0,b.set(c,a),b.changeRelationshipsValue(c,d?d.get("id"):void 0)):(a=d?d.value:"",b.set(c,a))}.observes("value"),init:function(){this._super();var a=this,b=[],c=this.get("object"),d=this.get("meta.dataSource");if(this.set("isLazy",this.get("meta.lazy")),this.get("isLazy")){var e=a.get("controller.store");b.push(c.get(d));var f=function(a){b.push(e.findAll(a.type))};return c.eachRelationship(function(a,b){a===d&&f(b)}),Ember.RSVP.all(b).then(function(b){Ember.set(c.get("loadedRelationshipsByName"),d,b[0]?b[0].get("id"):void 0),a.set("selection",b[0]),a.set("content",b[1])})}a.set("selection",this.get("meta.choices").findBy("value",c.get(d))),a.set("content",this.get("meta.choices")),this.addObserver("object."+d,function(){Ember.run.once(function(){a.set("selection",a.get("meta.choices").findBy("value",c.get(d)))})})},didInsertElement:function(){var a=this.get("meta.dataSource"),b=this.get("object").constructor.typeKey,c=this.get("controller.store").metadataFor(b),d=Ember.get(c,"validators."+a);if(d&&"array"===Ember.typeOf(d)&&(d=d.findBy("type","required"))){var e=this.$().find("option")[0];!e.value&&d&&(e.disabled=!0)}},willDestroyElement:function(){this.removeObserver("value"),this.removeObserver("object."+this.get("meta.dataSource"))}})}}),define("partials/forms/elements/multi-select/main",["App"],function(a){return function(){var b={templateName:"partials/multi-select-lazy-choices",changeRelations:function(a,b){var c=this.get("object"),d=this.get("collection").findBy("id",b),e=this.get("meta.dataSource"),f=c.get(e);return f.then(function(b){"select"===a?b.pushObject(d):b.removeObject(d);var f=b.get("content").mapBy("id");c.changeRelationshipsValue(e,f)})}};a.MultiSelectView=Ember.View.extend({classNames:["row","collapse","umi-multi-select"],classNameBindings:["isOpen:opened"],templateName:"partials/multi-select",isOpen:!1,placeholder:"",isLazy:!1,collection:[],selectedIds:[],filterIds:[],filterOn:!1,inputInFocus:!1,selectedObjects:function(){var a=this.get("isLazy")?"id":"value",b=this.get("collection")||[],c=[],d=this.get("selectedIds")||[];return b.forEach(function(b){var e=Ember.get(b,a);d.contains(e)&&c.push(b)}),c}.property("selectedIds.@each"),notSelectedObjects:function(){var a,b=this.get("isLazy")?"id":"value",c=this.get("collection"),d=[];return this.get("filterOn")?(a=this.get("filterIds")||[],c.forEach(function(c){var e=Ember.get(c,b);a.contains(e)&&d.push(c)})):(a=this.get("selectedIds")||[],c.forEach(function(c){var e=Ember.get(c,b);a.contains(e)||d.push(c)})),d}.property("selectedIds.@each","filterIds"),opened:function(){var a=this.get("isOpen"),b=this;a?(this.set("inputInFocus",!0),$("body").on("click.umi.multiSelect",function(a){$(a.target).closest(".umi-multi-select-list").length&&$(a.target).hasClass("umi-multi-select-input")||b.set("isOpen",!1)})):($("body").off(".umi.multiSelect"),this.set("inputInFocus",!1),this.get("notSelectedObjects").setEach("hover",!1))}.observes("isOpen"),changeRelations:function(){var a=this.get("object"),b=this.get("meta.dataSource"),c=this.get("selectedIds");this.get("isLazy")?a.set(b,c):(c="array"===Ember.typeOf(c)?JSON.stringify(c.sort()):"",c="[]"===c?"":c,a.set(b,c))},actions:{toggleList:function(){this.set("filterIds",[]),this.set("filterOn",null);var a=!this.get("isOpen");this.set("isOpen",a)},select:function(a){this.get("selectedIds").pushObject(a),this.changeRelations("select",a)},unSelect:function(a){this.get("selectedIds").removeObject(a),this.changeRelations("unSelect",a)},markHover:function(a){var b=this.get("notSelectedObjects"),c=b.findBy("hover",!0),d=0;c&&(c.set("hover",!1),d=b.indexOf(c),"Down"===a&&d<b.length-1?++d:"Up"===a&&d&&--d),b.objectAt(d).set("hover",!0)},selectHover:function(){var a=this.get("isLazy")?"id":"value",b=this.get("notSelectedObjects"),c=b.findBy("hover",!0);this.send("select",c.get(a)),c.set("hover",!1),this.send("toggleList")}},inputView:Ember.View.extend({tagName:"input",classNames:["umi-multi-select-input"],attributeBindings:["parentView.placeholder:placeholder","value","autocomplete"],toggleFocus:function(){this.get("parentView.inputInFocus")?this.$().focus():this.$().blur()}.observes("parentView.inputInFocus"),autocomplete:"off",value:function(){var a,b=this.get("parentView.selectedObjects");return a=b.length?"":""}.property("parentView.selectedObjects"),click:function(){this.get("parentView").set("isOpen",!0)},keyUp:function(){var a="value",b="label",c=this.get("parentView");c.get("isLazy")&&(a="id",b="displayName");var d=this.$().val();if(d){c.set("filterOn",!0);var e=new RegExp("^"+d,"i"),f=c.get("collection"),g=[],h=c.get("selectedIds");f.forEach(function(c){e.test(Ember.get(c,b))&&!h.contains(Ember.get(c,a))&&g.push(Ember.get(c,a))}),c.set("filterIds",g),c.set("isOpen",!0)}},keyDown:function(a){a.stopPropagation();var b,c=this.get("parentView");switch(a.keyCode){case 38:b="Up";break;case 40:b="Down";break;case 13:b="Enter";break;case 27:b="Escape"}switch(b){case"Down":case"Up":c.send("markHover",b);break;case"Enter":c.send("selectHover"),a.preventDefault();break;case"Escape":c.set("isOpen",!1)}},blur:function(){this.$()[0].value=""},willDestroyElement:function(){this.removeObserver("parentView.inputInFocus")}}),init:function(){this._super();var a,c=this,d=this.get("meta.dataSource"),e=this.get("object"),f=c.get("controller.store"),g=[];if(this.set("isLazy",this.get("meta.lazy")),this.get("isLazy")){this.reopen(b),a=e.get(d),g.push(a);var h=function(a){g.push(f.findAll(a.type))};return e.eachRelationship(function(a,b){a===d&&h(b)}),Ember.RSVP.all(g).then(function(a){var b=a[0].mapBy("id")||[],f=a[0].mapBy("id")||[];c.set("collection",a[1]),c.set("selectedIds",b),Ember.set(e.get("loadedRelationshipsByName"),d,f)})}var i=e.get(d)||"[]";try{i=JSON.parse(i)}catch(j){j.message="Некорректное значение поля "+d+". Ожидается массив или null. "+j.message,this.get("controller").send("backgroundError",j)}c.set("collection",this.get("meta.choices")),c.set("selectedIds",i)},willDestroyElement:function(){this.removeObserver("isOpen")}})}}),define("partials/forms/elements/checkbox/main",["App"],function(a){return function(){a.CheckboxElementView=Ember.View.extend({template:function(){var a=this,b=a.get("name"),c=a.get("attributeValue"),d=a.get("className"),e=a.get("value"),f='<input type="hidden" name="'+b+'" value="0" />',g='<input type="checkbox" '+(e?"checked":"")+' name="'+b+'" value="'+c+'" class="'+d+'"/>',h='<label unselectable="on" onselectstart="return false;" {{action "change" target="view"}}><span></span>{{view.meta.label}}</label>';return Ember.Handlebars.compile(f+g+h)}.property(),name:function(){var a=this.get("meta");return Ember.get(a,"attributes.name")}.property("meta.attributes.name"),value:function(){var a=this.get("meta");return Ember.get(a,"value")}.property("meta.value"),attributeValue:function(){var a=this.get("meta");return Ember.get(a,"attributes.value")}.property("meta.attributes.value"),classNames:["umi-element-checkbox"],actions:{change:function(){var a=this.$(),b=a.find('input[type="checkbox"]')[0];b.checked=!b.checked,$(b).trigger("change")}}}),a.CheckboxCollectionElementView=Ember.View.extend({template:function(){var a,b=this,c=b.get("object"),d=b.get("meta"),e=Ember.get(d,"attributes.name"),f=Ember.get(d,"attributes.value");a=Ember.get(c,Ember.get(d,"dataSource"));var g='<input type="checkbox" '+(a?"checked":"")+' name="'+e+'" value="'+f+'"/>',h='<label unselectable="on" onselectstart="return false;" {{action "change" target="view"}}><span></span>{{view.meta.label}}</label>';return Ember.Handlebars.compile(g+h)}.property(),classNames:["umi-element-checkbox"],setCheckboxValue:function(){var a=this,b=this.$();b&&(b.find('input[type="checkbox"]')[0].checked=a.get("object."+a.get("meta.dataSource")))},addObserverProperty:function(){var a=this;a.addObserver("object."+a.get("meta.dataSource"),function(){Ember.run.once(a,"setCheckboxValue")})},init:function(){this._super(),this.addObserverProperty()},willDestroyElement:function(){var a=this;a.removeObserver("object."+a.get("meta.dataSource"))},actions:{change:function(){{var a=this;this.$()}a.get("object").toggleProperty(a.get("meta.dataSource"))}}})}}),define("partials/forms/elements/radio/main",["App"],function(a){return function(){a.RadioElementView=Ember.View.extend({templateName:"partials/radioElement",classNames:["umi-element-radio-group"],addObserverProperty:function(){var a=this;a.addObserver("object."+a.get("meta.dataSource"),function(){Ember.run.once(a,"setSelectedRadioElement")})},setSelectedRadioElement:function(){var a=this,b=this.$();if(b){var c=this.get("object."+a.get("meta.dataSource"))||"",d=b[0].querySelector('input[type="radio"][value="'+c+'"]');d&&(d.checked=!0)}},init:function(){this._super(),Ember.warn("Поле с типом radio не поддерживает lazy choices.",!this.get("meta.lazy")),"instance"===Ember.typeOf(this.get("object"))&&this.addObserverProperty()},willDestroyElement:function(){var a=this;a.removeObserver("object."+a.get("meta.dataSource"))},radioElementView:Ember.View.extend({classNames:["umi-element-radio"],template:function(){var a,b,c=this,d=c.get("parentView.object"),e=c.get("parentView.meta"),f=Ember.get(e,"attributes.name"),g=Ember.get(this,"context.attributes.value");b="instance"===Ember.typeOf(d)?Ember.get(d,Ember.get(e,"dataSource"))||"":Ember.get(e,"value"),b===g&&(a=!0);var h='<input type="radio" '+(a?"checked":"")+' name="'+f+'" value="'+g+'"/>',i='<label unselectable="on" onselectstart="return false;" {{action "change" target="view"}}><span></span>{{view.label}}</label>';return Ember.Handlebars.compile(h+i)}.property(),label:function(){return Ember.warn("Не задан label в choices поля с типом radio.",this.get("context.attributes.label")),this.get("context.attributes.label")||this.get("context.attributes.value")}.property("context.attributes.label"),actions:{change:function(){var a=this,b=this.get("context.attributes.value"),c=a.get("parentView.object"),d=a.get("parentView.meta"),e=Ember.get(d,"dataSource");if("instance"===Ember.typeOf(c))Ember.set(c,e,b);else{var f=this.$().find('input[type="radio"]');f.length&&(f[0].checked=!0)}}}})})}}),define("partials/forms/elements/text/main",["App"],function(a){return function(){a.TextElementView=Ember.View.extend(a.InputValidate,{type:"text",classNames:["umi-element-text"],template:function(){var a;if("instance"===Ember.typeOf(this.get("object"))){this.set("validator","collection");var b=this.get("meta.dataSource"),c="{{input type=view.type value=view.object."+b+" placeholder=view.meta.placeholder name=view.meta.attributes.name}}",d=this.validateErrorsTemplate();a=c+d}else a="{{input type=view.type value=view.meta.value name=view.meta.attributes.name}}";return Ember.Handlebars.compile(a)}.property()})}}),define("partials/forms/elements/number/main",["App"],function(a){return function(){a.NumberElementView=a.TextElementView.extend({classNames:["umi-element","umi-element-number"],type:"number"})}}),define("partials/forms/elements/email/main",["App"],function(a){return function(){a.EmailElementView=a.TextElementView.extend({classNames:["umi-element-email"],type:"email"})}}),define("partials/forms/elements/password/main",["App"],function(a){return function(){a.PasswordElementView=a.TextElementView.extend({classNames:["umi-element","umi-element-password"],type:"text"})}}),define("partials/forms/elements/time/main",["App"],function(a){return function(){a.TimeElementComponent=Ember.Component.extend(a.InputValidate,{templateName:"partials/timeElement",classNames:["row","collapse"],didInsertElement:function(){var a=this.$();a.find(".icon-delete").click(function(){a.find("input").val("")}),this.$().find("input").timepicker({hourText:"Часы",minuteText:"Минуты",currentText:"Выставить текущее время"})},inputView:Ember.View.extend({template:function(){var a=this.get("parentView.meta.dataSource");return Ember.Handlebars.compile('{{input type="text" value=object.'+a+' placeholder=meta.placeholder validator="collection" name=meta.attributes.name}}')}.property()})})}}),define("partials/forms/elements/date/main",["App"],function(a){return function(){a.DateElementView=Ember.View.extend({templateName:"partials/dateElement",classNames:["row","collapse"],didInsertElement:function(){this.$().find("input").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"dd.mm.yy"})},actions:{clearValue:function(){var a=this,b=a.$();if("instance"===Ember.typeOf(a.get("object"))){var c=a.get("meta.dataSource");a.get("object").set(c,"")}else b.find("input").val("")}}})}}),define("partials/forms/elements/datetime/main",["App"],function(a){return function(){a.DateTimeElementView=Ember.View.extend({templateName:"partials/dateTimeElement",classNames:["row","collapse"],value:null,changeValue:function(){Ember.run.once(this,"setValueForObject")}.observes("value"),setValueForObject:function(){var a=this;if("instance"===Ember.typeOf(a.get("object"))){var b=a.get("value");b=Ember.isNone(b)?"":b;var c=a.get("object."+a.get("meta.dataSource"))||"";if(b){if(c=c?JSON.parse(c):{date:null},c.date=Ember.isNone(c.date)?"":c.date,c.date!==b){var d="";b&&(d={date:b,timezone_type:3,timezone:"Europe/Moscow"},d=JSON.stringify(d)),a.get("object").set(a.get("meta.dataSource"),d)}}else c!==b&&a.get("object").set(a.get("meta.dataSource"),"")}},setInputValue:function(){var a=this,b=a.get("object."+a.get("meta.dataSource")),c=a.get("value");c=Ember.isNone(c)?"":c,b?(b=JSON.parse(b),b.date=Ember.isNone(b.date)?"":b.date,b.date!==c&&a.set("value",b.date)):b!==c&&a.set("value","")},init:function(){this._super();var a,b=this;try{"instance"===Ember.typeOf(b.get("object"))?(a=b.get("object."+b.get("meta.dataSource"))||"{}",a=JSON.parse(a),b.set("value",a.date||""),b.addObserver("object."+b.get("meta.dataSource"),function(){Ember.run.once(b,"setInputValue")})):b.set("value",b.get("meta.value"))}catch(c){b.get("controller").send("backgroundError",c)}},didInsertElement:function(){this.$().find("input").datetimepicker({hourText:"Часы",minuteText:"Минуты",secondText:"Секунды",currentText:"Выставить текущее время",timeFormat:"hh:mm:ss",dateFormat:"dd.mm.yy"})},willDestroyElement:function(){var a=this;"instance"===Ember.typeOf(a.get("object"))&&a.removeObserver("object."+a.get("meta.dataSource"))},actions:{clearValue:function(){var a=this;a.set("value","")}}})}}),define("partials/forms/elements/file/main",["App"],function(a){return function(){a.FileElementView=Ember.View.extend({templateName:"partials/fileElement",classNames:["row","collapse"],popupParams:function(){return{templateParams:{object:this.get("object"),meta:this.get("meta"),fileSelect:function(a){var b=this,c=this.get("templateParams");c.get("object").set(c.get("meta.dataSource"),Ember.get(a,"path")),b.get("controller").send("closePopup")}},viewParams:{popupType:"fileManager"}}}.property(),actions:{clearValue:function(){var a=this,b=a.$();if("instance"===Ember.typeOf(a.get("object"))){var c=a.get("meta.dataSource");a.get("object").set(c,"")}else b.find("input").val("")},showPopup:function(a){var b=this,c=b.get("object"),d=this.get("meta.dataSource");c.clearValidateForProperty(d),this.get("controller").send("showPopup",a)}}})}}),define("partials/forms/elements/image/main",["App"],function(a){return function(){a.ImageElementView=Ember.View.extend({template:"partials/imageElement",classNames:["row","collapse"],tumb:null,popupParams:function(){return{templateParams:{object:this.get("object"),meta:this.get("meta")},viewParams:{popupType:"fileManager"}}}.property(),actions:{clearValue:function(){var a=this,b=a.$();if("instance"===Ember.typeOf(a.get("object"))){var c=a.get("meta.dataSource");a.get("object").set(c,"")}else b.find("input").val("")},showPopup:function(a){var b=this,c=b.get("object"),d=this.get("meta.dataSource");c.clearValidateForProperty(d),this.get("controller").send("showPopup",a)}}})}}),define("partials/forms/elements/textarea/main",["App"],function(a){return function(){a.TextareaElementView=Ember.View.extend({templateName:"partials/textareaElement",classNames:["umi-element-textarea"],textareaView:function(){var b={didInsertElement:function(){this.allowResize()},willDestroyElement:function(){this.get("parentView").$().off("mousedown.umi.textarea")},allowResize:function(){var a=this.$().find("textarea"),b=60;a.length&&a.css({height:b}),this.get("parentView").$().on("mousedown.umi.textarea",".umi-element-textarea-resizer",function(c){if(0===c.button){var d=$(this);$("html").addClass("s-unselectable"),d.addClass("s-unselectable");var e=a.offset().top;$("body").on("mousemove.umi.textarea",function(c){var d=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.clear&&document.selection.clear()};d();var f=c.pageY-e;b>f&&(f=b),a.css({height:f})}),$("body").on("mouseup.umi.textarea",function(){$("body").off("mousemove.umi.textarea"),$("body").off("mouseup.umi.textarea"),$("html").removeClass("s-unselectable")})}})}};return"instance"===Ember.typeOf(this.get("object"))?(b.template=function(){var a=this.get("parentView.meta.dataSource"),b="{{textarea placeholder=view.parentView.attributes.placeholder name=view.parentView.meta.attributes.name value=view.parentView.object."+a+"}}",c=this.validateErrorsTemplate();return Ember.Handlebars.compile(b+c)}.property(),Ember.View.extend(a.InputValidate,b)):(b.template=function(){var a="{{textarea placeholder=view.parentView.attributes.placeholder name=view.parentView.meta.attributes.name value=view.parentView.attributes.value}}";return Ember.Handlebars.compile(a)}.property(),Ember.View.extend(b))}.property()})}}),define("partials/forms/elements/checkbox-group/main",["App"],function(a){return function(){a.CheckboxGroupElementView=Ember.View.extend({templateName:"partials/checkboxGroup",classNames:["umi-element-checkbox-group"]}),a.CheckboxGroupCollectionElementView=Ember.View.extend({templateName:"partials/checkboxGroup/collectionElement",classNames:["umi-element-checkbox-group"],addObserverProperty:function(){var a=this;a.addObserver("object."+a.get("meta.dataSource"),function(){Ember.run.once(a,"setCheckboxesValue")})},setCheckboxesValue:function(){var a=this,b=this.$();if(b){var c=b.find('input[type="checkbox"]'),d=this.get("object."+a.get("meta.dataSource"))||"[]";try{d=JSON.parse(d)}catch(e){e.message="Некорректное значение поля "+propertyName+". Ожидается массив или null. "+e.message,this.get("controller").send("backgroundError",e)}for(var f=0;f<c.length;f++)c[f].checked=d.contains(c[f].value)}},init:function(){this._super(),Ember.warn("Поле с типом checkboxGroup не поддерживает lazy choices.",!this.get("meta.lazy")),this.addObserverProperty()},willDestroyElement:function(){var a=this;a.removeObserver("object."+a.get("meta.dataSource"))},checkboxElementView:Ember.View.extend({classNames:["umi-element-checkbox"],template:function(){var a,b=this,c=b.get("parentView.object"),d=b.get("parentView.meta"),e=Ember.get(d,"attributes.name"),f=Ember.get(this,"context.attributes.value"),g=Ember.get(c,Ember.get(d,"dataSource"))||"[]";try{g=JSON.parse(g)}catch(h){h.message="Некорректное значение поля "+propertyName+". Ожидается массив или null. "+h.message,this.get("controller").send("backgroundError",h)}g.contains(f)&&(a=!0);var i='<input type="checkbox" '+(a?"checked":"")+' name="'+e+'" value="'+f+'"/>',j='<label unselectable="on" onselectstart="return false;" {{action "change" target="view"}}><span></span>{{view.label}}</label>';return Ember.Handlebars.compile(i+j)}.property(),label:function(){return Ember.warn("Не задан label в choices поля с типом checkboxGroup.",this.get("context.attributes.label")),this.get("context.attributes.label")||this.get("context.attributes.value")}.property("context.attributes.label"),actions:{change:function(){var a=this,b=(this.$(),this.get("context.attributes.value")),c=a.get("parentView.object"),d=a.get("parentView.meta"),e=Ember.get(d,"dataSource"),f=Ember.get(c,e)||"[]";try{f=JSON.parse(f)}catch(g){g.message="Некорректное значение поля "+e+". Ожидается массив или null. "+g.message,this.get("controller").send("backgroundError",g)}f.contains(b)?f=f.without(b):f.push(b),f.sort(),Ember.set(c,e,JSON.stringify(f))}}})})}}),define("partials/forms/elements/color/main",["App"],function(a){return function(){a.ColorElementView=a.TextElementView.extend({classNames:["umi-element-color"],type:"color"})}}),define("partials/forms/elements/permissions/main",["App"],function(a){return function(){a.PermissionsView=Ember.View.extend({templateName:"partials/permissions",objectProperty:function(){var a=this.get("object"),b=this.get("meta.dataSource"),c=a.get(b)||"{}";try{c=JSON.parse(c),"object"!==Ember.typeOf(c)&&(c={})}catch(d){this.get("controller").send("backgroundError",d)}finally{return c}}.property("object"),setObjectProperty:function(a,b,c){function d(a){if(a){for(var b=0,c=$(a).closest(".umi-permissions-role-list-item").children(".umi-permissions-component").find(".umi-permissions-role-checkbox"),e=0;e<c.length;e++)c[e].checked&&b++;a.indeterminate=b===c.length?!1:!0;var f=$(a).closest(".umi-permissions-component").closest(".umi-permissions-role-list-item").children(".umi-permissions-role").find(".umi-permissions-role-checkbox");if(f.length){f[0].checked=!0;var g=$(f[0]).closest(".umi-permissions-role-label").attr("data-permissions-component-path"),h=k[g];"array"!==Ember.typeOf(h)&&(h=k[g]=[]),h.contains(f[0].name)||(h.push(f[0].name),h.sort()),d(f[0])}}}function e(a){a.indeterminate=!1;var b,c;if(b=$(a).closest(".umi-permissions-role-list-item").children(".umi-permissions-component").find(".umi-permissions-role-checkbox"),b.length)for(h=0;h<b.length;h++)b[h].checked=!0,b[h].indeterminate=!1,c=$(b[h]).closest(".umi-permissions-role-label").attr("data-permissions-component-path"),"array"!==Ember.typeOf(k[c])&&(k[c]=[]),k[c].push(b[h].name)}function f(a){var b,c,d,e=0,g=$(a).closest(".umi-permissions-component").closest(".umi-permissions-role-list-item").children(".umi-permissions-role").find(".umi-permissions-role-checkbox");if(g.length){if(g[0].checked){if(b=$(g).closest(".umi-permissions-role-list-item").children(".umi-permissions-component").find(".umi-permissions-role-checkbox"),b.length)for(var h=0;h<b.length;h++)b[h].checked&&++e;e?g[0].indeterminate=!0:(g[0].checked=!1,g[0].indeterminate=!1,c=$(g[0]).closest(".umi-permissions-role-label").attr("data-permissions-component-path"),d=k[c],"array"!==Ember.typeOf(d)&&(d=k[c]=[]),d=k[c]=d.without(g[0].name),d.length||delete k[c])}f(g[0])}}var g,h,i,j=this.get("object"),k=this.get("objectProperty"),l=k[b],m=a.value;if("array"!==Ember.typeOf(l)&&(l=k[b]=[]),c)l.contains(m)||(l.push(m),l.sort()),e(a),d(a);else{if(l.contains(m)&&(k[b]=l.without(m),k[b].length||delete k[b]),a.indeterminate=!1,g=$(a).closest(".umi-permissions-role-list-item").children(".umi-permissions-component").find(".umi-permissions-role-checkbox"),g.length)for(h=0;h<g.length;h++){g[h].checked=!1,g[h].indeterminate=!1,i=$(g[h]).closest(".umi-permissions-role-label").attr("data-permissions-component-path");var n=k[i];"array"!==Ember.typeOf(n)&&(n=k[i]=[]),n=k[i]=n.without(g[h].name),n.length||delete k[i]}f(a)}"{}"===JSON.stringify(k)&&(k=[]),j.set(this.get("meta.dataSource"),JSON.stringify(k))},didInsertElement:function(){function a(a){if(a.checked){for(var b=$(a).closest(".umi-permissions-role-list-item").children(".umi-permissions-component").find(".umi-permissions-role-checkbox"),c=0,d=0;d<b.length;d++)b[d].checked&&c++;a.indeterminate=c===b.length?!1:!0}}var b=this,c=this.$(),d=this.get("objectProperty"),e=function(a,b){var d,e;if("array"===Ember.typeOf(a[b]))for(d=0;d<a[b].length;d++)e=c.find('[data-permissions-component-path="'+b+'"]').find(".umi-permissions-role-checkbox").filter('[name="'+a[b][d]+'"]'),e.length&&(e[0].checked=!0)};for(var f in d)d.hasOwnProperty(f)&&e(d,f);for(var g=c.find(".umi-permissions-role-checkbox"),h=0;h<g.length;h++)a(g[h]);var i=c.find(".accordion");i.each(function(a){var b=$(i[a]).find(".accordion-navigation-button"),c=$(i[a]).find(".content");b.on("click.umi.permissions.triggerButton",function(){c.toggleClass("active"),b.find(".icon").toggleClass("icon-right icon-bottom")})}),c.on("click.umi.permissions",".umi-permissions-role-button-expand",function(){var a=$(this).closest("li").children(".umi-permissions-component");a.toggleClass("expand"),$(this).find(".icon").toggleClass("icon-right icon-bottom"),a.find(".umi-permissions-component").removeClass("expand"),a.find(".umi-permissions-role-button-expand").find(".icon").addClass("icon-right").removeClass("icon-bottom")}),c.on("change.umi.permissions",".umi-permissions-role-checkbox",function(){var a=this.checked,c=$(this).closest(".umi-permissions-role-label").attr("data-permissions-component-path");b.setObjectProperty(this,c,a)})},willDestroyElement:function(){var a=this.$();a.off("click.umi.permissions"),a.off("change.umi.permissions")}}),a.PermissionsPartialView=Ember.View.extend({tagName:"ul",classNames:["no-bullet","umi-permissions-role-list"],templateName:"partials/permissions/partial"})}}),define("partials/forms/elements/objectRelationElement/main",["App"],function(a){return function(){a.ObjectRelationElementView=Ember.View.extend(a.SerializedValue,{templateName:"partials/objectRelationElement",classNames:["row","collapse"],path:"displayName",objectIsObservable:!0,popupParams:function(){return{templateParams:{object:this.get("object"),meta:this.get("meta")},viewParams:{title:this.get("meta.label"),popupType:"objectRelation"}}}.property(),actions:{clearValue:function(){var a=this,b=a.get("object"),c=this.get("meta.dataSource");a.set("value",""),b.set(c,""),b.validateProperty(c)},showPopup:function(a){var b=this,c=b.get("object"),d=this.get("meta.dataSource");c.clearValidateForProperty(d),this.get("controller").send("showPopup",a)}},inputView:Ember.View.extend(a.InputValidate,{type:"text",classNames:["umi-element-text"],template:function(){var a;if("instance"===Ember.typeOf(this.get("object"))){this.set("validator","collection");var b="{{input type=view.type value=view.parentView.value placeholder=view.meta.placeholder name=view.meta.attributes.name disabled=true}}",c=this.validateErrorsTemplate();a=b+c}return Ember.Handlebars.compile(a)}.property()})}),a.ObjectRelationLayoutController=Ember.ObjectController.extend({sideBarControl:Ember.computed.gt("collections.length",1),collections:[],selectedCollection:null,tableControlSettings:function(){var a,b=this,c=b.get("selectedCollection.id"),d=b.get("model.object"),e=b.get("model.meta"),f=d.get(Ember.get(e,"dataSource"));if(f)try{f=JSON.parse(f),a=Ember.get(f,"guid")}catch(g){b.send("backgroundError",g)}return{control:{collectionName:c,meta:{defaultFields:["displayName"],activeObjectGuid:a,form:{elements:[{type:"text",tag:"input",id:"displayName",label:"Имя отображения",attributes:{name:"displayName",type:"text",value:null},valid:!0,errors:[],dataSource:"displayName",value:null,validators:[],filters:[]}]}},behaviour:{rowEvent:function(a,b){var c=Ember.get(e,"dataSource"),f=Ember.get(b,"constructor.typeKey"),g={collection:f,guid:b.get("guid"),displayName:b.get("displayName")};d.set(c,JSON.stringify(g)),a.send("closePopup")}}}}}.property("selectedCollection"),init:function(){var a,b=this,c=b.get("object"),d=b.get("meta"),e=Ember.get(d,"dataSource"),f=c.get(e),g=Ember.get(d,"collections");if("array"!==Ember.typeOf(g)&&(g=[]),Ember.warn("Collection list is empty.",g.length),b.set("collections",g),f)try{f=JSON.parse(f),a=Ember.get(f,"meta.collectionName")||Ember.get(f,"collection"),b.set("selectedCollection",g.findBy("id",a))}catch(h){this.send("backgroundError",h)}else b.set("selectedCollection",g[0])}}),a.ObjectRelationLayoutView=Ember.View.extend({classNames:["s-full-height"],templateName:"partials/objectRelationLayout",sideMenu:Ember.View.extend({tagName:"ul",classNames:["side-nav"],templateName:"partials/objectRelationLayout/sideMenu",itemView:Ember.View.extend({tagName:"li",classNameBindings:["isActive:active"],isActive:function(){return this.get("controller.selectedCollection.id")===this.get("item.id")}.property("controller.selectedCollection"),click:function(){this.get("isActive")||this.get("controller").set("selectedCollection",this.get("item"))}})})})}}),define("partials/forms/elements/singleCollectionObjectRelation/main",["App"],function(a){return function(){a.SingleCollectionObjectRelationElementView=a.ObjectRelationElementView.extend({templateName:"partials/singleCollectionObjectRelationElement",classNames:["row","collapse"],objectIsObservable:!1,popupParams:function(){return{templateParams:{meta:this.get("meta")},viewParams:{title:this.get("meta.label"),popupType:"singleCollectionObjectRelation"}}}.property(),actions:{clearValue:function(){var a=this;a.set("value","")},showPopup:function(a){this.get("controller").send("showPopup",a)}}}),a.SingleCollectionObjectRelationLayoutController=a.ObjectRelationLayoutController.extend({tableControlSettings:function(){var a,b=this,c=b.get("selectedCollection.id"),d=b.get("model.meta");return a=Ember.get(d,"value"),{control:{collectionName:c,meta:{defaultFields:["displayName"],activeObjectGuid:a,form:{elements:[{type:"text",tag:"input",id:"displayName",label:"Имя отображения",attributes:{name:"displayName",type:"text",value:null},valid:!0,errors:[],dataSource:"displayName",value:null,validators:[],filters:[]}]}},behaviour:{rowEvent:function(a,b){var c=b.get("guid");Ember.set(d,"value",c),a.send("closePopup")}}}}}.property("selectedCollection"),init:function(){var a=this,b=a.get("meta"),c=Ember.get(b,"collection"),d=[];
d=[c],Ember.warn("Collection list is empty.",d.length),a.set("collections",d),a.set("selectedCollection",c)}}),a.SingleCollectionObjectRelationLayoutView=a.ObjectRelationLayoutView.extend({})}}),define("forms/elements/main",["App","partials/forms/elements/mixins","partials/forms/elements/wysiwyg/main","partials/forms/elements/select/main","partials/forms/elements/multi-select/main","partials/forms/elements/checkbox/main","partials/forms/elements/radio/main","partials/forms/elements/text/main","partials/forms/elements/number/main","partials/forms/elements/email/main","partials/forms/elements/password/main","partials/forms/elements/time/main","partials/forms/elements/date/main","partials/forms/elements/datetime/main","partials/forms/elements/file/main","partials/forms/elements/image/main","partials/forms/elements/textarea/main","partials/forms/elements/checkbox-group/main","partials/forms/elements/color/main","partials/forms/elements/permissions/main","partials/forms/elements/objectRelationElement/main","partials/forms/elements/singleCollectionObjectRelation/main"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return function(){b(),c(),d(),e(),f(),g(),h(),i(),j(),k(),l(),m(),n(),o(),p(),q(),r(),s(),t(),u(),v()}}),define("partials/forms/partials/magellan/main",["App"],function(a){return function(){a.MagellanView=Ember.View.extend({classNames:["magellan-menu","s-full-height-before","s-unselectable"],focusId:null,elementView:Ember.View.extend({isFieldset:function(){return"fieldset"===this.get("content.type")}.property()}),buttonView:Ember.View.extend({tagName:"a",classNameBindings:["isFocus:focus"],isFocus:function(){return this.get("model.id")===this.get("parentView.parentView.focusId")}.property("parentView.parentView.focusId"),click:function(){var a=this,b=document.getElementById("fieldset-"+this.get("model.id"));$(b).closest(".magellan-content").animate({scrollTop:b.parentNode.offsetTop-parseFloat(getComputedStyle(b).marginTop)},0),setTimeout(function(){a.get("parentView.parentView.focusId")!==a.get("model.id")&&a.get("parentView.parentView").set("focusId",a.get("model.id"))},10)}}),init:function(){var a=this.get("elements");a=a.filter(function(a){return"fieldset"===a.type}),this.set("focusId",a.get("firstObject.id"))},didInsertElement:function(){var a=this,b=$(".magellan-menu").parent().find(".magellan-content");if(b.length){var c=b.find("fieldset");Ember.run.next(a,function(){var d,e=c[c.length-1],f=e.offsetHeight,g=b[0].offsetHeight,h=function(a){f=e.offsetHeight,g=b[0].offsetHeight,a.style.height=g-f-10-parseInt($(e).css("marginBottom"))+"px"};g>f&&(d=document.createElement("div"),d.className="umi-js-fieldset-placeholder",d=b[0].appendChild(d),h(d),$(window).on("resize.umi.magellan.fieldsetPlaceholder",function(){h(d)})),b.on("scroll.umi.magellan",function(){for(var b,d,e=$(this).scrollTop(),f=0;f<c.length;f++)d=c[f].parentNode.offsetTop,d-parseFloat(getComputedStyle(c[f]).marginTop)<=e&&e<=d+c[f].offsetHeight&&(b=c[f]);b&&a.set("focusId",b.id.replace(/^fieldset-/g,""))})})}}})}}),define("partials/forms/partials/submitToolbar/main",["App","toolbar"],function(a){return function(){a.SubmitToolbarView=Ember.View.extend({layoutName:"partials/form/submitToolbar",tagName:"ul",classNames:["button-group","umi-form-control-buttons"],elementView:Ember.View.extend(a.ToolbarElement,{splitButtonView:function(){var b=a.SplitButtonView.extend(a.splitButtonBehaviour.dropUp),c=this.get("context.behaviour.name"),d=Ember.get(a.splitButtonBehaviour,c)||{};return b=b.extend(d)}.property()})})}}),define("forms/formBase/main",["App","partials/forms/partials/magellan/main","partials/forms/partials/submitToolbar/main"],function(a,b,c){return function(){b(),c(),a.FormControllerMixin=Ember.Mixin.create(a.i18nInterface,{dictionaryNamespace:"form",localDictionary:function(){var a=this.get("control")||{};return a.i18n}.property()}),a.FormViewMixin=Ember.Mixin.create({tagName:"form",submit:function(){return!1},hasFieldset:function(){return this.get("context.control.meta.elements").isAny("type","fieldset")}.property("context.control.meta"),elementView:Ember.View.extend({classNameBindings:["isField"],isFieldset:function(){return"fieldset"===this.get("content.type")}.property(),isExpanded:!0,isField:function(){return this.get("isFieldset")?void 0:this.gridType()}.property(),gridType:function(){var a=["wysiwyg","permissions"],b="large-4 small-12";return a.contains(this.get("content.type"))&&(b="small-12"),"umi-columns "+b},actions:{expand:function(){this.toggleProperty("isExpanded")}}})}),a.FieldMixin=Ember.Mixin.create({isRequired:function(){var a=this.get("meta.validators");return"array"===Ember.typeOf(a)&&a.findBy("type","required")?" *":void 0}.property(),layout:Ember.Handlebars.compile('<div><span class="umi-form-label">{{view.meta.label}}{{view.isRequired}}</span></div>{{yield}}'),template:function(){var a,b;try{if(a=this.get("meta"),b=this.get(Ember.String.camelize(a.type)+"Template")||"",!b)throw new Error("Для поля с типом "+a.type+" не реализован шаблонный метод.")}catch(c){this.get("controller").send("backgroundError",c)}finally{return b=this.extendTemplate(b),Ember.Handlebars.compile(b)}}.property(),extendTemplate:function(a){return a},textTemplate:function(){return'{{view "textElement" object=view.object meta=view.meta}}'}.property(),emailTemplate:function(){return'{{view "emailElement" object=view.object meta=view.meta}}'}.property(),passwordTemplate:function(){return'{{view "passwordElement" object=view.object meta=view.meta}}'}.property(),numberTemplate:function(){return'{{view "numberElement" object=view.object meta=view.meta}}'}.property(),colorTemplate:function(){return'{{view "colorElement" object=view.object meta=view.meta}}'}.property(),timeTemplate:function(){return"{{time-element object=view.object meta=view.meta}}"}.property(),dateTemplate:function(){return'{{view "dateElement" object=view.object meta=view.meta}}'}.property(),datetimeTemplate:function(){return'{{view "dateTimeElement" object=view.object meta=view.meta}}'}.property(),fileTemplate:function(){return'{{view "fileElement" object=view.object meta=view.meta}}'}.property(),imageTemplate:function(){return'{{view "imageElement" object=view.object meta=view.meta}}'}.property(),textareaTemplate:function(){return'{{view "textareaElement" object=view.object meta=view.meta}}'}.property(),wysiwygTemplate:function(){return'{{view "htmlEditor" object=view.object meta=view.meta}}'}.property(),selectTemplate:function(){return'{{view "select" object=view.object meta=view.meta name=view.meta.attributes.name}}'}.property(),multiSelectTemplate:function(){return'{{view "multiSelect" object=view.object meta=view.meta name=view.meta.attributes.name}}'}.property(),checkboxTemplate:function(){return'{{view "checkboxElement" object=view.object meta=view.meta}}'}.property(),checkboxGroupTemplate:function(){return'{{view "checkboxGroupElement" object=view.object meta=view.meta}}'}.property(),radioTemplate:function(){return'{{view "radioElement" object=view.object meta=view.meta}}'}.property()}),a.FormBaseController=Ember.ObjectController.extend(a.FormControllerMixin,{}),a.FormBaseView=Ember.View.extend(a.FormViewMixin,{layoutName:"partials/form",classNames:["s-margin-clear","s-full-height","umi-form-control"],attributeBindings:["action"],action:function(){return this.get("context.control.meta.attributes.action")}.property("context.control.meta.attributes.action"),actions:{submit:function(b){var c=this;b&&b.addClass("loading");var d=this.$().serialize();$.post(c.get("action"),d).then(function(d){var e=Ember.get(d,"result.save"),f=c.get("context");Ember.set(f,"control.meta",e),b.removeClass("loading");var g={type:"success",content:"Сохранено.",duration:!1};a.notification.create(g)})}},submitToolbarView:a.SubmitToolbarView.extend({elementView:Ember.View.extend(a.ToolbarElement,{buttonView:function(){var b={};return"save"===this.get("context.behaviour.name")&&(b={actions:{save:function(){this.get("parentView.parentView.parentView").send("submit",this.$())}}}),a.ButtonView.extend(b)}.property()})})}),a.FieldBaseView=Ember.View.extend(a.FieldMixin,{layout:function(){var a=this.get("meta.type"),b='<div><span class="umi-form-label">{{view.meta.label}}{{view.isRequired}}</span></div>{{yield}}';switch(a){case"checkbox":b="{{yield}}{{view.isRequired}}"}return Ember.Handlebars.compile(b)}.property(),singleCollectionObjectRelationTemplate:function(){return'{{view "singleCollectionObjectRelationElement" object=view.object meta=view.meta}}'}.property()})}}),define("forms/formControl/main",["App"],function(a){return function(){a.FormControlController=Ember.ObjectController.extend(a.FormControllerMixin,{needs:["component"],settings:function(){var a={};return a=this.get("controllers.component.settings")}.property(),inputElements:function(){var a,b=this.get("control.meta.elements"),c=[];for(a=0;a<b.length;a++)"fieldset"===Ember.get(b[a],"type")&&"array"===Ember.typeOf(Ember.get(b[a],"elements"))?c=c.concat(b[a].elements):c.push(b[a]);return c},validationErrors:function(){var b,c=this.get("object.validErrors"),d=[],e=this.inputElements(),f="Объект не валиден.",g={type:"error",duration:!1,title:f,kind:"validate",close:!1};for(b in c)c.hasOwnProperty(b)&&!e.findBy("dataSource",b)&&d.push("<div>"+b+": "+c[b]+"</div>");d.length?(g.content=d.join(),a.notification.create(g)):a.notification.removeWithKind("validateError")}.observes("object.validErrors.@each"),actionWithCustomValidate:function(a,b){var c=this.inputElements();c=c.mapBy("dataSource"),b.fields=c,this.get("controllers.component").send(a,b)},actions:{save:function(a){this.actionWithCustomValidate("save",a)},saveAndGoBack:function(a){this.actionWithCustomValidate("saveAndGoBack",a)},add:function(a){this.actionWithCustomValidate("add",a)},addAndGoBack:function(a){this.actionWithCustomValidate("addAndGoBack",a)}}}),a.FormControlView=Ember.View.extend(a.FormViewMixin,{layoutName:"partials/formControl",classNames:["s-margin-clear","s-full-height","umi-validator","umi-form-control"],willDestroyElement:function(){this.get("controller").removeObserver("object.validErrors.@each")}}),a.FieldFormControlView=Ember.View.extend(a.FieldMixin,{layout:function(){var a=this.get("meta.type"),b='<div><span class="umi-form-label">{{view.meta.label}}{{view.isRequired}}</span></div>{{yield}}';switch(a){case"checkbox":b="{{yield}}{{view.isRequired}}"}return Ember.Handlebars.compile(b)}.property(),isRequired:function(){var a=this.get("meta.dataSource"),b=this.get("object").validatorsForProperty(a);return"array"===Ember.typeOf(b)&&b.findBy("type","required")?" *":void 0}.property(),classNameBindings:["isError:error"],isError:function(){var a=this.get("meta.dataSource"),b=!!this.get("object.validErrors."+a);return b}.property("object.validErrors.@each"),wysiwygTemplate:function(){return'{{view "htmlEditorCollection" object=view.object meta=view.meta}}'}.property(),selectTemplate:function(){return'{{view "selectCollection" object=view.object meta=view.meta}}'}.property(),checkboxTemplate:function(){return'{{view "checkboxCollectionElement" object=view.object meta=view.meta}}'}.property(),checkboxGroupTemplate:function(){return'{{view "checkboxGroupCollectionElement" object=view.object meta=view.meta}}'}.property(),permissionsTemplate:function(){return'{{view "permissions" object=view.object meta=view.meta}}'}.property(),objectRelationTemplate:function(){return'{{view "objectRelationElement" object=view.object meta=view.meta}}'}.property(),pageRelationTemplate:function(){return this.get("objectRelationTemplate")}.property()})}}),define("forms/main",["App","./elements/main","./formBase/main","./formControl/main"],function(a,b,c,d){b(),c(),d()}),define("forms",["forms/main"],function(a){return a}),define("notification/main",["App"],function(a){a.Notification=Ember.Object.extend({settings:{type:"secondary",title:"UMI.CMS",content:"",close:!0,duration:3e3,kind:"default"},create:function(b){var c,d=this.get("settings"),e={};for(c in d)d.hasOwnProperty(c)&&(e[c]=d[c]);if(b)for(c in b)b.hasOwnProperty(c)&&(e[c]=b[c]);e.id=a.notificationList.incrementProperty("notificationId");var f=a.notificationList.get("content");Ember.run.next(this,function(){f.pushObject(Ember.Object.create(e))})},removeAll:function(){a.notificationList.set("content",[])},removeWithKind:function(b){var c=a.notificationList.get("content");c=c.filter(function(a){return Ember.get(a,"kind")!==b?!0:void 0}),a.notificationList.set("content",c)}}),a.notification=a.Notification.create({}),a.NotificationList=Ember.ArrayController.extend({content:[],sortContent:function(){return this.get("content").sortBy("id")}.property("content.length"),notificationId:0,closeAll:!1,itemCount:function(){if(this.get("content.length")>1&&!this.get("closeAll")&&(this.set("closeAll",!0),this.get("content").pushObject(Ember.Object.create({id:"closeAll",type:"secondary",kind:"closeAll",content:"Закрыть все"}))),this.get("content.length")<=2&&this.get("closeAll")){var a=this.get("content").findBy("id","closeAll");this.get("content").removeObject(a),this.set("closeAll",!1)}}.observes("content.length")}),a.notificationList=a.NotificationList.create({}),a.AlertBox=Ember.View.extend({classNames:["alert-box"],classNameBindings:["content.type"],layoutName:"partials/alert-box",didInsertElement:function(){var a=this.get("content.duration");a&&Ember.run.later(this,function(){var a=this.get("content.id"),b=this.get("controller.content")||[],c=b.findBy("id",a);b.removeObject(c)},a)},actions:{close:function(){var a=this.get("controller.content");a.removeObject(this.get("content"))}}}),a.AlertBoxCloseAll=Ember.View.extend({classNames:["alert-box text-center alert-box-close-all"],classNameBindings:["content.type"],layoutName:"partials/alert-box/close-all",click:function(){a.notification.removeAll()}}),a.NotificationListView=Ember.CollectionView.extend({tagName:"div",classNames:["umi-alert-wrapper"],createChildView:function(b,c){return b="closeAll"===c.content.kind?a.AlertBoxCloseAll:a.AlertBox,this._super(b,c)},contentBinding:"controller.sortContent",controller:a.notificationList})}),define("notification",["notification/main"],function(a){return a}),define("dialog/main",["App"],function(a){a.DialogController=Ember.ObjectController.extend({deferred:null,open:function(a){this.set("deferred",Ember.RSVP.defer());var b=this.get("deferred");return Ember.get(a,"proposeRemember"),this.set("model",Ember.Object.create(a)),b.promise},actions:{confirm:function(){this.set("model",null);var a=this.get("deferred");a.resolve("loaded")},close:function(){this.set("model",null);var a=this.get("deferred");a.reject("reject")}}}),a.dialog=a.DialogController.create(),a.DialogView=Ember.View.extend({layoutName:"partials/dialog-layout",templateName:"partials/dialog-template",modelBinding:"controller.model",controller:a.dialog,hasButtons:Ember.computed.any("model.confirm","model.reject"),showDialog:function(){this.get("model")?($("body").append('<div class="umi-blur umi-ff-fix" />'),setTimeout(function(){$(".umi-main-view").addClass("umi-blur")},50),this.append()):this.isVisible&&($(".umi-blur.umi-ff-fix").remove(),$(".umi-main-view").removeClass("umi-blur"),this.remove())}.observes("model"),didInsertElement:function(){var a=this.$(),b=a.children(".umi-dialog"),c=$(document).height(),d=c>b[0].offsetHeight?-b[0].offsetHeight/2:-b[0].offsetHeight/2+b[0].offsetHeight-c;b.css({marginTop:d}),b.addClass("visible")},actions:{confirm:function(){var a=this.$(),b=a.children(".umi-dialog");return b.removeClass("visible"),this.get("controller").send("confirm")},close:function(){var a=this.$(),b=a.children(".umi-dialog");return b.removeClass("visible"),this.get("controller").send("close")}}});a.DialogView.create()}),define("dialog",["dialog/main"],function(a){return a}),define("popup/controller",["App"],function(a){return function(){a.PopupController=Ember.Controller.extend({templateParams:null,popupType:null})}}),define("popup/view",["App"],function(a){return function(){a.PopupView=Ember.View.extend({controller:function(){return this.container.lookup("controller:popup")}.property(),classNames:["umi-popup"],popupType:null,title:"",width:800,height:400,contentOverflow:["overflow","hidden"],blur:!0,fade:!1,drag:!0,resize:!0,layoutName:"partials/popup",templateName:function(){return"partials/popup/"+this.get("popupType")}.property("popupType"),didInsertElement:function(){var a=this;a.get("blur")&&a.addBlur(),a.get("fade")&&a.fadeIn(),this.get("drag")&&this.allowDrag(),this.get("resize")&&this.allowResize(),"hidden"!==this.get("contentOverflow")&&"array"===Ember.typeOf(this.get("contentOverflow"))&&$(".umi-popup-content").css(this.get("contentOverflow")[0],this.get("contentOverflow")[1]),this.setSize(),this.setPosition()},beforeClose:function(){},afterClose:function(){},actions:{closePopup:function(){this.beforeClose(),this.removeBlur(),this.get("controller").send("removePopupLayout"),this.afterClose()}},setSize:function(){var a=this.$();a.width(this.get("width")),a.height(this.get("height"))},setPosition:function(){var a=this.$(),b={},c=a.height()/2,d=a.width()/2;b.marginTop=-($(window).height()>c?c:$(window).height()/2-50),b.marginLeft=-($(window).width()>d?d:$(window).width()/2-50),a.css(b)},fadeIn:function(){var a=this;$("body").append('<div class="umi-popup-visible-overlay"></div>'),$("body").on("click.umi.popup",".umi-popup-visible-overlay",function(){a.send("closePopup"),$("body").off("click.umi.popup")})},addBlur:function(){$(".umi-header").addClass("s-blur"),$(".umi-content").addClass("s-blur"),$("body").append('<div class="umi-popup-invisible-overlay"></div>')},removeBlur:function(){$(".umi-header").removeClass("s-blur"),$(".umi-content").removeClass("s-blur"),$(".umi-popup-invisible-overlay").remove(),$(".umi-popup-visible-overlay").remove()},allowResize:function(){var a=this;$(".umi-popup-resizer").show(),$("body").on("mousedown",".umi-popup-resizer",function(b){if(0===b.button){var c=$(".umi-popup").offset().left,d=$(".umi-popup").offset().top;$("html").addClass("s-unselectable"),$("html").mousemove(function(b){var e=b.pageX-c,f=b.pageY-d;e<a.get("width")&&(e=a.get("width")),f<a.get("height")&&(f=a.get("height")),$(".umi-popup").css({width:e,height:f}),$("html").on("mouseup",function(){$("html").off("mousemove"),$("html").removeClass("s-unselectable")})})}})},allowDrag:function(){var a=this;$(".umi-popup-header").css({cursor:"move"}),$("body").on("mousedown",".umi-popup-header",function(b){$(".umi-popup").css("z-index","10000"),$(this).parent().css("z-index","10001");var c=$(this);if(0===b.button){var d=b.pageX-$(this).offset().left,e=b.pageY-$(this).offset().top,f=$(window).height()-34,g=$(window).width()-34;$("html").addClass("s-unselectable"),$("body").mousemove(function(b){var h=b.pageX-d,i=b.pageY-e;0>=i||i>=f||h<=68-a.width||h>=g||(c.parent().offset({left:h,top:i}),$("body").on("mouseup",function(){$("body").off("mousemove"),$("html").removeClass("s-unselectable")}))})}})},init:function(){this._super();var a=this.get("controller.viewParams");"object"===Ember.typeOf(a)&&this.setProperties(a)}})}}),define("popup/main",["./controller","./view","App"],function(a,b){a(),b()}),define("popup",["popup/main"],function(a){return a}),define("table/view",["App"],function(a){return function(){a.TableView=Ember.View.extend(a.i18nInterface,{dictionaryNamespace:"table",localDictionary:function(){var a=this.get("content.control")||{};return a.i18n}.property("content"),templateName:"partials/table",classNames:["umi-table"],headers:[],rows:[],offset:0,limit:25,totalBinding:"rows.length",error:null,visibleRows:function(){var a,b,c=this,d=c.get("controller"),e=c.get("rows"),f=c.get("offset"),g=parseFloat(c.get("limit"));return a=f?g*f:0,b=a+g,Ember.run.later(c,function(){d.send("hideLoader")},300),e.slice(a,b)}.property("offset","limit"),iScroll:null,iScrollUpdate:function(){var a=this.get("iScroll");a&&setTimeout(function(){a.refresh(),a.scrollTo(0,0)},100)}.observes("visibleRows"),didInsertElement:function(){if(!this.get("error")){var b=this.$(),c=b.find(".s-scroll-wrap")[0],d=b.find(".umi-table-header")[0],e=new IScroll(c,a.config.iScroll),f=$(c).find(".umi-table-content-sizer")[0];this.set("iScroll",e),e.on("scroll",function(){d.style.marginLeft=this.x+"px"}),$(window).on("resize.umi.table",function(){setTimeout(function(){d.style.marginLeft=e.x+"px"},100)}),b.on("mousedown.umi.table",".umi-table-header-column-resizer",function(){$("html").addClass("s-unselectable");var a=this;$(a).addClass("on-resize");var b,c=a.parentNode.parentNode,g=$(c).closest("tr").children(".umi-table-td").index(c),h=$(c).offset().left,i=f.querySelectorAll(".umi-table-td")[g];$("body").on("mousemove.umi.table",function(a){a.stopPropagation(),b=a.pageX-h,b>=60&&c.offsetWidth>59&&(c.style.width=i.style.width=b+"px")}),$("body").on("mouseup.umi.table",function(){$("html").removeClass("s-unselectable"),$(a).removeClass("on-resize"),$("body").off("mousemove.umi.table"),$("body").off("mouseup.umi.table"),e.refresh(),d.style.marginLeft=e.x+"px"})})}},willDestroyElement:function(){var a=this.$();$(window).off("resize.umi.table"),this.removeObserver("content"),this.removeObserver("visibleRows"),a.off("mousedown.umi.table")},paginationView:Ember.View.extend({classNames:["s-unselectable","umi-toolbar"],templateName:"partials/table/toolbar",counter:function(){var a="из",b=this.get("parentView.limit"),c=this.get("parentView.offset")+1,d=this.get("parentView.total"),e=c*b,f=e-b+1;return e=d>e?e:d,f+"-"+e+" "+a+" "+d}.property("parentView.limit","parentView.offset","parentView.total"),prevButtonView:Ember.View.extend({classNames:["button","secondary","tiny"],classNameBindings:["isActive::disabled"],isActive:function(){return this.get("parentView.parentView.offset")}.property("parentView.parentView.offset"),click:function(){var a=this,b=a.get("controller");a.get("isActive")&&(b.send("showLoader"),Ember.run.next(a,function(){a.get("parentView.parentView").decrementProperty("offset")}))}}),nextButtonView:Ember.View.extend({classNames:["button","secondary","tiny"],classNameBindings:["isActive::disabled"],isActive:function(){var a=this.get("parentView.parentView.limit"),b=this.get("parentView.parentView.offset")+1,c=this.get("parentView.parentView.total");return c>a*b}.property("parentView.parentView.limit","parentView.parentView.offset","parentView.parentView.total"),click:function(){var a=this,b=a.get("controller");a.get("isActive")&&(b.send("showLoader"),Ember.run.next(a,function(){a.get("parentView.parentView").incrementProperty("offset")}))}}),limitView:Ember.View.extend({tagName:"input",classNames:["s-margin-clear"],attributeBindings:["value","type"],value:function(){return this.get("parentView.parentView.limit")}.property("parentView.parentView.limit"),type:"text",keyDown:function(a){var b=this,c=b.get("controller");13===a.keyCode&&(c.send("showLoader"),Ember.run.next(b,function(){b.get("parentView.parentView").setProperties({offset:0,limit:b.$()[0].value})}))}})})}),a.SiteAnalyzeTableView=a.TableView.extend({setContent:function(){var a,b,c=this.get("content"),d=Ember.get(c,"control.data.data")||[];if(d.length){a=d.shift(),b=a.indexOf("n/a"),a.splice(b,1);for(var e=0;e<d.length;e++)d[e].splice(b,1);this.setProperties({headers:a,rows:d})}}.observes("content").on("init")}),a.BacklinksTableView=a.TableView.extend({setContent:function(){var a,b=this.get("content"),c=Ember.get(b,"control.data"),d=[];if("object"===Ember.typeOf(c)&&"error"in c)this.set("error",c.error);else if("array"===Ember.typeOf(c)){a=[Ember.get(b,"control.labels.vs_from")];for(var e=0;e<c.length;e++)d.push([Ember.get(c[e],"vs_from")]);this.setProperties({headers:a,rows:d})}}.observes("content").on("init")}),a.YaHostTableView=a.TableView.extend({setContent:function(){var b,c=this.get("content.control"),d=[],e=[],f=Ember.get(c,"labels"),g=Ember.get(c,"data");if("object"===Ember.typeOf(f))for(b in f)f.hasOwnProperty(b)&&d.push(f[b]);if("object"===Ember.typeOf(g))for(b in g)if(g.hasOwnProperty(b)){var h=a.Utils.getStringValue(g[b]);e.push(h)}this.setProperties({headers:d,rows:[e]})}.observes("content").on("init")}),a.YaIndexesTableView=a.TableView.extend({setContent:function(){var b,c=this.get("content.control"),d=[],e=[],f=Ember.get(c,"labels"),g=Ember.get(c,"data"),h=Ember.get(g,"last-week-index-urls.url");if(d.push(Ember.get(f,"last-week-index-urls")),"array"===Ember.typeOf(h))for(b=0;b<h.length;b++)e.push([a.Utils.getStringValue(h[b])]);this.setProperties({headers:d,rows:e})}.observes("content").on("init")}),a.YaTopsTableView=a.TableView.extend({setContent:function(){var b,c,d=this.get("content.control"),e=[],f=[],g=Ember.get(d,"labels"),h=Ember.get(d,"data"),i=Ember.get(h,"top-queries.top-clicks.top-info");if(e.push(Ember.get(g,"query")),e.push(Ember.get(g,"count")),e.push(Ember.get(g,"position")),e.push(Ember.get(g,"clicks-top-rank")),"array"===Ember.typeOf(i))for(b=0;b<i.length;b++)c=[],c.push(a.Utils.getStringValue(i[b].query)),c.push(a.Utils.getStringValue(i[b].count)),c.push(a.Utils.getStringValue(i[b].position)),c.push(a.Utils.getStringValue(i[b]["clicks-top-rank"])),f.push(c);this.setProperties({headers:e,rows:f})}.observes("content").on("init")}),a.TableCountersView=a.TableView.extend({rowCount:function(){var a=this.get("rows")||[],b=a[0]||{},c=[];for(var d in b)b.hasOwnProperty(d)&&c.push({});return c}.property("rows"),rowView:Ember.View.extend({tagName:"tr",classNames:["umi-table-content-tr"],cell:function(){var a=this.get("row"),b=[];for(var c in a)a.hasOwnProperty(c)&&b.push({displayName:a[c]})}}),setContent:function(){var a=this.get("content"),b=Ember.get(a,"control.meta.labels"),c=[],d=Ember.get(a,"control.meta.objects");for(var e in b)b.hasOwnProperty(e)&&c.push(b[e]);this.setProperties({headers:c,rows:d})}.observes("content").on("init"),actions:{rowEvent:function(a){this.get("controller").transitionToRoute("context",Ember.get(a,"id"))}}})}}),define("table/main",["./view","App"],function(a){a()}),define("table",["table/main"],function(a){return a}),define("sideMenu/main",["App"],function(a){a.SideMenuController=Ember.ObjectController.extend({needs:["component"],objects:function(){return this.get("controllers.component.dataSource.objects")}.property("model")}),a.SideMenuView=Ember.View.extend({layoutName:"partials/sideMenu"})}),define("sideMenu",["sideMenu/main"],function(a){return a}),define("updateLayout/main",["App"],function(a){a.UpdateLayoutView=Ember.View.extend(a.i18nInterface,{data:null,dictionaryNamespace:"updateLayout",localDictionary:function(){return this.get("data.control.i18n")}.property(),classNames:["row","s-full-height"],templateName:"partials/updateLayout",buttonLabel:function(){var a=this.get("data.control.submitToolbar");return"array"===Ember.typeOf(a)?Ember.get(a[0],"attributes.label"):void 0}.property("data.control.submitToolbar"),actions:{update:function(){var a,b=this,c=b.$().find(".button");try{var d=b.get("container").lookup("controller:component");if(!d)throw new Error("Component controller not found.");a=d.get("settings.actions.update.source"),$.ajax({type:"POST",url:a,global:!1,beforeSend:function(){c.addClass("loading")},success:function(b){if(c.removeClass("loading"),a=Ember.get(b,"result.update"),!a)throw new Error("Update url not found.");window.location.href=a},error:function(a){c.removeClass("loading"),b.get("controller").send("backgroundError",a)}})}catch(e){b.get("controller").send("backgroundError",e)}}}})}),define("updateLayout",["updateLayout/main"],function(a){return a}),define("application/main",["App","topBar","divider","dock","toolbar","tableControl","fileManager","treeSimple","tree","forms","notification","dialog","popup","DS","table","sideMenu","updateLayout"],function(a){return function(){a.advanceReadiness()}}),require.config({paths:{text:"vendor/requirejs-text/text",App:"application/application",jquery:"vendor/jquery/dist/jquery",jqueryUI:"vendor/jquery-ui/jquery-ui",Modernizr:"vendor/modernizr/modernizr",Handlebars:"vendor/handlebars/handlebars",Ember:"vendor/ember/ember",DS:"vendor/ember-data/ember-data",iscroll:"vendorExtend/iscroll-probe-5.1.1",ckEditor:"vendor/ckeditor/ckeditor",timepicker:"vendor/jqueryui-timepicker-addon/src/jquery-ui-timepicker-addon",moment:"vendor/momentjs/min/moment-with-langs",elFinder:"vendorExtend/elFinder"},shim:{Modernizr:{exports:"Modernizr"},jquery:{exports:"jQuery"},jqueryUI:{exports:"jQuery",deps:["jquery"]},elFinder:{exports:"elFinder",deps:["jquery","jqueryUI"]},Ember:{exports:"Ember",deps:["Handlebars","jquery"]},DS:{exports:"DS",deps:["Ember"]},ckEditor:{exports:"ckEditor"},timepicker:{exports:"timepicker",deps:["jquery","jqueryUI"]}},packages:[{name:"accordion",location:"partials/accordion"},{name:"chartControl",location:"partials/chartControl"},{name:"dialog",location:"partials/dialog"},{name:"divider",location:"partials/divider"},{name:"dock",location:"partials/dock"},{name:"fileManager",location:"partials/fileManager"},{name:"forms",location:"partials/forms"},{name:"notification",location:"partials/notification"},{name:"popup",location:"partials/popup"},{name:"search",location:"partials/search"},{name:"megaIndex",location:"partials/seo/megaIndex"},{name:"sideMenu",location:"partials/sideMenu"},{name:"yandexWebmaster",location:"partials/seo/yandexWebmaster"},{name:"table",location:"partials/table"},{name:"tableControl",location:"partials/tableControl"},{name:"toolbar",location:"partials/toolbar"},{name:"topBar",location:"partials/topBar"},{name:"tree",location:"partials/tree"},{name:"treeSimple",location:"partials/treeSimple"},{name:"updateLayout",location:"partials/updateLayout"}]}),require(["jquery"],function(){var a=$.get(window.UmiSettings.authUrl);a.done(function(a){var b=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};a.result&&b(window.UmiSettings,a.result.auth),require(["application/main"],function(a){a()})}),a.fail(function(a){require(["auth/main"],function(b){b({accessError:a})})})}),define("main",function(){});