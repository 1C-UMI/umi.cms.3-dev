<!DOCTYPE HTML>
<html data-foundation>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>UMI.CMS</title>
        <link rel="stylesheet" type="text/css" href="<?= $assetsUrl ?>css/styles.css?version=<?= $version ?>">
        <script>
            // Ember settings
            ENV = {
                ENABLE_ALL_FEATURES: true
            };
            window.UmiSettings = {
                "baseURL": '<?= $baseUrl ?>',
                "baseApiURL": '<?= $baseApiUrl ?>',
                "baseSiteURL": '<?= $baseSiteUrl ?>',
                "authUrl": '<?= $authUrl ?>',
                "assetsUrl" : '<?= $assetsUrl ?>',
                "projectAssetsUrl" : '<?= $projectAssetsUrl ?>'
            }
        </script>
    </head>
    <body id="body" class="loading">
        <script
            data-main="<?= $assetsUrl ?>main.js?version=<?= $version ?>"
            src="<?= $assetsUrl ?>vendor/requirejs/require.js?version=<?= $version ?>">
        </script>

        <noscript>
            <div class="auth-layout">
                <div class="bubbles"></div>
                <div class="bubbles-front"></div>
                <div class="row vertical-center">
                    <div class="large-centered columns large-3">
                        <p class="text-center">
                            <img src="<?= $assetsUrl ?>images/auth-logo.png?version=<?= $version ?>"/>
                        </p>
                        <div>
                            <div class="panel pretty radius shake-it">
                                <p class="text-center">Для работы с UMI.CMS необходимо <a target="_blank" href="https://support.google.com/adsense/answer/12654?hl=ru">включить Javascript</a> в вашем браузере.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="auth-mask"></div>
        </noscript>

        <div class="umi-loading-animation">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="#4C617D" id="svgSpinner">
                <path opacity=".25" d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"/>
                <path d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z" id="circleAnimateSvg">
                    <animateTransform attributeName="transform" type="rotate" from="0 16 16" to="360 16 16" dur="0.8s" repeatCount="indefinite" />
                </path>
                <script>
                    (function() {
                        function detectIE() {
                            var ua = window.navigator.userAgent;
                            var msie = ua.indexOf('MSIE ');
                            var trident = ua.indexOf('Trident/');

                            if (msie > 0) {
                                // IE 10 or older => return version number
                                return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
                            }

                            if (trident > 0) {
                                // IE 11 (or newer) => return version number
                                var rv = ua.indexOf('rv:');
                                return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
                            }

                            // other browser
                            return false;
                        }

                        window.onload = function() {
                            'use strict';
                            try{

                                if(detectIE()) {
                                    var initialTheta = 0;
                                    var thetaDelta = 8;
                                    var requestAnimationFrameID;
                                    var mySquare = document.getElementById('circleAnimateSvg');

                                    var transformObject;
                                    mySquare.currentTheta = initialTheta;
                                    transformObject = svgSpinner.createSVGTransform();
                                    mySquare.transform.baseVal.appendItem(transformObject);

                                    function animateSvg() {
                                        mySquare.transform.baseVal.getItem(0).setRotate(mySquare.currentTheta, 16, 16);
                                        mySquare.currentTheta += thetaDelta;
                                        requestAnimationFrameID = requestAnimationFrame(animateSvg);
                                    }

                                    requestAnimationFrameID = requestAnimationFrame(animateSvg);
                                }
                            } catch(error){}
                        };
                    }());

                </script>
            </svg>
        </div>
    </body>
</html>