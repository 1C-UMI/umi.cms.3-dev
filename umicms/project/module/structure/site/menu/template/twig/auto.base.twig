{% if (menu) %}

    {% if level is not defined %}
        {% set level = 1 %}
    {% endif %}

    {% block body %}
        {% block start %}
        {% endblock %}
            {% for branch in menu %}

                {% block item %}

                    {% block item_start %}{% endblock %}

                    {% if branch.current %}
                        {% block item_current %}{% endblock %}
                    {% elseif branch.active %}
                        {% block item_active %}{% endblock %}
                    {% else %}
                        {% block item_default %}{% endblock %}
                    {% endif %}

                    {% block submenu %}
                        {{ include('auto.twig', {'menu': branch.children, 'level' : level + 1}) }}
                    {% endblock %}

                    {% if not loop.last %}
                        {% block item_separator %}{% endblock %}
                    {% endif %}

                    {% block item_end %}
                    {% endblock %}

                {% endblock %}
            {% endfor %}
        {% block end %}
        {% endblock %}
    {% endblock %}

{% else %}
    {% block empty %}
    {% endblock %}
{% endif %}
