Правила разработки для Core Team
=============

Документ содержит правила публикации кода в репозиторий UMI.CMS и должен соблюдаться всеми членами команды.
Разработка ведется под контролем версий с использованием Git, а так же под управлением Youtrack.

В процессе разработки действуют следующие принципы:
- в dev-ветку допускаются только merge-коммиты feature-бранчей, а так же маленькие багофиксы (на 10-15 минут времени),
которые нужны всем и не ломают dev.
Если багофикс более-менее сложный и есть вероятность поломать dev, необходимо поставить задачу в Youtrack и
выделить под него отдельную ветку и обязательно покрыть баг тестами.
- разработчик создает новую ветку, указывает ее в карточке задачи Youtrack, пишет в своей ветку код, коммитит, пушит.
Перед созданием ветки нужно убедиться, что в своем репозитории находится актуальные версии dev и master;
- Каждый коммит обязательно сопровождается комментарием. Удобно, когда в комментарии также указывается ссылка на
карточку задачи в youtrack. Коммиты должны быть частые и, по возможноти, семантично разделенные.
Т.е. не надо тратить много времени и коммитить каждую измененную строчку,
но и всю большую задачу в один МЕГАКОММИТ тоже не надо заносить;
- Пушить надо хотя бы раз в день.

Каждый комментарий к мерж-коммиту в dev или master строится так: название_задачи_из_youtrack_с_номером (ссылка_на_карточку_задачи).

При коммите релиза комментарием служит changelog, собранный по коммитам в dev с момента предыдущего релиза.

При именовании веток существует следующая нотация:
    feature/* : Рождается от dev-а. Вливается в dev. Служит для разработки нового функционала (хоть сколько-нибудь сложного). В master вливается вместе с кучей других фичей для "релиза".
    release/* : Рождается от dev-а. Вливается в master и в dev. Создает новый релизный тэг 3-го уровня. Служит для подготовки релиза и переноса функционала из dev-а в master.
    branch/* : Рождается от веток, отличных от dev и master. Вливается в ту ветку, от которой был рожден. Служит для решения подзадач для большой задачи, для декомпозиции больших задач на маленькие и для всех прочих целей.

Каждый коммит в master помечается цифровым тэгом, состоящим из 3-х или 4-х цифр: 3.X.Y.Z

Вторая цифра (X) - это мажорная версия. Она меняется только при релизе, причем только если в этом релизе идут какие-то крупные изменения в ядре.
Третья цифра (Y) - это текущая версия. Она меняется при каждом релизе - увеличивается на 1. При релизе ставится тэг, состоящий из двух цифр. Если поменялась мажорная версия, то текущая версия выставляется в 0.
Четвертая цифра (Z) - это минорная версия. Она меняется при вливании в master хотфиксов. Инкрементируется в рамках текущей версии. Как только выкладывется релиз (меняется текущая версия) - счетчик сбрасывется.